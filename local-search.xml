<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>å‰ç«¯å·¥ç¨‹åŒ–å…¥é—¨</title>
    <link href="/2022/03/18/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E5%85%A5%E9%97%A8/"/>
    <url>/2022/03/18/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E5%85%A5%E9%97%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>æ„Ÿè°¢èŒèšªå“¥å¯¹æœ¬äººå¹³å¸¸çš„ç…§é¡¾å’ŒçŸ¥è¯†çš„ä¼ æˆï¼Œå°å¼Ÿæ°¸è¿œæ˜¯ä½ çš„å°å¼Ÿï¼Œâ¤ ~</p><p>ä¹Ÿæ„Ÿè°¢è¿‘æœŸSophiaå‰ç«¯æŠ€èƒ½çš„æŒ‡å¯¼ ~</p><p>å½“ç„¶ä¹Ÿæ„Ÿè°¢å…¶ä»–å¤§ä½¬ä»¬å¯¹æˆ‘çš„æŒ‡å¯¼ï¼Œè¿™é‡Œä¹Ÿä¸éƒ½ä¸€ä¸€å†™äº†ï¼Œæˆ‘çš„æˆé•¿ç¦»ä¸å¼€ä½ ä»¬ ~</p><h2 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h2><h3 id="1-cliçš„éª¨æ¶"><a href="#1-cliçš„éª¨æ¶" class="headerlink" title="1. cliçš„éª¨æ¶"></a>1. cliçš„éª¨æ¶</h3><p>å‰ç«¯å·¥ç¨‹åŒ–çš„ä¸»è¦ç›®æ ‡å°±æ˜¯è§£æ”¾ç”Ÿäº§åŠ›ã€æé«˜ç”Ÿäº§æ•ˆç‡ã€‚ é€šè¿‡åˆ¶å®šä¸€ç³»åˆ—çš„è§„èŒƒï¼Œå€ŸåŠ©å·¥å…·å’Œæ¡†æ¶è§£å†³å‰ç«¯å¼€å‘ä»¥åŠå‰åç«¯åä½œè¿‡ç¨‹ä¸­çš„ç—›ç‚¹å’Œéš¾åº¦é—®é¢˜ã€‚</p><p>æˆ‘çš„ç†è§£æ˜¯æœ‰ç‚¹åƒé»‘ç›’ï¼Œä½¿ç”¨è€…å¯ä»¥ä¸éœ€è¦è€ƒè™‘å…·ä½“å®ç°è¿‡ç¨‹ï¼Œä»è€Œè¾¾åˆ°ä¸€äº›ç›®çš„ï¼Œå’Œå°è£…çš„ç†å¿µæœ‰ç‚¹ç›¸ä¼¼ã€‚</p><p>å…ˆçœ‹ä¸‹é¡¹ç›®çš„åº•å±‚æ¶æ„ï¼Œå…¶å®å¾ˆç®€å•</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">â”œâ”€â”€ package.<span class="hljs-keyword">json </span>          <span class="hljs-comment"># å…·ä½“é…ç½®é¡¹</span><br>â””â”€â”€ <span class="hljs-keyword">bin </span>                   <br>    â”œâ”€â”€ index.<span class="hljs-keyword">js </span>          <span class="hljs-comment"># nodeè„šæœ¬å‘½ä»¤</span><br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æˆ‘ä»¬å®ç°ä¸€ä¸ªç®€å•çš„åŠŸèƒ½ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="/img/front/1.png" alt="åˆ›å»ºé¡¹ç›®"></p><p><img src="/img/front/2.png" alt="ç”Ÿæˆä¸€ä¸ªè¾“å‡º"></p><p>ç›´æ¥ä¸Šä»£ç ï¼š</p><p>å…ˆå®šä¹‰ä¸€ä¸‹package.jsonçš„å†…å®¹</p><h4 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;2-cli&quot;</span>, <span class="hljs-comment">// é¡¹ç›®åï¼Œå”¯ä¸€æ ‡è¯†</span><br>  <span class="hljs-attr">&quot;version&quot;</span>: <span class="hljs-string">&quot;1.0.0&quot;</span>,<br>  <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>  <span class="hljs-attr">&quot;main&quot;</span>: <span class="hljs-string">&quot;index.js&quot;</span>,<br>  <span class="hljs-attr">&quot;bin&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;zhangzheyi&quot;</span>: <span class="hljs-string">&quot;./bin/index.js&quot;</span> <span class="hljs-comment">// ç›¸å½“äºæ³¨å…¥ï¼Œkeyå€¼å°±æ˜¯nodeå‘½ä»¤å¤´</span><br>  &#125;,<br>  <span class="hljs-attr">&quot;scripts&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;test&quot;</span>: <span class="hljs-string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><br>  &#125;,<br>  <span class="hljs-attr">&quot;author&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>  <span class="hljs-attr">&quot;license&quot;</span>: <span class="hljs-string">&quot;ISC&quot;</span>,<br>  <span class="hljs-attr">&quot;dependencies&quot;</span>: &#123; <span class="hljs-comment">// æ‰€ç”¨ä¾èµ–</span><br>    <span class="hljs-attr">&quot;colors&quot;</span>: <span class="hljs-string">&quot;^1.4.0&quot;</span>,<br>    <span class="hljs-attr">&quot;commander&quot;</span>: <span class="hljs-string">&quot;^7.2.0&quot;</span>,<br>    <span class="hljs-attr">&quot;inquirer&quot;</span>: <span class="hljs-string">&quot;^8.0.0&quot;</span>,<br>    <span class="hljs-attr">&quot;shelljs&quot;</span>: <span class="hljs-string">&quot;^0.8.4&quot;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥çœ‹ä¸‹index.js  ä¸»è¦é€»è¾‘åœ¨è¿™</p><h4 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-meta">#!/usr/bin/env node</span><br><br><span class="hljs-keyword">const</span> program = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;commander&quot;</span>); <span class="hljs-comment">// å‘½ä»¤è¡Œ</span><br><span class="hljs-keyword">const</span> inquirer = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;inquirer&quot;</span>); <span class="hljs-comment">// åŠ è½½å™¨</span><br><span class="hljs-keyword">const</span> shell = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;shelljs&quot;</span>); <br><span class="hljs-keyword">const</span> colors = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;colors&quot;</span>); <span class="hljs-comment">// åŠ é¢œè‰²</span><br><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;path&quot;</span>);<br><br><span class="hljs-comment">// åŠ äº†ä¸€ä¸ªç‰ˆæœ¬å·çš„æ§åˆ¶</span><br><span class="hljs-keyword">const</span> pkg = <span class="hljs-built_in">require</span>(path.join(__dirname, <span class="hljs-string">&quot;../package.json&quot;</span>));<br><span class="hljs-comment">// å¯ä»¥-v æˆ–è€… --versionæŸ¥çœ‹å½“å‰ç‰ˆæœ¬</span><br>program.version(pkg.version, <span class="hljs-string">&quot;-v, --version&quot;</span>);<br><br>program<br>  .command(<span class="hljs-string">&quot;init&quot;</span>)<br>  .description(<span class="hljs-string">&quot;åˆ›å»ºé¡¹ç›®&quot;</span>)<br>  .action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    inquirer<br>      .prompt([<br>        &#123;<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;list&quot;</span>,<br>          <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;é€‰æ‹©é¡¹ç›®ç±»å‹:&quot;</span>,<br>          <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;type&quot;</span>,<br>          <span class="hljs-attr">choices</span>: [<br>            <span class="hljs-string">&quot;çº¯å‰ç«¯é¡¹ç›®&quot;</span>,<br>            <span class="hljs-string">&quot;çº¯åç«¯é¡¹ç›®&quot;</span>,<br>            <span class="hljs-string">&quot;å…¨æ ˆé¡¹ç›®&quot;</span><br>          ]<br>        &#125;,<br>        &#123;<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;input&quot;</span>,<br>          <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;è®¾ç½®ä¸€ä¸ªé¡¹ç›®å:&quot;</span>,<br>          <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;name&quot;</span><br>        &#125;<br>      ])<br>      .then(<span class="hljs-function"><span class="hljs-params">answers</span> =&gt;</span> &#123;<br>            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;answers&#x27;</span>, answers);<br>      &#125;);<br>  &#125;);<br>  <span class="hljs-comment">// å¦‚æœå…¶ä»–å‘½ä»¤ä¼šç”¨çº¢è‰²æç¤º</span><br>  program.command(<span class="hljs-string">&quot;*&quot;</span>).action(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    shell.echo(<br>      <span class="hljs-string">&quot;+++++++++++++++++++++++++ äº²ï¼Œæš‚æ— æ­¤å‘½ä»¤ï¼Œè¯·æŸ¥çœ‹å¸®åŠ©ã€‚+++++++++++++++++++++++++&quot;</span><br>        .red<br>    );<br>  &#125;);<br>  <br>  program.parse(process.argv);<br></code></pre></td></tr></table></figure><ol><li><p>è§£é‡Šä¸€ä¸‹å¼€å¤´ç¬¬ä¸€å¥</p><p> #åœ¨å¾ˆå¤šè„šæœ¬é‡Œé¢æ˜¯ç”¨ä½œæ³¨é‡Šå¼€å¤´çš„ç¬¦å·ï¼Œå¦‚æœå½“åšæ‰§è¡Œè„šæœ¬è¿è¡Œçš„è¯ï¼Œç›¸å½“äºè¿™è¡Œå°±æ˜¯æ³¨é‡Šï¼Œå…¶å®æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œåªæ˜¯æ ‡è¯†çš„ä½œç”¨ï¼Œè¯´æ˜è¿™ä¸ªæ–‡ä»¶å¯ä»¥å½“åšè„šæœ¬æ¥è¿è¡Œ</p><p> <strong>/usr/bin/env node</strong>è¿™è¡Œçš„æ„æ€å°±æ˜¯ç”¨nodeæ¥æ‰§è¡Œæ­¤æ–‡ä»¶</p></li><li><p>æœ¬åœ°è°ƒè¯•éœ€è¦é”®å…¥npm link</p><p> npm linkæ˜¯ä¸€ç§æŠŠåŒ…é“¾æ¥åˆ°åŒ…æ–‡ä»¶å¤¹çš„æ–¹å¼ï¼Œå³ï¼šå¯ä»¥åœ¨ä¸å‘å¸ƒnpmæ¨¡å—çš„æƒ…å†µä¸‹ï¼Œè°ƒè¯•è¯¥æ¨¡å—ï¼Œå¹¶ä¸”ä¿®æ”¹æ¨¡å—åä¼šå®æ—¶ç”Ÿæ•ˆï¼Œä¸éœ€è¦é€šè¿‡npm installè¿›è¡Œå®‰è£…</p><p> ç®€å•æ¥è¯´å°±æ˜¯æ–¹ä¾¿è°ƒè¯•</p></li></ol><h3 id="2-cliæ’å…¥ç»„ä»¶-å‘å¸ƒ"><a href="#2-cliæ’å…¥ç»„ä»¶-å‘å¸ƒ" class="headerlink" title="2. cliæ’å…¥ç»„ä»¶+å‘å¸ƒ"></a>2. cliæ’å…¥ç»„ä»¶+å‘å¸ƒ</h3><p>æœ€ç®€å•çš„æŸ¥çœ‹ç‰ˆæœ¬å·å’Œæ‰“å°ä¿¡æ¯å·®ä¸å¤šæ‡‚äº†ï¼Œä¸‹æ¥çœ‹ä¸‹å¦‚ä½•æ’å…¥ç»„ä»¶å’Œå‘å¸ƒ</p><p>ç›´æ¥ä¸Šä»£ç </p><h4 id="index-js-1"><a href="#index-js-1" class="headerlink" title="index.js"></a>index.js</h4><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs dts">program<br>  .command(<span class="hljs-string">&quot;insert&quot;</span>)<br>  .description(<span class="hljs-string">&quot;æ’å…¥ç‰©æ–™&quot;</span>)<br>  .action(function () &#123;<br>    inquirer<br>      .prompt([<br>        &#123;<br><span class="hljs-symbol">          type:</span> <span class="hljs-string">&quot;list&quot;</span>,<br><span class="hljs-symbol">          message:</span> <span class="hljs-string">&quot;é€‰æ‹©é¡¹ç›®ç±»å‹:&quot;</span>,<br><span class="hljs-symbol">          name:</span> <span class="hljs-string">&quot;type&quot;</span>,<br><span class="hljs-symbol">          choices:</span> [<span class="hljs-string">&quot;æ’å…¥ç»„ä»¶&quot;</span>, <span class="hljs-string">&quot;æ’å…¥é¡µé¢&quot;</span>, <span class="hljs-string">&quot;æ’å…¥é¡¹ç›®&quot;</span>],<br>        &#125;,<br>        &#123;<br><span class="hljs-symbol">          type:</span> <span class="hljs-string">&quot;input&quot;</span>,<br><span class="hljs-symbol">          message:</span> <span class="hljs-string">&quot;è®¾ç½®ä¸€ä¸ªç‰©æ–™å:&quot;</span>,<br><span class="hljs-symbol">          name:</span> <span class="hljs-string">&quot;name&quot;</span>,<br>        &#125;,<br>      ])<br>      .then((answers) =&gt; &#123;<br>        console.log(<span class="hljs-string">&quot;answers&quot;</span>, answers);<br>        if (answers.type === <span class="hljs-string">&quot;æ’å…¥ç»„ä»¶&quot;</span>) &#123;<br>          <span class="hljs-comment">// æ’å…¥ä¸€ä¸ªç»„ä»¶ï¼Œè¿™é‡Œæ˜¯ä¸ªå…³é”®</span><br>          insertComponent(answers);<br>        &#125;<br>      &#125;);<br>  &#125;);<br></code></pre></td></tr></table></figure><h4 id="util-jsï¼ˆè¿™ä¸ªä¹Ÿæ˜¯å…³é”®ï¼‰"><a href="#util-jsï¼ˆè¿™ä¸ªä¹Ÿæ˜¯å…³é”®ï¼‰" class="headerlink" title="util.jsï¼ˆè¿™ä¸ªä¹Ÿæ˜¯å…³é”®ï¼‰"></a>util.jsï¼ˆè¿™ä¸ªä¹Ÿæ˜¯å…³é”®ï¼‰</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;path&quot;</span>);<br><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;fs-extra&quot;</span>);<br><span class="hljs-keyword">const</span> shell = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;shelljs&quot;</span>);<br><br><span class="hljs-built_in">module</span>.exports = <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">answers</span>)</span>&#123;<br>  <span class="hljs-keyword">const</span> componentPath = path.join(__dirname, <span class="hljs-string">&quot;../template/component&quot;</span>);<br>  <span class="hljs-keyword">const</span> currentPath = process.cwd();<br>  <span class="hljs-keyword">const</span> currentComponentPath = path.join(currentPath, <span class="hljs-string">&#x27;component&#x27;</span>);<br>  <span class="hljs-keyword">const</span> targetComponentPath = path.join(currentPath, answers.name);<br>  <span class="hljs-comment">// æŠŠæ¨¡æ¿æ‹·è´è¿‡æ¥</span><br>  <span class="hljs-keyword">await</span> shell.cp(<span class="hljs-string">&#x27;-r&#x27;</span>, componentPath, currentPath);<br>  <span class="hljs-comment">// ç»™æ¨¡æ¿æ¢åå­— componentåç§°æ¢ä¸ºanswer.name</span><br>  <span class="hljs-keyword">await</span> shell.mv(currentComponentPath, targetComponentPath);<br><br>  <span class="hljs-comment">// æ³•äºŒ</span><br>  <span class="hljs-comment">// const componentPath = path.join(__dirname, &#x27;../template/component&#x27;)</span><br>  <span class="hljs-comment">// const currentPath = process.cwd();</span><br>  <span class="hljs-comment">// const currentComponentPath = path.join(currentPath, answers.name);</span><br>  <span class="hljs-comment">// await shell.cp(&#x27;-r&#x27;, componentPath, currentComponentPath)</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>shell.cp ä¸ºæ‹·è´å‡½æ•°ï¼Œä¸Šæ–‡ä¸»è¦æ˜¯ä¸ºäº†æ‹·è´åˆ°å½“å‰è·¯å¾„ä¸‹ï¼›-rï¼šè‹¥ç»™å‡ºçš„æºæ–‡ä»¶æ˜¯ä¸€ä¸ªç›®å½•æ–‡ä»¶ï¼Œæ­¤æ—¶å°†å¤åˆ¶è¯¥ç›®å½•ä¸‹æ‰€æœ‰çš„å­ç›®å½•å’Œæ–‡ä»¶ã€‚</p></li><li><p>shell.mv è¿™é‡Œç”¨ä½œæ”¹å</p></li></ul><p>æŠŠæ‰€æœ‰é€»è¾‘éƒ½æ”¾åˆ°äº†utilå‡½æ•°é‡Œé¢å®ç°äº†ç§»åŠ¨ä¸€ä¸ªå†™å¥½çš„ç»„ä»¶ï¼Œè¿™åªæ˜¯æœ€ç®€å•çš„æ–¹æ³•ã€‚</p><h4 id="å‘å¸ƒ"><a href="#å‘å¸ƒ" class="headerlink" title="å‘å¸ƒ"></a>å‘å¸ƒ</h4><p>npm publish å‘å¸ƒåˆ°å…¬ç½‘ä¸Š</p><p>å½“ç„¶ä¹Ÿå¯ä»¥ç”¨å…¶ä»–é•œåƒå‘å¸ƒåˆ°å†…ç½‘ä¸Š</p><h3 id="3-ä½¿ç”¨puppeteeræ¥åšä¸€ä¸ªç½‘é¡µçˆ¬è™«"><a href="#3-ä½¿ç”¨puppeteeræ¥åšä¸€ä¸ªç½‘é¡µçˆ¬è™«" class="headerlink" title="3. ä½¿ç”¨puppeteeræ¥åšä¸€ä¸ªç½‘é¡µçˆ¬è™«"></a>3. ä½¿ç”¨puppeteeræ¥åšä¸€ä¸ªç½‘é¡µçˆ¬è™«</h3><p>å®ç°çˆ¬è™«çš„å§¿åŠ¿æœ‰å¥½å¤šç§ï¼Œå„ç§è¯­è¨€éƒ½å¯ä»¥å®ç°ï¼Œè¿™é‡Œå†™ä¸€ä¸‹nodeçš„ä¸€ä¸ªæ–¹æ³•ï¼Œç›´æ¥ä¸Šä»£ç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> puppeteer = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;puppeteer&quot;</span>);<br><br>(<span class="hljs-keyword">async</span> () =&gt; &#123;<br>  <span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> puppeteer.launch(&#123; <span class="hljs-attr">headless</span>: <span class="hljs-literal">false</span> &#125;);<span class="hljs-comment">// æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨</span><br>  <span class="hljs-keyword">const</span> page = <span class="hljs-keyword">await</span> browser.newPage();<span class="hljs-comment">// æ–°æ·»æ‰“å¼€ä¸€ä¸ªtab</span><br>  <span class="hljs-keyword">await</span> page.goto(<span class="hljs-string">&#x27;https://www.baidu.com&#x27;</span>);<span class="hljs-comment">// è¾“å…¥ç›®æ ‡ç½‘å€åœ°å€ </span><br>  <span class="hljs-comment">// è¿™é‡Œå¯ä»¥å…ˆç­‰ä¸ªä¸€ç§’é’Ÿï¼Œå¦‚æœä¹™æ–¹å«Œæ…¢äº†å¯ä»¥å‡ºé’±ä¼˜åŒ–ï¼Œä¸€æ¬¡å‡åŠç§’ğŸ˜</span><br>  <span class="hljs-keyword">await</span> page.waitForTimeout(<span class="hljs-number">1000</span>);<br>  <span class="hljs-comment">// ä¸‹é¢å‡ è¡Œæ˜¯å…³é”®ï¼Œæˆ‘æˆªå›¾æ¥è¯´æ˜ä¸€ä¸‹</span><br>  <span class="hljs-keyword">await</span> page.type(<span class="hljs-string">&#x27;#kw&#x27;</span>, <span class="hljs-string">&quot;NBA&quot;</span>);<br>  <span class="hljs-keyword">await</span> page.click(<span class="hljs-string">&quot;#su&quot;</span>)<br>  <span class="hljs-keyword">await</span> page.waitForTimeout(<span class="hljs-number">1500</span>)<br><br>  <span class="hljs-comment">// åŠ è½½é¡µé¢html</span><br>  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> page.evaluate(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-comment">// æŠ“å–å¯¹åº”æ•°æ®</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;su&#x27;</span>).value;<br>  &#125;);<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;çˆ¬è™«åˆ°çš„æ•°æ®ï¼š&#x27;</span>, data);<br><br>  <span class="hljs-keyword">await</span> page.screenshot(&#123;<span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;aaa.png&#x27;</span>, <span class="hljs-attr">fullPage</span>: <span class="hljs-literal">true</span>&#125;)<br><br>  browser.close()<br>&#125;)();<br></code></pre></td></tr></table></figure><p><img src="/img/front/3.png" alt="ç™¾åº¦çš„å‰ç«¯èµ„æºè¯¦å›¾"></p><p>è¿™ä¸ªå›¾å‘äº†ä¸€ç›®äº†ç„¶ï¼Œå°±æ˜¯é€šè¿‡puppeteeræ¥æ¨¡æ‹Ÿä¸€ä¸ªé¼ æ ‡ç‚¹å‡»çš„æœºåˆ¶æ¥è§¦å‘æŒ‰é’®ã€‚</p><p>æœ€ånpm linkä¸€ä¸‹ï¼Œåœ¨å…¥å£å¤„é”®å…¥node + æ–‡ä»¶åå°±èƒ½ä»ç™¾åº¦ä¸Šçˆ¬ä¸€ä¸ªé¡µé¢ã€‚</p><h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>è¿™ä¸ªå‰ç«¯å·¥ç¨‹åŒ–è¿˜æ˜¯å¾ˆå…¥é—¨çº§çš„ï¼Œåé¢æ·±ä¸€ç‚¹çš„å¯èƒ½ä¼šè·Ÿå…·ä½“çš„éœ€æ±‚æŒ‚é’©ï¼Œæ¯”å¦‚é€šè¿‡è„šæ‰‹æ¶ç”Ÿæˆä¸€ä¸ªç»„ä»¶ =&gt; é€šè¿‡è¯­éŸ³è¯†åˆ«æ— éœ€ç”¨æ‰‹æ¥ç”Ÿæˆä¸€ä¸ªç»„ä»¶ï¼Œ</p><p>åˆæˆ–è€…åœ¨ç¼–è¯‘å™¨å¤„ç€æ‰‹ï¼Œæ¯”å¦‚åœ¨vscodeåšä¸€ä¸ªæ’ä»¶ï¼Œé€šè¿‡é¼ æ ‡ç‚¹ç‚¹ç‚¹æ¥å®ç°å…·ä½“çš„éœ€æ±‚â€¦</p><p>æ…¢æ…¢å­¦å§ï¼Œâ”“(Â Â´âˆ€`Â )â”</p><p>æœ€åä¹Ÿç»™èŒèšªè€å¸ˆå¸¦ä¸ªè´§ ~ <a href="https://github.com/airuikun">airunkun</a></p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ€»ç»“</tag>
      
      <tag>node</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>react diff</title>
    <link href="/2022/02/13/react%20diff%E7%AE%97%E6%B3%95/"/>
    <url>/2022/02/13/react%20diff%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ä¼ ç»Ÿ diff ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n^3)ï¼Œè¿™åœ¨å‰ç«¯ render ä¸­æ˜¯ä¸å¯æ¥å—çš„ã€‚ä¸ºäº†é™ä½æ—¶é—´å¤æ‚åº¦ï¼Œreact çš„ diff ç®—æ³•åšäº†ä¸€äº›å¦¥åï¼Œæ”¾å¼ƒäº†æœ€ä¼˜è§£ï¼Œæœ€ç»ˆå°†æ—¶é—´å¤æ‚åº¦é™ä½åˆ°äº† O(n)ã€‚</p></blockquote><p>é‚£ä¹ˆ react diff ç®—æ³•åšäº†å“ªäº›å¦¥åå‘¢ï¼Ÿï¼Œå‚è€ƒå¦‚ä¸‹ï¼š</p><ol><li>tree diffï¼šåªå¯¹æ¯”åŒä¸€å±‚çš„ dom èŠ‚ç‚¹ï¼Œå¿½ç•¥ dom èŠ‚ç‚¹çš„è·¨å±‚çº§ç§»åŠ¨<br>å¦‚ä¸‹å›¾ï¼Œreact åªä¼šå¯¹ç›¸åŒé¢œè‰²æ–¹æ¡†å†…çš„ DOM èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒï¼Œå³åŒä¸€ä¸ªçˆ¶èŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰å­èŠ‚ç‚¹ã€‚å½“å‘ç°èŠ‚ç‚¹ä¸å­˜åœ¨æ—¶ï¼Œåˆ™è¯¥èŠ‚ç‚¹åŠå…¶å­èŠ‚ç‚¹ä¼šè¢«å®Œå…¨åˆ é™¤æ‰ï¼Œä¸ä¼šç”¨äºè¿›ä¸€æ­¥çš„æ¯”è¾ƒã€‚</li></ol><p>è¿™æ ·åªéœ€è¦å¯¹æ ‘è¿›è¡Œä¸€æ¬¡éå†ï¼Œä¾¿èƒ½å®Œæˆæ•´ä¸ª DOM æ ‘çš„æ¯”è¾ƒã€‚</p><p>è¿™å°±æ„å‘³ç€ï¼Œå¦‚æœ dom èŠ‚ç‚¹å‘ç”Ÿäº†è·¨å±‚çº§ç§»åŠ¨ï¼Œreact ä¼šåˆ é™¤æ—§çš„èŠ‚ç‚¹ï¼Œç”Ÿæˆæ–°çš„èŠ‚ç‚¹ï¼Œè€Œä¸ä¼šå¤ç”¨ã€‚</p><ol start="2"><li><p>component diffï¼šå¦‚æœä¸æ˜¯åŒä¸€ç±»å‹çš„ç»„ä»¶ï¼Œä¼šåˆ é™¤æ—§çš„ç»„ä»¶ï¼Œåˆ›å»ºæ–°çš„ç»„ä»¶</p></li><li><p>element diffï¼šå¯¹äºåŒä¸€å±‚çº§çš„ä¸€ç»„å­èŠ‚ç‚¹ï¼Œéœ€è¦é€šè¿‡å”¯ä¸€ id è¿›è¡Œæ¥åŒºåˆ†</p></li></ol><ul><li>å¦‚æœæ²¡æœ‰ id æ¥è¿›è¡ŒåŒºåˆ†ï¼Œä¸€æ—¦æœ‰æ’å…¥åŠ¨ä½œï¼Œä¼šå¯¼è‡´æ’å…¥ä½ç½®ä¹‹åçš„åˆ—è¡¨å…¨éƒ¨é‡æ–°æ¸²æŸ“</li><li>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ¸²æŸ“åˆ—è¡¨æ—¶ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å”¯ä¸€çš„ keyã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åˆ·é¢˜01</title>
    <link href="/2022/01/25/%E5%88%B7%E9%A2%98/"/>
    <url>/2022/01/25/%E5%88%B7%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id="1-åœ¨å­—ç¬¦ä¸²-s-ä¸­æ‰¾å‡ºç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¿”å›ä¸€ä¸ªå•ç©ºæ ¼ã€‚-s-åªåŒ…å«å°å†™å­—æ¯ã€‚"><a href="#1-åœ¨å­—ç¬¦ä¸²-s-ä¸­æ‰¾å‡ºç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¿”å›ä¸€ä¸ªå•ç©ºæ ¼ã€‚-s-åªåŒ…å«å°å†™å­—æ¯ã€‚" class="headerlink" title="1. åœ¨å­—ç¬¦ä¸² s ä¸­æ‰¾å‡ºç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¿”å›ä¸€ä¸ªå•ç©ºæ ¼ã€‚ s åªåŒ…å«å°å†™å­—æ¯ã€‚"></a>1. åœ¨å­—ç¬¦ä¸² s ä¸­æ‰¾å‡ºç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¿”å›ä¸€ä¸ªå•ç©ºæ ¼ã€‚ s åªåŒ…å«å°å†™å­—æ¯ã€‚</h1><p>ç¤ºä¾‹ 1:</p><p>è¾“å…¥ï¼šs = â€œabaccdeffâ€<br>è¾“å‡ºï¼šâ€™bâ€™<br>ç¤ºä¾‹ 2:</p><p>è¾“å…¥ï¼šs = â€œâ€<br>è¾“å‡ºï¼šâ€™ â€˜</p><p>æ–¹æ³•ä¸€ï¼šä½¿ç”¨å“ˆå¸Œè¡¨å­˜å‚¨é¢‘æ•°<br>æ€è·¯ä¸ç®—æ³•:</p><p>æˆ‘ä»¬å¯ä»¥å¯¹å­—ç¬¦ä¸²è¿›è¡Œä¸¤æ¬¡éå†ã€‚</p><p>åœ¨ç¬¬ä¸€æ¬¡éå†æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨å“ˆå¸Œæ˜ å°„ç»Ÿè®¡å‡ºå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ã€‚åœ¨ç¬¬äºŒæ¬¡éå†æ—¶ï¼Œæˆ‘ä»¬åªè¦éå†åˆ°äº†ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ï¼Œé‚£ä¹ˆå°±è¿”å›è¯¥å­—ç¬¦ï¼Œå¦åˆ™åœ¨éå†ç»“æŸåè¿”å›ç©ºæ ¼ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;string&#125; s</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> &#123;character&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">var</span> firstUniqChar = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> frequency = _.countBy(s);<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [i, ch] of <span class="hljs-keyword">Array</span>.<span class="hljs-keyword">from</span>(s).entries()) &#123;<br>    <span class="hljs-keyword">if</span> (frequency[ch] === <span class="hljs-number">1</span>) &#123;<br>      <span class="hljs-keyword">return</span> ch;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27; &#x27;</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><p>æ–¹æ³•äºŒï¼šä½¿ç”¨å“ˆå¸Œè¡¨å­˜å‚¨ç´¢å¼•<br>æ€è·¯ä¸ç®—æ³•</p><p>æˆ‘ä»¬å¯ä»¥å¯¹æ–¹æ³•ä¸€è¿›è¡Œä¿®æ”¹ï¼Œä½¿å¾—ç¬¬äºŒæ¬¡éå†çš„å¯¹è±¡ä»å­—ç¬¦ä¸²å˜ä¸ºå“ˆå¸Œæ˜ å°„ã€‚</p><p>å…·ä½“åœ°ï¼Œå¯¹äºå“ˆå¸Œæ˜ å°„ä¸­çš„æ¯ä¸€ä¸ªé”®å€¼å¯¹ï¼Œé”®è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå€¼è¡¨ç¤ºå®ƒçš„é¦–æ¬¡å‡ºç°çš„ç´¢å¼•ï¼ˆå¦‚æœè¯¥å­—ç¬¦åªå‡ºç°ä¸€æ¬¡ï¼‰æˆ–è€… -1âˆ’1ï¼ˆå¦‚æœè¯¥å­—ç¬¦å‡ºç°å¤šæ¬¡ï¼‰ã€‚å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡éå†å­—ç¬¦ä¸²æ—¶ï¼Œè®¾å½“å‰éå†åˆ°çš„å­—ç¬¦ä¸º ccï¼Œå¦‚æœ cc ä¸åœ¨å“ˆå¸Œæ˜ å°„ä¸­ï¼Œæˆ‘ä»¬å°±å°† cc ä¸å®ƒçš„ç´¢å¼•ä½œä¸ºä¸€ä¸ªé”®å€¼å¯¹åŠ å…¥å“ˆå¸Œæ˜ å°„ä¸­ï¼Œå¦åˆ™æˆ‘ä»¬å°† cc åœ¨å“ˆå¸Œæ˜ å°„ä¸­å¯¹åº”çš„å€¼ä¿®æ”¹ä¸º -1âˆ’1ã€‚</p><p>åœ¨ç¬¬ä¸€æ¬¡éå†ç»“æŸåï¼Œæˆ‘ä»¬åªéœ€è¦å†éå†ä¸€æ¬¡å“ˆå¸Œæ˜ å°„ä¸­çš„æ‰€æœ‰å€¼ï¼Œæ‰¾å‡ºå…¶ä¸­ä¸ä¸º -1âˆ’1 çš„æœ€å°å€¼ï¼Œå³ä¸ºç¬¬ä¸€ä¸ªä¸é‡å¤å­—ç¬¦çš„ç´¢å¼•ï¼Œç„¶åè¿”å›è¯¥ç´¢å¼•å¯¹åº”çš„å­—ç¬¦ã€‚å¦‚æœå“ˆå¸Œæ˜ å°„ä¸­çš„æ‰€æœ‰å€¼å‡ä¸º -1âˆ’1ï¼Œæˆ‘ä»¬å°±è¿”å›ç©ºæ ¼ã€‚</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs maxima"><span class="hljs-built_in">var</span> firstUniqChar = function(s) &#123;<br>  const <span class="hljs-built_in">position</span> = <span class="hljs-built_in">new</span> Map();<br>  const n = s.<span class="hljs-built_in">length</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-built_in">let</span> [i, ch] of Array.from(s).entries()) &#123;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">position</span>.has(ch)) &#123;<br>          <span class="hljs-built_in">position</span>.set(ch, -<span class="hljs-number">1</span>);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-built_in">position</span>.set(ch, i);<br>      &#125;<br>  &#125;<br>  <span class="hljs-built_in">let</span> <span class="hljs-built_in">first</span> = n;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-built_in">let</span> pos of <span class="hljs-built_in">position</span>.<span class="hljs-built_in">values</span>()) &#123;<br>      <span class="hljs-keyword">if</span> (pos !== -<span class="hljs-number">1</span> &amp;&amp; pos &lt; <span class="hljs-built_in">first</span>) &#123;<br>          <span class="hljs-built_in">first</span> = pos;<br>      &#125;<br>  &#125;<br>  <span class="hljs-built_in">return</span> <span class="hljs-built_in">first</span> == n ? &#x27; &#x27; : s[<span class="hljs-built_in">first</span>];<br>&#125;;<br></code></pre></td></tr></table></figure><p>åˆçœ‹åˆ°äº†ä¸€ä¸ªç­”æ¡ˆï¼Œè¢«ç§€åˆ°äº†ã€‚ã€‚ã€‚</p><figure class="highlight zephir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs zephir"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;string&#125; s</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> &#123;character&#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">var</span> firstUniqChar = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(s)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> x of s)&#123;<br>        <span class="hljs-keyword">if</span>(s.indexOf(x) === s.lastIndexOf(x)) <span class="hljs-keyword">return</span> x<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27; &#x27;</span><br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="2-ä¸‰ä¸ªæ•°çš„æœ€å¤§ä¹˜ç§¯"><a href="#2-ä¸‰ä¸ªæ•°çš„æœ€å¤§ä¹˜ç§¯" class="headerlink" title="2. ä¸‰ä¸ªæ•°çš„æœ€å¤§ä¹˜ç§¯"></a>2. ä¸‰ä¸ªæ•°çš„æœ€å¤§ä¹˜ç§¯</h1><p>ç»™ä½ ä¸€ä¸ªæ•´å‹æ•°ç»„ nums ï¼Œåœ¨æ•°ç»„ä¸­æ‰¾å‡ºç”±ä¸‰ä¸ªæ•°ç»„æˆçš„æœ€å¤§ä¹˜ç§¯ï¼Œå¹¶è¾“å‡ºè¿™ä¸ªä¹˜ç§¯ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼šnums = [1,2,3]<br>è¾“å‡ºï¼š6<br>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼šnums = [1,2,3,4]<br>è¾“å‡ºï¼š24<br>ç¤ºä¾‹ 3ï¼š</p><p>è¾“å…¥ï¼šnums = [-1,-2,-3]<br>è¾“å‡ºï¼š-6</p>]]></content>
    
    
    <categories>
      
      <category>åˆ·é¢˜</category>
      
    </categories>
    
    
    <tags>
      
      <tag>js</tag>
      
      <tag>leecode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æŸé¡¹ç›®CMSæŠ€æœ¯ç‚¹æ€»ç»“</title>
    <link href="/2021/12/30/%E6%9F%90%E9%A1%B9%E7%9B%AECMS%E6%8A%80%E6%9C%AF%E7%82%B9/"/>
    <url>/2021/12/30/%E6%9F%90%E9%A1%B9%E7%9B%AECMS%E6%8A%80%E6%9C%AF%E7%82%B9/</url>
    
    <content type="html"><![CDATA[<h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>å†™äº†ä¸€å¹´çš„ç™¾èŠ±äº†ï¼Œå‰å‡ å‘¨è¿˜å†™å†™æ€»ç»“ï¼Œæ˜¯æ—¶å€™å†™ä¸€ä¸‹æ²‰æ·€çš„ä¸œè¥¿äº†ã€‚</p><h2 id="è°ƒè¯•ç»éªŒ"><a href="#è°ƒè¯•ç»éªŒ" class="headerlink" title="è°ƒè¯•ç»éªŒ"></a>è°ƒè¯•ç»éªŒ</h2><ol><li>setupProxy.js</li></ol><p>æœ¬åœ°å¯ä»¥æ¨¡æ‹Ÿæ­£å¼å’Œçº¿ä¸Šç¯å¢ƒï¼Œé€šè¿‡è½¬å‘ä¸åŒçš„åŸŸåæ¥é…ç½®</p><p>@ <a href="https://cloud.tencent.com/developer/article/1664425">https://cloud.tencent.com/developer/article/1664425</a></p><p>é‡åˆ°æœ€å¸¸è§çš„é—®é¢˜ï¼ŒçŠ¶æ€ç æŠ¥304ï¼Œå› ä¸ºæ²¡æœ‰é…ç½®ç›¸å¯¹åº”çš„è·¯ç”±</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">app.use(proxy(<br>  &#x27;/hello&#x27;,<br>  make<span class="hljs-constructor">ProxyConfig(&#x27;<span class="hljs-params">http</span>:<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-params">hello</span>.<span class="hljs-params">oa</span>.<span class="hljs-params">com</span><span class="hljs-operator">/</span><span class="hljs-params">hello</span>&#x27;)</span>,<br>));<br></code></pre></td></tr></table></figure><ol start="2"><li>ä¸­é—´ä»¶æ‰“å°æ—¥å¿—</li></ol><p>è¿™å„¿å¥½åƒå¯¹ä¸­é—´ä»¶åŠ äº†ä¸€å±‚æ‰“å°ï¼Œstateå˜åŒ–å¯ä»¥åœ¨æ§åˆ¶å°ä¸Šçœ‹åˆ°ã€‚</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs lua">middlewares: [<br>  (info, <span class="hljs-built_in">next</span>) =&gt; &#123;<br>    <span class="hljs-keyword">if</span> (info.<span class="hljs-built_in">module</span> === <span class="hljs-string">&#x27;group&#x27;</span>) &#123;<br>      // console.<span class="hljs-built_in">error</span>(info);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (process.env.NODE_ENV === <span class="hljs-string">&#x27;development&#x27;</span> &amp;&amp; info.<span class="hljs-built_in">module</span> !== <span class="hljs-string">&#x27;loading&#x27;</span>) &#123;<br>      console.<span class="hljs-built_in">log</span>(<span class="hljs-string">&#x27;%c ------&gt;&gt;&gt;&#x27;</span>, <span class="hljs-string">&#x27;color:green;&#x27;</span>);<br>      console.<span class="hljs-built_in">log</span>(info);<br>    &#125;<br>    <span class="hljs-built_in">next</span>();<br>  &#125;,<br>],<br></code></pre></td></tr></table></figure><ol start="3"><li>è·¨åŸŸé—®é¢˜</li></ol><p>åœ¨ç™¾èŠ±ç¯å¢ƒè°ƒåå°æ¥å£ä¸€èˆ¬æ˜¯ä¸éœ€è¦é…ç½®è·¨åŸŸçš„ï¼Œå¦‚æœéœ€è¦è°ƒç”¨åˆ«çš„åå°çš„æ¥å£ï¼Œå¯èƒ½ä¼šå‡ºç°è·¨åŸŸé—®é¢˜ã€‚è¿™æ—¶å€™æœ€ç®€å•çš„ï¼Œç”¨æµè§ˆå™¨åŸç”Ÿçš„fetchè°ƒç”¨ä¸€ä¸‹ï¼Œçœ‹æ˜¯å¦èƒ½å¤Ÿè°ƒé€šã€‚<br>ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæ‰ä¸é€šï¼Œä¼šæœ‰æŠ¥é”™ï¼Œä¾‹å¦‚</p><ul><li> ç¼ºå°‘<strong>withCredentials</strong>è¿™ä¸ªå‚æ•°ï¼Œè¿™ä¸ªè¦çœ‹ä¸‹è¯·æ±‚æ˜¯å¦åŒ…äº†è¿™ä¸ªå‚æ•°ã€‚axiosæ˜¯ä¸è‡ªå¸¦çš„ï¼Œéœ€è¦åŠ ä¸Šè¿™ä¸ª</li></ul><h2 id="æ•°æ®æµçš„ç”Ÿäº§å’Œæ¶ˆè´¹"><a href="#æ•°æ®æµçš„ç”Ÿäº§å’Œæ¶ˆè´¹" class="headerlink" title="æ•°æ®æµçš„ç”Ÿäº§å’Œæ¶ˆè´¹"></a>æ•°æ®æµçš„ç”Ÿäº§å’Œæ¶ˆè´¹</h2><p>ç™¾èŠ±æœ€å…³é”®çš„è¿˜æ˜¯æ•°æ®æµï¼Œå› ä¸ºå¯¼å¸ˆçš„ä»£ç å¤ªå¤æ‚äº†ï¼Œè¢«å¤§å®¶ç§°ä¸ºåŠ å¯†ä»£ç ã€‚ã€‚ã€‚è¿™å—è¿˜æ˜¯éœ€è¦å¥½å¥½ç†ä¸€ä¸‹ã€‚</p><p>ç™¾èŠ±ç³»ç»Ÿæœ€å…³é”®çš„è¿˜æ˜¯ä¸ªå¤§åˆ—è¡¨ï¼Œç”¨æ¥å±•ç¤ºæ‰€æœ‰æ•°æ®ï¼Œå…³é”®éƒ¨åˆ†æœ‰è¯¦æƒ…é¡µï¼Œä¿®æ”¹é¡µï¼Œä¸‹è½½é¡µç­‰ï¼Œç›¸å¯¹åº”åˆ°rainbowï¼ˆå¯ä»¥ç†è§£ä¸ºå­˜å‚¨å˜é‡çš„ä¸­é—´ç®¡ç†åº“ï¼Œæ–¹ä¾¿å‰åç«¯åè°ƒå’Œä½¿ç”¨ï¼‰çš„å‚æ•°ï¼Œä¾‹å¦‚ï¼šæ˜¯å¦å±•ç¤ºï¼Œæ˜¯å¦ä¿®æ”¹ï¼Œæ˜¯å¦ä¸‹è½½ç­‰</p><ul><li> init(åˆå§‹åŒ–)ï¼Œå–åˆ°éœ€è¦ä½¿ç”¨çš„å…¨å±€å˜é‡ï¼Œè¿™é‡Œä½¿ç”¨äº†promise.allå–åˆ°æ‰€æœ‰çš„é™æ€æ•°æ®å­˜åˆ°globalçš„stateé‡Œï¼Œå…¶ä»–æ¨¡å—è°ƒç”¨å¯ä»¥ç›´æ¥ctx.globalå–åˆ°å“åº”çš„æ•°æ®</li></ul><h2 id="ç»„ä»¶æ–¹é¢"><a href="#ç»„ä»¶æ–¹é¢" class="headerlink" title="ç»„ä»¶æ–¹é¢"></a>ç»„ä»¶æ–¹é¢</h2><h3 id="1-GeneralTable"><a href="#1-GeneralTable" class="headerlink" title="1.GeneralTable"></a>1.GeneralTable</h3><p>Tableè¿™ä¸ªç»„ä»¶ä½¿ç”¨é¢‘ç‡å¾ˆé«˜ï¼Œå› ä¸ºç™¾èŠ±ä½¿ç”¨äº†concentä½œä¸ºäº†çŠ¶æ€ç®¡ç†åº“ï¼Œè¿™é‡Œå°è£…äº†ä¸€ä¸ªgeneralTableä½œä¸ºé€‚é…ï¼Œç»§æ‰¿äº†tableçš„é€šç”¨èƒ½åŠ›ï¼Œæ— éœ€é‡å†™ç¿»é¡µï¼ŒåŠ è½½æ›´å¤šç­‰åŠŸèƒ½ã€‚å¹¶ä¸”generalTableæ˜¯ä½œä¸ºccæ³¨å†Œçš„ä¸€ä¸ªæ¨¡å—ï¼Œå…·æœ‰tidè¿™ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œæ‰€ä»¥å¯ä»¥å­˜å‚¨å¤šä¸ªtableçš„æ•°æ®ã€‚</p><p>è¿™é‡Œè´´ä¸€ä¸‹ä»£ç ï¼Œæ–¹ä¾¿ç†è§£ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// setupåˆæ¬¡æŒ‚è½½æ‰§è¡Œï¼Œåªæ‰§è¡Œä¸€æ¬¡</span><br><span class="hljs-keyword">const</span> setup = <span class="hljs-function">(<span class="hljs-params">ctx</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> &#123;<br>    <span class="hljs-attr">tid</span>: tableId, fetchAfterMounted = <span class="hljs-literal">true</span>, hasMoreMode = <span class="hljs-literal">false</span>, <span class="hljs-attr">fetchFn</span>: propsFetchFn,<br>    pageSizeOptions = [<span class="hljs-string">&#x27;50&#x27;</span>, <span class="hljs-string">&#x27;100&#x27;</span>, <span class="hljs-string">&#x27;200&#x27;</span>],<br>  &#125; = ctx.props;<br>  <span class="hljs-keyword">const</span> &#123; ccUniqueKey &#125; = ctx;<br>  <span class="hljs-keyword">if</span> (!ctx.state.meta[tableId]) &#123;<br>    <span class="hljs-keyword">const</span> pageSize = <span class="hljs-built_in">parseInt</span>(pageSizeOptions[<span class="hljs-number">0</span>], <span class="hljs-number">10</span>) || <span class="hljs-number">50</span>;<br>    ctx.state.meta[tableId] = getInitMetaData(hasMoreMode, pageSize);<br>  &#125;<br><span class="hljs-comment">// åˆ·æ–°Tableï¼Œä¼ å…¥äº‹ä»¶åå’ŒtableId</span><br>  ctx.on([<span class="hljs-string">&#x27;refreshTable&#x27;</span>, tableId], <span class="hljs-keyword">async</span> (fetchFn) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> _fetchFn = fetchFn || propsFetchFn;<br>    <span class="hljs-keyword">await</span> ctx.dispatch(<span class="hljs-string">&#x27;clearTable&#x27;</span>, &#123; tableId &#125;, ccUniqueKey);<br>    <span class="hljs-keyword">await</span> ctx.dispatch(<span class="hljs-string">&#x27;handlePageCurrentChange&#x27;</span>, &#123; tableId, <span class="hljs-attr">current</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">fetchFn</span>: _fetchFn &#125;, ccUniqueKey);<br>  &#125;);<br><span class="hljs-comment">// æ¸…ç©ºåˆ—è¡¨</span><br>  ctx.on([<span class="hljs-string">&#x27;clearTable&#x27;</span>, tableId], <span class="hljs-function">() =&gt;</span> &#123;<br>    ctx.dispatch(<span class="hljs-string">&#x27;clearTable&#x27;</span>, &#123; tableId &#125;, ccUniqueKey);<br>  &#125;);<br><span class="hljs-comment">// æ¸…ç©ºå½“å‰åˆ—è¡¨</span><br>  ctx.on([<span class="hljs-string">&#x27;refreshTableCurPage&#x27;</span>, tableId], <span class="hljs-function">(<span class="hljs-params">fetchFn</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> _fetchFn = fetchFn || propsFetchFn;<br>    <span class="hljs-keyword">const</span> tableMeta = ctx.state.meta[tableId];<br>    ctx.dispatch(<span class="hljs-string">&#x27;handlePageCurrentChange&#x27;</span>, &#123; tableId, <span class="hljs-attr">current</span>: tableMeta.current, <span class="hljs-attr">fetchFn</span>: _fetchFn &#125;, ccUniqueKey);<br>  &#125;);<br><br>  ctx.effect(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (fetchAfterMounted) &#123;<br>      handlePageCurrentChange(<span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> ctx.dispatch(<span class="hljs-string">&#x27;clearTable&#x27;</span>, &#123; tableId &#125;, ccUniqueKey);<br>  &#125;, []);<br><span class="hljs-comment">// ç¿»é¡µç›¸å…³</span><br>  <span class="hljs-keyword">const</span> handlePageCurrentChange = <span class="hljs-function">(<span class="hljs-params">current</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123; fetchFn &#125; = ctx.props;<span class="hljs-comment">// fetchFnæœ‰å¯èƒ½ä¼šå˜ï¼Œè¿™é‡Œæ¯æ¬¡å–æœ€æ–°çš„</span><br>    ctx.dispatch(<span class="hljs-string">&#x27;handlePageCurrentChange&#x27;</span>, &#123; tableId, current, fetchFn &#125;, ccUniqueKey);<br>  &#125;;<br><span class="hljs-comment">// ç¿»é¡µç›¸å…³</span><br>  <span class="hljs-keyword">const</span> handelPageSizeChange = <span class="hljs-function">(<span class="hljs-params">page, pageSize</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123; fetchFn &#125; = ctx.props;<br>    ctx.dispatch(<span class="hljs-string">&#x27;handlePageSizeChange&#x27;</span>, &#123; tableId, pageSize, fetchFn &#125;, ccUniqueKey);<br>  &#125;;<br><span class="hljs-comment">// ç¿»é¡µç›¸å…³</span><br>  <span class="hljs-keyword">const</span> handleNextPage = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123; fetchFn &#125; = ctx.props;<br>    ctx.dispatch(<span class="hljs-string">&#x27;handleNextPage&#x27;</span>, &#123; tableId, fetchFn &#125;);<br>  &#125;;<br><br>  <span class="hljs-keyword">return</span> &#123;<br>    handlePageCurrentChange,<br>    handelPageSizeChange,<br>    handleNextPage,<br>    pageSizeOptions,<br>  &#125;;<br>&#125;;<br><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * #################[Code example]#####################</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  const fetcher = ()=&gt; xxxService.fetchData();</span><br><span class="hljs-comment"> *  &lt;GeneralTable tid=&quot;xxxId&quot; fetchFn=&#123;fetcher&#125; columns=&#123;yourColumnsDef&#125; /&gt;</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * ####################################################</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;object&#125;</span> <span class="hljs-variable">props</span></span></span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> </span>props.tid</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;boolean&#125;</span> </span>[props.hasMoreMode=false] - æ˜¯å¦å¤„äº hasMore æ¨¡å¼</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;boolean&#125;</span> </span>[props.disableBtnWhenNoMore=false] - å½“ hasMore ä¸ºtrueæ—¶ï¼Œå¦‚æœæ²¡æœ‰äº†æ›´å¤šæ•°æ®ï¼Œæ˜¯å¦ç¦ç”¨åŠ è½½æ›´å¤šæŒ‰é’®</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;string&#125;</span> </span>[props.rowKey=&#x27;id&#x27;] - rowKey</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number[]&#125;</span> </span>[props.pageSizeOptions=[&#x27;50&#x27;, &#x27;100&#x27;, &#x27;200&#x27;]] - pageSizeOptions</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;import(&#x27;./type&#x27;).FetchFn&#125;</span> </span>[props.fetchFn]</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">GeneralTable</span>(<span class="hljs-params">props</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> &#123; state, settings &#125; = useConcent(&#123; <span class="hljs-attr">module</span>: <span class="hljs-string">&#x27;GeneralTable&#x27;</span>, setup, props &#125;);<br>  <span class="hljs-keyword">const</span> &#123;<br>    tid, columns, rowKey = <span class="hljs-string">&#x27;id&#x27;</span>, scroll = &#123; <span class="hljs-attr">x</span>: <span class="hljs-string">&#x27;100%&#x27;</span> &#125;, hasMoreMode = <span class="hljs-literal">false</span>,<br>    disableBtnWhenNoMore, size = <span class="hljs-string">&#x27;default&#x27;</span>,<br>  &#125; = props;<br>  <span class="hljs-keyword">const</span> &#123; list, loading, current, total, pageSize, hasMore &#125; = state.meta[tid];<br>  <span class="hljs-keyword">const</span> &#123; handelPageSizeChange, handlePageCurrentChange, handleNextPage, pageSizeOptions &#125; = settings;<br>  <span class="hljs-keyword">const</span> renderBtn = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (disableBtnWhenNoMore &amp;&amp; !hasMore) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">disabled</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">width:</span> &#x27;<span class="hljs-attr">100</span>%&#x27; &#125;&#125;&gt;</span>æ²¡æœ‰æ›´å¤šäº†<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>;<br>    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;handleNextPage&#125;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">width:</span> &#x27;<span class="hljs-attr">100</span>%&#x27; &#125;&#125;&gt;</span>åŠ è½½æ›´å¤š<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>;<br>  &#125;;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Fragment</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">rowKey</span>=<span class="hljs-string">&#123;rowKey&#125;</span> <span class="hljs-attr">columns</span>=<span class="hljs-string">&#123;columns&#125;</span> <span class="hljs-attr">dataSource</span>=<span class="hljs-string">&#123;list&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">loading</span>=<span class="hljs-string">&#123;loading&#125;</span> <span class="hljs-attr">pagination</span>=<span class="hljs-string">&#123;false&#125;</span> <span class="hljs-attr">scroll</span>=<span class="hljs-string">&#123;scroll&#125;</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&#123;size&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">      /&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">height:</span> &#x27;<span class="hljs-attr">19px</span>&#x27;, <span class="hljs-attr">width:</span> &#x27;<span class="hljs-attr">100</span>%&#x27; &#125;&#125; /&gt;</span></span><br><span class="xml">      &#123;hasMoreMode</span><br><span class="xml">        ? renderBtn()</span><br><span class="xml">        : (</span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Pagination</span> <span class="hljs-attr">onShowSizeChange</span>=<span class="hljs-string">&#123;handelPageSizeChange&#125;</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;handlePageCurrentChange&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">            <span class="hljs-attr">current</span>=<span class="hljs-string">&#123;current&#125;</span> <span class="hljs-attr">total</span>=<span class="hljs-string">&#123;total&#125;</span> <span class="hljs-attr">showSizeChanger</span> <span class="hljs-attr">pageSizeOptions</span>=<span class="hljs-string">&#123;pageSizeOptions&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">            <span class="hljs-attr">pageSize</span>=<span class="hljs-string">&#123;parseInt(pageSize,</span> <span class="hljs-attr">10</span>)&#125;</span></span><br><span class="hljs-tag"><span class="xml">          /&gt;</span></span><br><span class="xml">        )</span><br><span class="xml">      &#125;</span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Fragment</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> React.memo(GeneralTable);<br></code></pre></td></tr></table></figure><blockquote><p>fetchFnæ˜¯å…³é”®å‡½æ•°ï¼Œé€šè¿‡é€ä¼ currentï¼ŒpageSizeï¼ŒpageListå¯ä»¥ç›´æ¥å®ç°ç¿»é¡µæ•ˆæœï¼Œè¿™ä¸€éƒ¨åˆ†é€»è¾‘å¯ä»¥å†™åˆ°ä¸šåŠ¡å±‚çš„reduceré‡Œ</p></blockquote><h3 id="2-onï¼Œemit-äº‹ä»¶è®¢é˜…ï¼Œå‘å°„"><a href="#2-onï¼Œemit-äº‹ä»¶è®¢é˜…ï¼Œå‘å°„" class="headerlink" title="2. onï¼Œemit äº‹ä»¶è®¢é˜…ï¼Œå‘å°„"></a>2. onï¼Œemit äº‹ä»¶è®¢é˜…ï¼Œå‘å°„</h3><p>äº‹ä»¶çš„è®¢é˜…ï¼Œå‘å°„åœ¨vueæ˜¯ä¸ªå¸¸ç”¨apiï¼Œä¸»è¦ç”¨æ¥è·¨ç»„ä»¶çš„é€šä¿¡ï¼Œreactæ²¡æœ‰ï¼Œä¹‹å‰åœ¨ç½‘ä¸Šä¹Ÿæœ‰åŒ…ï¼Œå¯ä»¥ç›´æ¥ç”¨ï¼Œè¿™é‡Œæ˜¯åœ¨å°è£…åˆ°ccé‡Œé¢äº†</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-meta"><span class="hljs-meta-keyword">import</span> pickOneRef from &#x27;../core/ref/pick-one-ref&#x27;;</span><br><br>export <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(event, <span class="hljs-rest_arg">...args</span>)</span> </span>&#123;<br>  <span class="hljs-keyword">if</span> (!event) <span class="hljs-keyword">return</span>;<br>  <span class="hljs-keyword">const</span> ref = pickOneRef();<br>  <span class="hljs-keyword">if</span> (ref) ref.ctx.emit(event, ...args);<br>&#125;<br></code></pre></td></tr></table></figure><p>çœ‹äº†ä¸‹æºç ï¼Œè¿™å„¿ä¹Ÿæ²¡çœ‹åˆ°ä»€ä¹ˆç‰¹åˆ«é«˜æ·±çš„ä¸œè¥¿ï¼Œå†™ä¸€ä¸ªç®€å•demoå®ç°ä¸€ä¸‹ï¼Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> eventPool = &#123;<br>  <span class="hljs-attr">map</span>: &#123;&#125;,<br>  <span class="hljs-comment">// äº‹ä»¶è®¢é˜…</span><br>  <span class="hljs-attr">on</span>: <span class="hljs-function">(<span class="hljs-params">name, cb</span>) =&gt;</span> &#123;<br>    eventPool.map[name] = cb;<br>  &#125;,<br>  <span class="hljs-comment">// äº‹ä»¶å‘å°„</span><br>  <span class="hljs-attr">emit</span>: <span class="hljs-function">(<span class="hljs-params">name, ...args</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> cb = eventPool.map[name];<br>    cb &amp;&amp; cb(...args);<br>  &#125;<br>&#125;;<br><span class="hljs-comment">// xxxä¸ºäº‹ä»¶åï¼Œæœ‰ä¸¤ä¸ªå‚æ•°</span><br>eventPool.on(<span class="hljs-string">&quot;xxx&quot;</span>, <span class="hljs-function">(<span class="hljs-params">p1, p2</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(p1, p2));<br><span class="hljs-comment">// å‘å°„å®Œç›´æ¥æ‰“å°äº†è¿™ä¸¤ä¸ªå‚æ•°</span><br>eventPool.emit(<span class="hljs-string">&quot;xxx&quot;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<br></code></pre></td></tr></table></figure><h3 id="3-Di-ç»„ä»¶ï¼Œä»£è¡¨æ•°æ®å½•å…¥ç»„ä»¶"><a href="#3-Di-ç»„ä»¶ï¼Œä»£è¡¨æ•°æ®å½•å…¥ç»„ä»¶" class="headerlink" title="3. Di-ç»„ä»¶ï¼Œä»£è¡¨æ•°æ®å½•å…¥ç»„ä»¶"></a>3. Di-ç»„ä»¶ï¼Œä»£è¡¨æ•°æ®å½•å…¥ç»„ä»¶</h3><p>é‡æ–°å°è£…Diç»„ä»¶ï¼Œä¸»è¦è¿˜æ˜¯ä¸ºäº†æŠŠæ•°æ®å®šåˆ¶åŒ–ä½œä¸ºpropsä¼ å…¥ç»„ä»¶ï¼Œç»Ÿä¸€äº†èµ·æ¥ï¼Œä¹Ÿæ˜¯ä¸ºäº†é€‚é…ccã€‚</p><p>å› ä¸ºæ˜¯ä½¿ç”¨çš„antdä½œä¸ºç»„ä»¶åº“ï¼Œæœ‰æ—¶å€™ä¼šæœ‰ä¸€éƒ¨åˆ†åŠŸèƒ½æƒ³è¦ä¸ªæ€§åŒ–çš„å®ç°ï¼Œè¿™æ—¶å€™é‡æ–°å°è£…ä¸€ä¸‹ä½œä¸ºä¸€ä¸ªé€šç”¨èƒ½åŠ›è¿˜æ˜¯ä¸é”™çš„</p><p>è¿™é‡Œä¸¾ä¸€äº›å°ä¾‹å­ï¼š</p><ul><li>é€šç”¨èƒ½åŠ›ï¼šæ˜¯å¦å¿…å¡«ï¼Œå‰ç¼€åŠ çº¢â€»ï¼ˆä¸»è¦æ˜¯æ ·å¼ï¼‰</li><li>Selectç»„ä»¶ï¼šä¸‰çº§çº§è”ã€åŒ¹é…ä¸Šç©ºå€¼æ—¶æ˜¾ç¤ºç©ºé€‰é¡¹</li><li>UploadMultiImg: å¤šé€‰uploadImg<br>â€¦</li></ul>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>React</tag>
      
      <tag>æ€»ç»“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŸå‹å’ŒåŸå‹é“¾</title>
    <link href="/2021/12/29/%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/"/>
    <url>/2021/12/29/%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%8E%9F%E5%9E%8B%E9%93%BE/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸€-æ™®é€šå¯¹è±¡ä¸å‡½æ•°å¯¹è±¡"><a href="#ä¸€-æ™®é€šå¯¹è±¡ä¸å‡½æ•°å¯¹è±¡" class="headerlink" title="ä¸€. æ™®é€šå¯¹è±¡ä¸å‡½æ•°å¯¹è±¡"></a>ä¸€. æ™®é€šå¯¹è±¡ä¸å‡½æ•°å¯¹è±¡</h2><p>JavaScript ä¸­ï¼Œä¸‡ç‰©çš†å¯¹è±¡ï¼ä½†å¯¹è±¡ä¹Ÿæ˜¯æœ‰åŒºåˆ«çš„ã€‚åˆ†ä¸º<strong>æ™®é€šå¯¹è±¡å’Œå‡½æ•°å¯¹è±¡</strong>ï¼ŒObject ã€Function æ˜¯ JS è‡ªå¸¦çš„å‡½æ•°å¯¹è±¡ã€‚ä¸‹é¢ä¸¾ä¾‹è¯´æ˜</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> o1 = &#123;&#125;; <br><span class="hljs-keyword">var</span> o2 =<span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>();<br><span class="hljs-keyword">var</span> o3 = <span class="hljs-keyword">new</span> f1();<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f1</span>(<span class="hljs-params"></span>)</span>&#123;&#125;; <br><span class="hljs-keyword">var</span> f2 = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;&#125;;<br><span class="hljs-keyword">var</span> f3 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span>(<span class="hljs-string">&#x27;str&#x27;</span>,<span class="hljs-string">&#x27;console.log(str)&#x27;</span>);<br><br><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Object</span>); <span class="hljs-comment">//function </span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Function</span>); <span class="hljs-comment">//function  </span><br><br><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> f1); <span class="hljs-comment">//function </span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> f2); <span class="hljs-comment">//function </span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> f3); <span class="hljs-comment">//function   </span><br><br><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> o1); <span class="hljs-comment">//object </span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> o2); <span class="hljs-comment">//object </span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> o3); <span class="hljs-comment">//object</span><br></code></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ o1 o2 o3 ä¸ºæ™®é€šå¯¹è±¡ï¼Œf1 f2 f3 ä¸ºå‡½æ•°å¯¹è±¡ã€‚æ€ä¹ˆåŒºåˆ†ï¼Œå…¶å®å¾ˆç®€å•ï¼Œ<strong>å‡¡æ˜¯é€šè¿‡ new Function() åˆ›å»ºçš„å¯¹è±¡éƒ½æ˜¯å‡½æ•°å¯¹è±¡ï¼Œå…¶ä»–çš„éƒ½æ˜¯æ™®é€šå¯¹è±¡ã€‚f1,f2,å½’æ ¹ç»“åº•éƒ½æ˜¯é€šè¿‡ new Function()çš„æ–¹å¼è¿›è¡Œåˆ›å»ºçš„ã€‚Function Object ä¹Ÿéƒ½æ˜¯é€šè¿‡ New Function()åˆ›å»ºçš„ã€‚</strong></p><p>ä¸€å®šè¦åˆ†æ¸…æ¥šæ™®é€šå¯¹è±¡å’Œå‡½æ•°å¯¹è±¡ï¼Œä¸‹é¢æˆ‘ä»¬ä¼šå¸¸å¸¸ç”¨åˆ°å®ƒã€‚</p><h2 id="äºŒ-æ„é€ å‡½æ•°"><a href="#äºŒ-æ„é€ å‡½æ•°" class="headerlink" title="äºŒ. æ„é€ å‡½æ•°"></a>äºŒ. æ„é€ å‡½æ•°</h2><p>æˆ‘ä»¬å…ˆå¤ä¹ ä¸€ä¸‹æ„é€ å‡½æ•°çš„çŸ¥è¯†ï¼š</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person</span><span class="hljs-params">(name, age, job)</span> </span>&#123;<br> <span class="hljs-keyword">this</span>.name = name;<br> <span class="hljs-keyword">this</span>.age = age;<br> <span class="hljs-keyword">this</span>.job = job;<br> <span class="hljs-keyword">this</span>.sayName = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>&#123; alert(<span class="hljs-keyword">this</span>.name) &#125; <br>&#125;<br><span class="hljs-keyword">var</span> person1 = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">&#x27;Zaxlct&#x27;</span>, <span class="hljs-number">28</span>, <span class="hljs-string">&#x27;Software Engineer&#x27;</span>);<br><span class="hljs-keyword">var</span> person2 = <span class="hljs-keyword">new</span> Person(<span class="hljs-string">&#x27;Mick&#x27;</span>, <span class="hljs-number">23</span>, <span class="hljs-string">&#x27;Doctor&#x27;</span>);<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä¾‹å­ä¸­ person1 å’Œ person2 éƒ½æ˜¯ Person çš„<strong>å®ä¾‹</strong>ã€‚è¿™ä¸¤ä¸ªå®ä¾‹éƒ½æœ‰ä¸€ä¸ª <code>constructor</code> ï¼ˆæ„é€ å‡½æ•°ï¼‰å±æ€§ï¼Œè¯¥å±æ€§ï¼ˆæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼‰æŒ‡å‘ Personã€‚ å³ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">console.<span class="hljs-built_in">log</span>(person1.constructor <span class="hljs-operator">=</span><span class="hljs-operator">=</span> Person); <span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-literal">true</span><br>console.<span class="hljs-built_in">log</span>(person2.constructor <span class="hljs-operator">=</span><span class="hljs-operator">=</span> Person); <span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬è¦è®°ä½ä¸¤ä¸ªæ¦‚å¿µï¼ˆæ„é€ å‡½æ•°ï¼Œå®ä¾‹ï¼‰ï¼š<br><strong>person1 å’Œ person2 éƒ½æ˜¯ æ„é€ å‡½æ•° Person çš„å®ä¾‹</strong><br>ä¸€ä¸ªå…¬å¼ï¼š<br><strong>å®ä¾‹çš„æ„é€ å‡½æ•°å±æ€§ï¼ˆconstructorï¼‰æŒ‡å‘æ„é€ å‡½æ•°ã€‚</strong></p><h2 id="ä¸‰-åŸå‹å¯¹è±¡"><a href="#ä¸‰-åŸå‹å¯¹è±¡" class="headerlink" title="ä¸‰. åŸå‹å¯¹è±¡"></a>ä¸‰. åŸå‹å¯¹è±¡</h2><p>åœ¨ JavaScript ä¸­ï¼Œæ¯å½“å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼ˆå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼‰æ—¶å€™ï¼Œå¯¹è±¡ä¸­éƒ½ä¼šåŒ…å«ä¸€äº›é¢„å®šä¹‰çš„å±æ€§ã€‚å…¶ä¸­æ¯ä¸ª<strong>å‡½æ•°å¯¹è±¡</strong>éƒ½æœ‰ä¸€ä¸ª<code>prototype</code> å±æ€§ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚ï¼ˆå…ˆç”¨ä¸ç®¡ä»€ä¹ˆæ˜¯ <code>__proto__</code> ç¬¬äºŒèŠ‚çš„è¯¾ç¨‹ä¼šè¯¦ç»†çš„å‰–æï¼‰</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-keyword">function</span> <span class="hljs-constructor">Person()</span> &#123;&#125;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Person</span>.</span></span>prototype.name = &#x27;Zaxlct&#x27;;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Person</span>.</span></span>prototype.age  = <span class="hljs-number">28</span>;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Person</span>.</span></span>prototype.job  = &#x27;Software Engineer&#x27;;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Person</span>.</span></span>prototype.sayName = <span class="hljs-keyword">function</span><span class="hljs-literal">()</span> &#123;<br>  alert(this.name);<br>&#125;<br>  <br>var person1 = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Person()</span>;<br>person1.say<span class="hljs-constructor">Name()</span>; <span class="hljs-comment">// &#x27;Zaxlct&#x27;</span><br><br>var person2 = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Person()</span>;<br>person2.say<span class="hljs-constructor">Name()</span>; <span class="hljs-comment">// &#x27;Zaxlct&#x27;</span><br><br>console.log(person1.sayName<span class="hljs-operator"> == </span>person2.sayName); <span class="hljs-comment">//true</span><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å¾—åˆ°äº†æœ¬æ–‡ç¬¬ä¸€ä¸ªã€Œ<strong>å®šå¾‹</strong>ã€ï¼š</p><p>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ <strong>proto</strong> å±æ€§ï¼Œä½†åªæœ‰å‡½æ•°å¯¹è±¡æ‰æœ‰ prototype å±æ€§</p><p>é‚£ä»€ä¹ˆæ˜¯<strong>åŸå‹å¯¹è±¡</strong>å‘¢ï¼Ÿ<br>æˆ‘ä»¬æŠŠä¸Šé¢çš„ä¾‹å­æ”¹ä¸€æ”¹ä½ å°±ä¼šæ˜ç™½äº†ï¼š</p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-type">Person</span>.proto<span class="hljs-keyword">type</span> = &#123;<br>   name:  &#x27;<span class="hljs-type">Zaxlct</span>&#x27;,<br>   age: 28,<br>   job: &#x27;<span class="hljs-type">Software</span> <span class="hljs-type">Engineer</span>&#x27;,<br>   sayName: function() &#123;<br>     alert(this.name);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åŸå‹å¯¹è±¡ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼ˆåºŸè¯ = =!ï¼‰ã€‚ä»ç°åœ¨å¼€å§‹ä½ è¦ç‰¢ç‰¢è®°ä½åŸå‹å¯¹è±¡å°±æ˜¯ Person.prototype ï¼Œå¦‚æœä½ è¿˜æ˜¯å®³æ€•å®ƒï¼Œé‚£å°±æŠŠå®ƒæƒ³æƒ³æˆä¸€ä¸ªå­—æ¯ Aï¼š <code>var A = Person.prototype</code></p><p>åœ¨ä¸Šé¢æˆ‘ä»¬ç»™ A æ·»åŠ äº† å››ä¸ªå±æ€§ï¼šnameã€ageã€jobã€sayNameã€‚å…¶å®å®ƒè¿˜æœ‰ä¸€ä¸ªé»˜è®¤çš„å±æ€§ï¼š<code>constructor</code></p><blockquote><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„<strong>åŸå‹å¯¹è±¡</strong>éƒ½ä¼š<strong>è‡ªåŠ¨è·å¾—</strong>ä¸€ä¸ª <code>constructor</code>ï¼ˆæ„é€ å‡½æ•°ï¼‰å±æ€§ï¼Œè¿™ä¸ªå±æ€§ï¼ˆæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼‰æŒ‡å‘ <code>prototype</code> å±æ€§æ‰€åœ¨çš„å‡½æ•°ï¼ˆPersonï¼‰</p></blockquote><p>ä¸Šé¢è¿™å¥è¯æœ‰ç‚¹æ‹—å£ï¼Œæˆ‘ä»¬ã€Œç¿»è¯‘ã€ä¸€ä¸‹ï¼šA æœ‰ä¸€ä¸ªé»˜è®¤çš„ <code>constructor</code> å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ Personã€‚å³ï¼š</p><p><code>Person.prototype.constructor == Person</code></p><p>åœ¨ä¸Šé¢ç¬¬äºŒå°èŠ‚ã€Šæ„é€ å‡½æ•°ã€‹é‡Œï¼Œæˆ‘ä»¬çŸ¥é“<strong>å®ä¾‹çš„æ„é€ å‡½æ•°å±æ€§ï¼ˆconstructorï¼‰æŒ‡å‘æ„é€ å‡½æ•°</strong> ï¼š<code>person1.constructor == Person</code><br>è¿™ä¸¤ä¸ªã€Œå…¬å¼ã€å¥½åƒæœ‰ç‚¹è”ç³»ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">person1.constructor</span> == Person<br><span class="hljs-attr">Person.prototype.constructor</span> == Person<br></code></pre></td></tr></table></figure><p>person1 ä¸ºä»€ä¹ˆæœ‰ constructor å±æ€§ï¼Ÿé‚£æ˜¯å› ä¸º person1 æ˜¯ Person çš„å®ä¾‹ã€‚<br>é‚£ Person.prototype ä¸ºä»€ä¹ˆæœ‰ constructor å±æ€§ï¼Ÿï¼ŸåŒç†ï¼Œ Person.prototype ï¼ˆä½ æŠŠå®ƒæƒ³è±¡æˆ Aï¼‰ ä¹Ÿæ˜¯Person çš„å®ä¾‹ã€‚<br>ä¹Ÿå°±æ˜¯åœ¨ Person åˆ›å»ºçš„æ—¶å€™ï¼Œåˆ›å»ºäº†ä¸€ä¸ªå®ƒçš„å®ä¾‹å¯¹è±¡å¹¶èµ‹å€¼ç»™å®ƒçš„ prototypeï¼ŒåŸºæœ¬è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"> var A = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Person()</span>;<br> <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Person</span>.</span></span>prototype = A;<br><span class="hljs-comment">// æ³¨ï¼šä¸Šé¢ä¸¤è¡Œä»£ç åªæ˜¯å¸®åŠ©ç†è§£ï¼Œå¹¶ä¸èƒ½æ­£å¸¸è¿è¡Œ</span><br></code></pre></td></tr></table></figure><p><strong>ç»“è®ºï¼šåŸå‹å¯¹è±¡ï¼ˆPerson.prototypeï¼‰æ˜¯ æ„é€ å‡½æ•°ï¼ˆPersonï¼‰çš„ä¸€ä¸ªå®ä¾‹ã€‚</strong></p><p>åŸå‹å¯¹è±¡å…¶å®å°±æ˜¯æ™®é€šå¯¹è±¡ï¼ˆä½† Function.prototype é™¤å¤–ï¼Œå®ƒæ˜¯å‡½æ•°å¯¹è±¡ï¼Œä½†å®ƒå¾ˆç‰¹æ®Šï¼Œä»–æ²¡æœ‰prototypeå±æ€§ï¼ˆå‰é¢è¯´é“å‡½æ•°å¯¹è±¡éƒ½æœ‰prototypeå±æ€§ï¼‰ï¼‰ã€‚çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person</span>(<span class="hljs-params"></span>)</span>&#123;&#125;;<br><span class="hljs-built_in">console</span>.log(Person.prototype) <span class="hljs-comment">//Person&#123;&#125;</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> Person.prototype) <span class="hljs-comment">//Object</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Function</span>.prototype) <span class="hljs-comment">// Functionï¼Œè¿™ä¸ªç‰¹æ®Š</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Object</span>.prototype) <span class="hljs-comment">// Object</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Function</span>.prototype.prototype) <span class="hljs-comment">//undefined</span><br></code></pre></td></tr></table></figure><p><code>Function.prototype</code> ä¸ºä»€ä¹ˆæ˜¯å‡½æ•°å¯¹è±¡å‘¢ï¼Ÿ</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ada">var A = <span class="hljs-keyword">new</span> <span class="hljs-keyword">Function</span> <span class="hljs-title"></span>();<br><span class="hljs-keyword">Function</span>.prototype = A;<br></code></pre></td></tr></table></figure><p><strong>ä¸Šæ–‡æåˆ°å‡¡æ˜¯é€šè¿‡ new Function( ) äº§ç”Ÿçš„å¯¹è±¡éƒ½æ˜¯å‡½æ•°å¯¹è±¡ã€‚å› ä¸º A æ˜¯å‡½æ•°å¯¹è±¡ï¼Œæ‰€ä»¥<code>Function.prototype</code> æ˜¯å‡½æ•°å¯¹è±¡ã€‚</strong></p><p>é‚£åŸå‹å¯¹è±¡æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„å‘¢ï¼Ÿä¸»è¦ä½œç”¨æ˜¯ç”¨äºç»§æ‰¿ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">var</span> Person = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(name)</span></span>&#123;<br>  <span class="hljs-keyword">this</span>.name = name; <span class="hljs-comment">// tip: å½“å‡½æ•°æ‰§è¡Œæ—¶è¿™ä¸ª this æŒ‡çš„æ˜¯è°ï¼Ÿ</span><br>&#125;;<br>Person.prototype.getName = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.name;  <span class="hljs-comment">// tip: å½“å‡½æ•°æ‰§è¡Œæ—¶è¿™ä¸ª this æŒ‡çš„æ˜¯è°ï¼Ÿ</span><br>&#125;<br><span class="hljs-keyword">var</span> person1 = <span class="hljs-keyword">new</span> person(<span class="hljs-string">&#x27;Mick&#x27;</span>);<br>person1.getName(); <span class="hljs-comment">//Mick</span><br></code></pre></td></tr></table></figure><p>ä»è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œé€šè¿‡ç»™ Person.prototype è®¾ç½®äº†ä¸€ä¸ªå‡½æ•°å¯¹è±¡çš„å±æ€§ï¼Œé‚£æœ‰ Person çš„å®ä¾‹ï¼ˆperson1ï¼‰å‡ºæ¥çš„æ™®é€šå¯¹è±¡å°±ç»§æ‰¿äº†è¿™ä¸ªå±æ€§ã€‚å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„ç»§æ‰¿ï¼Œå°±è¦è®²åˆ°ä¸‹é¢çš„åŸå‹é“¾äº†ã€‚</p><p>å°é—®é¢˜ï¼Œä¸Šé¢ä¸¤ä¸ª this éƒ½æŒ‡å‘è°ï¼Ÿ</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">var</span> person1 = <span class="hljs-keyword">new</span> <span class="hljs-type">person</span>(<span class="hljs-string">&#x27;Mick&#x27;</span>);<br>person1.name = <span class="hljs-string">&#x27;Mick&#x27;</span>; <span class="hljs-comment">// æ­¤æ—¶ person1 å·²ç»æœ‰ name è¿™ä¸ªå±æ€§äº†</span><br>person1.getName(); <span class="hljs-comment">//Mick </span><br></code></pre></td></tr></table></figure><p>æ•…ä¸¤æ¬¡ this åœ¨å‡½æ•°æ‰§è¡Œæ—¶éƒ½æŒ‡å‘ person1ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>js</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>äº†è§£React HooksåŠå…¶å¸¸ç”¨çš„å‡ ä¸ªé’©å­å‡½æ•°</title>
    <link href="/2021/11/19/React%20Hooks/"/>
    <url>/2021/11/19/React%20Hooks/</url>
    
    <content type="html"><![CDATA[<h1 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h1><p>React Hooks æ˜¯ React å›¢é˜Ÿåœ¨ä¸¤å¹´å‰çš„ 16.8 ç‰ˆæœ¬æ¨å‡ºçš„ä¸€å¥—å…¨æ–°çš„æœºåˆ¶ã€‚ä½œä¸ºæœ€ä¸»æµçš„å‰ç«¯æ¡†æ¶ï¼ŒReact çš„ API ååˆ†ç¨³å®šï¼Œè¿™æ¬¡æ›´æ–°çš„å‘å¸ƒï¼Œè®©ä¼—å¤šææƒ§æ–°è½®å­çš„å‰ç«¯å¤§ä½¬ä»¬è™èº¯ä¸€éœ‡ï¼Œæ¯•ç«Ÿæ¯ä¸€æ¬¡æ›´æ–°åˆæ˜¯é«˜æˆæœ¬çš„å­¦ä¹ ï¼Œè¿™ç©æ„åˆ°åº•å¥½ä½¿ä¹ˆï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯å¥½ç”¨çš„ï¼Œå¯¹äº React çš„å¼€å‘è€…è€Œè¨€ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªé€‰æ‹©ã€‚è¿‡å»çš„å¼€å‘æ–¹å¼æ˜¯åŸºäºClassç»„ä»¶çš„ï¼Œè€Œhooksæ˜¯åŸºäºå‡½æ•°ç»„ä»¶ï¼Œè¿™æ„å‘³ç€<strong>è¿™ä¸¤ç§å¼€å‘æ–¹å¼å¯ä»¥å¹¶å­˜</strong>ï¼Œè€Œæ–°çš„ä»£ç å¯ä»¥æ ¹æ®å…·ä½“æƒ…å†µé‡‡ç”¨ Hooks çš„æ–¹å¼æ¥å®ç°å°±è¡Œäº†ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦å°±æ¥ä»‹ç»ä¸€ä¸‹<strong>Hooks çš„ä¼˜åŠ¿</strong> å’Œ <strong>å¸¸ç”¨çš„å‡ ä¸ªé’©å­å‡½æ•°</strong>ã€‚</p><h1 id="Hooks-çš„ä¼˜åŠ¿"><a href="#Hooks-çš„ä¼˜åŠ¿" class="headerlink" title="Hooks çš„ä¼˜åŠ¿"></a>Hooks çš„ä¼˜åŠ¿</h1><h2 id="1-ç±»ç»„ä»¶çš„ä¸è¶³"><a href="#1-ç±»ç»„ä»¶çš„ä¸è¶³" class="headerlink" title="1. ç±»ç»„ä»¶çš„ä¸è¶³"></a>1. ç±»ç»„ä»¶çš„ä¸è¶³</h2><ul><li><strong>ä»£ç é‡å¤š</strong>ï¼š</li></ul><p>ç›¸è¾ƒäºå‡½æ•°ç»„ä»¶çš„å†™æ³•ï¼Œä½¿ç”¨ç±»ç»„ä»¶ä»£ç é‡è¦ç•¥å¤šä¸€ç‚¹ï¼Œè¿™ä¸ªæ˜¯æœ€ç›´è§‚çš„æ„Ÿå—ã€‚</p><ul><li><strong>thisæŒ‡å‘</strong>ï¼š</li></ul><p>ç±»ç»„ä»¶ä¸­æ€»æ˜¯éœ€è¦è€ƒè™‘thisçš„æŒ‡å‘é—®é¢˜ï¼Œè€Œå‡½æ•°ç»„ä»¶åˆ™å¯ä»¥å¿½ç•¥ã€‚</p><ul><li><strong>è¶‹å‘å¤æ‚éš¾ä»¥ç»´æŠ¤</strong>ï¼š</li></ul><p>åœ¨é«˜ç‰ˆæœ¬çš„Reactä¸­ï¼Œåˆæ›´æ–°äº†ä¸€äº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå› ä¸ºè¿™äº›å‡½æ•°äº’ç›¸è§£è€¦ï¼Œå¾ˆå®¹æ˜“é€ æˆåˆ†æ•£ä¸é›†ä¸­çš„å†™æ³•ï¼Œæ¼æ‰å…³é”®é€»è¾‘å’Œå¤šäº†å†—ä½™é€»è¾‘ï¼Œå¯¼è‡´åæœŸdebugå›°éš¾ã€‚ç›¸åï¼Œhookså¯ä»¥æŠŠå…³é”®é€»è¾‘éƒ½æ”¾åœ¨ä¸€èµ·ï¼Œä¸æ˜¾å¾—é‚£ä¹ˆå‰²è£‚ï¼Œè°ƒè¯•èµ·æ¥ä¹Ÿæ˜“æ‡‚ä¸€ç‚¹ã€‚</p><ul><li><strong>çŠ¶æ€é€»è¾‘éš¾å¤ç”¨</strong>ï¼š</li></ul><p> åœ¨ç»„ä»¶ä¹‹é—´å¤ç”¨çŠ¶æ€é€»è¾‘å¾ˆéš¾ï¼Œå¯èƒ½è¦ç”¨åˆ° <strong>render props</strong> ï¼ˆæ¸²æŸ“å±æ€§ï¼‰æˆ–è€… <strong>HOC</strong>ï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰ï¼Œä½†æ— è®ºæ˜¯æ¸²æŸ“å±æ€§ï¼Œè¿˜æ˜¯é«˜é˜¶ç»„ä»¶ï¼Œéƒ½ä¼šåœ¨åŸå…ˆçš„ç»„ä»¶å¤–åŒ…è£¹ä¸€å±‚çˆ¶å®¹å™¨ï¼ˆä¸€èˆ¬éƒ½æ˜¯ div å…ƒç´ ï¼‰ï¼Œå¯¼è‡´å±‚çº§å†—ä½™ã€‚</p><h2 id="2-Hookså¸¦æ¥çš„å¥½å¤„"><a href="#2-Hookså¸¦æ¥çš„å¥½å¤„" class="headerlink" title="2. Hookså¸¦æ¥çš„å¥½å¤„"></a>2. Hookså¸¦æ¥çš„å¥½å¤„</h2><ul><li>é€»è¾‘å¤ç”¨</li></ul><p>åœ¨ç»„ä»¶ä¹‹å‰å¤ç”¨çŠ¶æ€é€»è¾‘ï¼Œå¾€å¾€éœ€è¦å€ŸåŠ©é«˜é˜¶ç»„ä»¶ç­‰å¤æ‚çš„è®¾è®¡æ¨¡å¼ï¼Œè¿™äº›é«˜çº§ç»„ä»¶ä¼šäº§ç”Ÿå†—ä½™çš„ç»„ä»¶èŠ‚ç‚¹ï¼Œè®©è°ƒè¯•å˜å¾—å›°éš¾ï¼Œä¸‹é¢ç”¨ä¸€ä¸ªdemoæ¥å¯¹æ¯”ä¸€ä¸‹ä¸¤ç§å®ç°æ–¹å¼ã€‚</p><blockquote><p>Class</p></blockquote><p>åœ¨classç»„ä»¶åœºæ™¯ä¸‹ï¼Œå®šä¹‰äº†ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œè´Ÿè´£ç›‘å¬çª—å£å¤§å°å˜åŒ–ï¼Œå¹¶å°†å˜åŒ–åçš„å€¼ä½œä¸º props ä¼ ç»™ä¸‹ä¸€ä¸ªç»„ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> useWindowSize = <span class="hljs-function"><span class="hljs-params">Component</span> =&gt;</span> &#123;<br>  <span class="hljs-comment">// äº§ç”Ÿä¸€ä¸ªé«˜é˜¶ç»„ä»¶ HOCï¼ŒåªåŒ…å«ç›‘å¬çª—å£å¤§å°çš„é€»è¾‘</span><br>  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HOC</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">PureComponent</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">props</span>)</span> &#123;<br>      <span class="hljs-built_in">super</span>(props);<br>      <span class="hljs-built_in">this</span>.state = &#123;<br>        <span class="hljs-attr">size</span>: <span class="hljs-built_in">this</span>.getSize()<br>      &#125;;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-title">componentDidMount</span>(<span class="hljs-params"></span>)</span> &#123;<br>      <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&quot;resize&quot;</span>, <span class="hljs-built_in">this</span>.handleResize); <br>    &#125;<br>    <span class="hljs-function"><span class="hljs-title">componentWillUnmount</span>(<span class="hljs-params"></span>)</span> &#123;<br>      <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">&quot;resize&quot;</span>, <span class="hljs-built_in">this</span>.handleResize);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-title">getSize</span>(<span class="hljs-params"></span>)</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.innerWidth &gt; <span class="hljs-number">1000</span> ? <span class="hljs-string">&quot;large&quot;</span> ï¼š<span class="hljs-string">&quot;small&quot;</span>;<br>    &#125;<br>    handleResize = <span class="hljs-function">()=&gt;</span> &#123;<br>      <span class="hljs-keyword">const</span> currentSize = <span class="hljs-built_in">this</span>.getSize();<br>      <span class="hljs-built_in">this</span>.setState(&#123;<br>        <span class="hljs-attr">size</span>: <span class="hljs-built_in">this</span>.getSize()<br>      &#125;);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span> &#123;<br>      <span class="hljs-comment">// å°†çª—å£å¤§å°ä¼ é€’ç»™çœŸæ­£çš„ä¸šåŠ¡é€»è¾‘ç»„ä»¶</span><br>      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&#123;this.state.size&#125;</span> /&gt;</span></span>;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> HOC;<br>&#125;;<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å¯ä»¥åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸­å¯ä»¥è°ƒç”¨ useWindowSize è¿™æ ·çš„å‡½æ•°æ¥äº§ç”Ÿä¸€ä¸ªæ–°ç»„ä»¶ï¼Œå¹¶è‡ªå¸¦ size å±æ€§ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span></span>&#123;<br>  render() &#123;<br>    const &#123; size &#125; = <span class="hljs-keyword">this</span>.props;<br>    <span class="hljs-keyword">if</span> (size === <span class="hljs-string">&quot;small&quot;</span>) <span class="hljs-keyword">return</span> &lt;<span class="hljs-type">SmallComponent</span> /&gt;;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> &lt;<span class="hljs-type">LargeComponent</span> /&gt;;<br>  &#125;<br>&#125;<br><span class="hljs-comment">// ä½¿ç”¨ useWindowSize äº§ç”Ÿé«˜é˜¶ç»„ä»¶ï¼Œç”¨äºäº§ç”Ÿ size å±æ€§ä¼ é€’ç»™çœŸæ­£çš„ä¸šåŠ¡ç»„ä»¶</span><br>export <span class="hljs-keyword">default</span> useWindowSize(<span class="hljs-type">MyComponent</span>); <br></code></pre></td></tr></table></figure><p>ä¸‹é¢çœ‹ä¸‹Hooksçš„å®ç°æ–¹å¼</p><blockquote><p>Hooks</p></blockquote><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">const getSize = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.innerWidth &gt; <span class="hljs-number">1000</span> ? <span class="hljs-string">&quot;large&quot;</span> : <span class="hljs-string">&quot;small&quot;</span>;<br>&#125;<br>const useWindowSize = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>  const [size, setSize] = useState(getSize());<br>  useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>  const handler = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>      setSize(getSize())<br>    &#125;;<br>    <span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&#x27;resize&#x27;</span>, handler);<br>    <span class="hljs-keyword">return</span> () =&gt; &#123;<br>      <span class="hljs-built_in">window</span>.removeEventListener(<span class="hljs-string">&#x27;resize&#x27;</span>, handler);<br>    &#125;;<br>  &#125;, []);<br>  <br>  <span class="hljs-keyword">return</span> size;<br>&#125;;<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> Demo = <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> size = useWindowSize();<br>  <span class="hljs-keyword">if</span> (size === <span class="hljs-string">&quot;small&quot;</span>) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">SmallComponent</span> /&gt;</span></span>;<br>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LargeComponent</span> /&gt;</span></span>;<br>&#125;;<br></code></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„ä¾‹å­ä¸­é€šè¿‡ Hooks çš„æ–¹å¼å¯¹çª—å£å¤§å°è¿›è¡Œäº†å°è£…ï¼Œä»è€Œå°†å…¶å˜æˆä¸€ä¸ªå¯ç»‘å®šçš„æ•°æ®æºã€‚è¿™æ ·å½“çª—å£å¤§å°å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä½¿ç”¨è¿™ä¸ª Hook çš„ç»„ä»¶å°±éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚è€Œä¸”ä»£ç ä¹Ÿæ›´åŠ ç®€æ´å’Œç›´è§‚ï¼Œä¸ä¼šäº§ç”Ÿé¢å¤–çš„ç»„ä»¶èŠ‚ç‚¹ï¼Œä¹Ÿä¸æ˜¾å¾—é‚£ä¹ˆå†—ä½™äº†ã€‚</p><ul><li>ä¸šåŠ¡ä»£ç æ›´åŠ èšåˆ</li></ul><p>ä¸‹é¢ä¸¾ä¸€ä¸ªæœ€å¸¸è§çš„è®¡æ—¶å™¨çš„ä¾‹å­ã€‚</p><blockquote><p>class</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span><br><span class="hljs-function"><span class="hljs-title">componentDidMount</span>(<span class="hljs-params"></span>)</span> &#123;<br>    timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-comment">// ...</span><br>    &#125;, <span class="hljs-number">1000</span>)<br>&#125;<br><span class="hljs-comment">// ...</span><br><span class="hljs-function"><span class="hljs-title">componentWillUnmount</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-keyword">if</span> (timer) <span class="hljs-built_in">clearInterval</span>(timer)<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>Hooks</p></blockquote><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs arcade">useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>    let timer = setInterval(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>        <span class="hljs-comment">// ...</span><br>    &#125;, <span class="hljs-number">1000</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>        <span class="hljs-keyword">if</span> (timer) clearInterval(timer)<br>    &#125;<br>&#125;, [<span class="hljs-comment">//...])</span><br></code></pre></td></tr></table></figure><p>Hooksçš„å®ç°æ–¹å¼èƒ½è®©ä»£ç æ›´åŠ é›†ä¸­ï¼Œé€»è¾‘ä¹Ÿæ›´æ¸…æ™°ã€‚</p><ul><li>å†™æ³•ç®€æ´</li></ul><p>è¿™ä¸ªå°±ä¸ä¸¾ä¾‹äº†ï¼Œå¯ä»¥ä»å­—é¢æ„æ€ç†è§£ï¼Œä½¿ç”¨å‡½æ•°ç»„ä»¶ç¡®å®èƒ½å°‘äº›å¾ˆå¤šä»£ç ï¼Œæ‡‚å¾—éƒ½æ‡‚ï¼Œå˜»å˜»~</p><h1 id="å‡ ä¸ªå†…ç½®Hooksçš„ä½œç”¨ä»¥åŠä½¿ç”¨æ€è€ƒ"><a href="#å‡ ä¸ªå†…ç½®Hooksçš„ä½œç”¨ä»¥åŠä½¿ç”¨æ€è€ƒ" class="headerlink" title="å‡ ä¸ªå†…ç½®Hooksçš„ä½œç”¨ä»¥åŠä½¿ç”¨æ€è€ƒ"></a>å‡ ä¸ªå†…ç½®Hooksçš„ä½œç”¨ä»¥åŠä½¿ç”¨æ€è€ƒ</h1><h2 id="useStateï¼šè®©å‡½æ•°ç»„ä»¶å…·æœ‰ç»´æŒçŠ¶æ€çš„èƒ½åŠ›"><a href="#useStateï¼šè®©å‡½æ•°ç»„ä»¶å…·æœ‰ç»´æŒçŠ¶æ€çš„èƒ½åŠ›" class="headerlink" title="useStateï¼šè®©å‡½æ•°ç»„ä»¶å…·æœ‰ç»´æŒçŠ¶æ€çš„èƒ½åŠ›"></a>useStateï¼šè®©å‡½æ•°ç»„ä»¶å…·æœ‰ç»´æŒçŠ¶æ€çš„èƒ½åŠ›</h2><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">const</span> [<span class="hljs-keyword">count</span>, setCount] = useState(<span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure><h3 id="ä¼˜ç‚¹ï¼š"><a href="#ä¼˜ç‚¹ï¼š" class="headerlink" title="ä¼˜ç‚¹ï¼š"></a>ä¼˜ç‚¹ï¼š</h3><p><strong>è®©å‡½æ•°ç»„ä»¶å…·æœ‰ç»´æŒçŠ¶æ€çš„èƒ½åŠ›</strong>ï¼Œå³ï¼šåœ¨ä¸€ä¸ªå‡½æ•°ç»„ä»¶çš„å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ï¼Œè¿™ä¸ª state æ˜¯<strong>å…±äº«</strong>çš„ã€‚ä¾¿äºç»´æŠ¤çŠ¶æ€ã€‚</p><h3 id="ç¼ºç‚¹ï¼š"><a href="#ç¼ºç‚¹ï¼š" class="headerlink" title="ç¼ºç‚¹ï¼š"></a>ç¼ºç‚¹ï¼š</h3><p><strong>ä¸€æ—¦ç»„ä»¶æœ‰è‡ªå·±çŠ¶æ€ï¼Œæ„å‘³ç€ç»„ä»¶å¦‚æœé‡æ–°åˆ›å»ºï¼Œå°±éœ€è¦æœ‰æ¢å¤çŠ¶æ€çš„è¿‡ç¨‹ï¼Œè¿™é€šå¸¸ä¼šè®©ç»„ä»¶å˜å¾—æ›´å¤æ‚ã€‚</strong></p><h3 id="ç”¨æ³•ï¼š"><a href="#ç”¨æ³•ï¼š" class="headerlink" title="ç”¨æ³•ï¼š"></a>ç”¨æ³•ï¼š</h3><ol><li>useState(initialState) çš„å‚æ•° initialState æ˜¯åˆ›å»º state çš„åˆå§‹å€¼ã€‚</li></ol><blockquote><p>å®ƒå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œæ¯”å¦‚æ•°å­—ã€å¯¹è±¡ã€æ•°ç»„ç­‰ç­‰ã€‚</p></blockquote><ol start="2"><li>useState() çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæœ‰ç€ä¸¤ä¸ªå…ƒç´ çš„æ•°ç»„ã€‚ç¬¬ä¸€ä¸ªæ•°ç»„å…ƒç´ ç”¨æ¥è¯»å– state çš„å€¼ï¼Œç¬¬äºŒä¸ªåˆ™æ˜¯ç”¨æ¥è®¾ç½®è¿™ä¸ª state çš„å€¼ã€‚</li></ol><blockquote><p>åœ¨è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œstate çš„å˜é‡ï¼ˆä¾‹å­ä¸­çš„ countï¼‰æ˜¯åªè¯»çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»é€šè¿‡ç¬¬äºŒä¸ªæ•°ç»„å…ƒç´  setCount æ¥è®¾ç½®å®ƒçš„å€¼ã€‚</p></blockquote><ol start="3"><li>å¦‚æœè¦åˆ›å»ºå¤šä¸ª <strong>state</strong>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å¤šæ¬¡è°ƒç”¨ useStateã€‚</li></ol><h3 id="ä»€ä¹ˆæ ·çš„å€¼åº”è¯¥ä¿å­˜åœ¨-state-ä¸­ï¼Ÿ"><a href="#ä»€ä¹ˆæ ·çš„å€¼åº”è¯¥ä¿å­˜åœ¨-state-ä¸­ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ ·çš„å€¼åº”è¯¥ä¿å­˜åœ¨ state ä¸­ï¼Ÿ"></a>ä»€ä¹ˆæ ·çš„å€¼åº”è¯¥ä¿å­˜åœ¨ state ä¸­ï¼Ÿ</h3><p>é€šå¸¸æ¥è¯´ï¼Œæˆ‘ä»¬è¦éµå¾ªçš„ä¸€ä¸ªåŸåˆ™å°±æ˜¯ï¼š<strong>state ä¸­ä¸è¦ä¿å­˜å¯ä»¥é€šè¿‡è®¡ç®—å¾—åˆ°çš„å€¼</strong>ã€‚</p><ul><li><p>ä» props ä¼ é€’è¿‡æ¥çš„å€¼ã€‚æœ‰æ—¶å€™ props ä¼ é€’è¿‡æ¥çš„å€¼æ— æ³•ç›´æ¥ä½¿ç”¨ï¼Œè€Œæ˜¯è¦é€šè¿‡ä¸€å®šçš„è®¡ç®—åå†åœ¨ UI ä¸Šå±•ç¤ºï¼Œæ¯”å¦‚è¯´æ’åºã€‚é‚£ä¹ˆæˆ‘ä»¬è¦åšçš„å°±æ˜¯æ¯æ¬¡ç”¨çš„æ—¶å€™ï¼Œéƒ½é‡æ–°æ’åºä¸€ä¸‹ï¼Œæˆ–è€…åˆ©ç”¨æŸäº› cache æœºåˆ¶ï¼Œè€Œä¸æ˜¯å°†ç»“æœç›´æ¥æ”¾åˆ° state é‡Œã€‚</p></li><li><p>ä» URL ä¸­è¯»åˆ°çš„å€¼ã€‚æ¯”å¦‚æœ‰æ—¶éœ€è¦è¯»å– URL ä¸­çš„å‚æ•°ï¼ŒæŠŠå®ƒä½œä¸ºç»„ä»¶çš„ä¸€éƒ¨åˆ†çŠ¶æ€ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨æ¯æ¬¡éœ€è¦ç”¨çš„æ—¶å€™ä» URL ä¸­è¯»å–ï¼Œè€Œä¸æ˜¯è¯»å‡ºæ¥ç›´æ¥æ”¾åˆ° state é‡Œã€‚</p></li><li><p>ä» cookieã€localStorage ä¸­è¯»å–çš„å€¼ã€‚é€šå¸¸æ¥è¯´ï¼Œä¹Ÿæ˜¯æ¯æ¬¡è¦ç”¨çš„æ—¶å€™ç›´æ¥å»è¯»å–ï¼Œè€Œä¸æ˜¯è¯»å‡ºæ¥åæ”¾åˆ° state é‡Œã€‚</p></li></ul><h2 id="useEffectï¼šæ‰§è¡Œå‰¯ä½œç”¨"><a href="#useEffectï¼šæ‰§è¡Œå‰¯ä½œç”¨" class="headerlink" title="useEffectï¼šæ‰§è¡Œå‰¯ä½œç”¨"></a>useEffectï¼šæ‰§è¡Œå‰¯ä½œç”¨</h2><blockquote><p>useEffect(fn, deps);</p></blockquote><p>useEffect ï¼Œé¡¾åæ€ä¹‰ï¼Œç”¨äºæ‰§è¡Œä¸€æ®µå‰¯ä½œç”¨ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯å‰¯ä½œç”¨ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å‰¯ä½œç”¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å‰¯ä½œç”¨ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å‰¯ä½œç”¨ï¼Ÿ</h3><p>é€šå¸¸æ¥è¯´ï¼Œå‰¯ä½œç”¨æ˜¯æŒ‡ä¸€æ®µå’Œå½“å‰æ‰§è¡Œç»“æœæ— å…³çš„ä»£ç ã€‚æ¯”å¦‚è¯´è¦ä¿®æ”¹å‡½æ•°å¤–éƒ¨çš„æŸä¸ªå˜é‡ï¼Œè¦å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œç­‰ç­‰ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å‡½æ•°ç»„ä»¶çš„å½“æ¬¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œ<strong>useEffect ä¸­ä»£ç çš„æ‰§è¡Œæ˜¯ä¸å½±å“æ¸²æŸ“å‡ºæ¥çš„ UI</strong>çš„ã€‚</p><p>å¯¹åº”åˆ° Class ç»„ä»¶ï¼Œé‚£ä¹ˆ useEffect å°±æ¶µç›–äº† ComponentDidMountã€componentDidUpdate å’Œ componentWillUnmount ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ä¸è¿‡å¦‚æœä½ ä¹ æƒ¯äº†ä½¿ç”¨ Class ç»„ä»¶ï¼Œé‚£åƒä¸‡ä¸è¦æŒ‰ç…§æŠŠ useEffect å¯¹åº”åˆ°æŸä¸ªæˆ–è€…æŸå‡ ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ã€‚ä½ åªè¦è®°ä½ï¼ŒuseEffect æ˜¯æ¯æ¬¡ç»„ä»¶ render å®Œååˆ¤æ–­ä¾èµ–å¹¶æ‰§è¡Œå°±å¯ä»¥äº†ã€‚</p><p>useEffect è¿˜æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„ç”¨æ³•ï¼šæ²¡æœ‰ä¾èµ–é¡¹ï¼Œä»¥åŠä¾èµ–é¡¹ä½œä¸ºç©ºæ•°ç»„ã€‚æˆ‘ä»¬æ¥å…·ä½“åˆ†æä¸‹ã€‚</p><ol><li>æ²¡æœ‰ä¾èµ–é¡¹ï¼Œåˆ™æ¯æ¬¡ render åéƒ½ä¼šé‡æ–°æ‰§è¡Œã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>  <span class="hljs-regexp">//</span> æ¯æ¬¡ render å®Œä¸€å®šæ‰§è¡Œ<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;æ¸²æŸ“...........&#x27;</span>);<br>&#125;);<br></code></pre></td></tr></table></figure><ol start="2"><li>ç©ºæ•°ç»„ä½œä¸ºä¾èµ–é¡¹ï¼Œåˆ™åªåœ¨é¦–æ¬¡æ‰§è¡Œæ—¶è§¦å‘ï¼Œå¯¹åº”åˆ° Class ç»„ä»¶å°±æ˜¯ componentDidMountã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>  <span class="hljs-regexp">//</span> ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œï¼Œç­‰ä»·äº <span class="hljs-class"><span class="hljs-keyword">class</span> ç»„ä»¶ä¸­çš„ <span class="hljs-title">componentDidMount</span></span><br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;did mount........&#x27;</span>);<br>&#125;, []);<br></code></pre></td></tr></table></figure><h3 id="å°ç»“ç”¨æ³•"><a href="#å°ç»“ç”¨æ³•" class="headerlink" title="å°ç»“ç”¨æ³•:"></a>å°ç»“ç”¨æ³•:</h3><p>æ€»ç»“ä¸€ä¸‹ï¼ŒuseEffect è®©æˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¸‹é¢å››ç§æ—¶æœºå»æ‰§è¡Œä¸€ä¸ªå›è°ƒå‡½æ•°äº§ç”Ÿå‰¯ä½œç”¨ï¼š</p><ol><li>æ¯æ¬¡ render åæ‰§è¡Œï¼šä¸æä¾›ç¬¬äºŒä¸ªä¾èµ–é¡¹å‚æ•°ã€‚</li></ol><blockquote><p>æ¯”å¦‚useEffect(() =&gt; {})ã€‚</p></blockquote><ol start="2"><li>ä»…ç¬¬ä¸€æ¬¡ render åæ‰§è¡Œï¼šæä¾›ä¸€ä¸ªç©ºæ•°ç»„ä½œä¸ºä¾èµ–é¡¹ã€‚</li></ol><blockquote><p>æ¯”å¦‚useEffect(() =&gt; {}, [])ã€‚</p></blockquote><ol start="3"><li>ç¬¬ä¸€æ¬¡ä»¥åŠä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–åæ‰§è¡Œï¼šæä¾›ä¾èµ–é¡¹æ•°ç»„ã€‚</li></ol><blockquote><p>æ¯”å¦‚useEffect(() =&gt; {}, [deps])ã€‚</p></blockquote><ol start="4"><li>ç»„ä»¶ unmount åæ‰§è¡Œï¼šè¿”å›ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚</li></ol><blockquote><p>æ¯”å¦‚useEffect() =&gt; { return () =&gt; {} }, [])ã€‚</p></blockquote><h2 id="useCallbackï¼šç¼“å­˜å›è°ƒå‡½æ•°"><a href="#useCallbackï¼šç¼“å­˜å›è°ƒå‡½æ•°" class="headerlink" title="useCallbackï¼šç¼“å­˜å›è°ƒå‡½æ•°"></a>useCallbackï¼šç¼“å­˜å›è°ƒå‡½æ•°</h2><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">use<span class="hljs-constructor">Callback(<span class="hljs-params">fn</span>, <span class="hljs-params">deps</span>)</span><br></code></pre></td></tr></table></figure><h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨useCallback"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨useCallback" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨useCallback?"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨useCallback?</h3><p>åœ¨ React å‡½æ•°ç»„ä»¶ä¸­ï¼Œ<strong>æ¯ä¸€æ¬¡ UI çš„å˜åŒ–ï¼Œéƒ½æ˜¯é€šè¿‡é‡æ–°æ‰§è¡Œæ•´ä¸ªå‡½æ•°æ¥å®Œæˆçš„</strong>ï¼Œè¿™å’Œä¼ ç»Ÿçš„ Class ç»„ä»¶æœ‰å¾ˆå¤§åŒºåˆ«ï¼šå‡½æ•°ç»„ä»¶ä¸­å¹¶æ²¡æœ‰ä¸€ä¸ªç›´æ¥çš„æ–¹å¼åœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ç»´æŒä¸€ä¸ªçŠ¶æ€ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Counter</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> [count, setCount] = useState(<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">const</span> handleIncrement = <span class="hljs-function">() =&gt;</span> setCount(count+<span class="hljs-number">1</span>);<br>  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;handleIncrement&#125;</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>&#125;<br></code></pre></td></tr></table></figure><p>æ€è€ƒä¸‹è¿™ä¸ªè¿‡ç¨‹ã€‚<strong>æ¯æ¬¡ç»„ä»¶çŠ¶æ€å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå‡½æ•°ç»„ä»¶å®é™…ä¸Šéƒ½ä¼šé‡æ–°æ‰§è¡Œä¸€é</strong>ã€‚åœ¨æ¯æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œå®é™…ä¸Šéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„äº‹ä»¶å¤„ç†å‡½æ•° <strong>handleIncrement</strong>ã€‚</p><p>è¿™ä¹Ÿæ„å‘³ç€ï¼Œå³ä½¿ count æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä½†æ˜¯å‡½æ•°ç»„ä»¶å› ä¸ºå…¶å®ƒçŠ¶æ€å‘ç”Ÿå˜åŒ–è€Œé‡æ–°æ¸²æŸ“æ—¶ï¼ˆå‡½æ•°ç»„ä»¶é‡æ–°è¢«æ‰§è¡Œï¼‰ï¼Œè¿™ç§å†™æ³•ä¹Ÿä¼šæ¯æ¬¡åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè™½ç„¶ä¸å½±å“ç»“æœçš„æ­£ç¡®æ€§ï¼Œä½†å…¶å®æ˜¯æ²¡å¿…è¦çš„ã€‚å› ä¸ºè¿™æ ·åšä¸ä»…å¢åŠ äº†ç³»ç»Ÿçš„å¼€é”€ï¼Œæ›´é‡è¦çš„æ˜¯ï¼š<strong>æ¯æ¬¡åˆ›å»ºæ–°å‡½æ•°çš„æ–¹å¼ä¼šè®©æ¥æ”¶äº‹ä»¶å¤„ç†å‡½æ•°çš„ç»„ä»¶ï¼Œéœ€è¦é‡æ–°æ¸²æŸ“</strong>ã€‚</p><p>æ¯”å¦‚è¿™ä¸ªä¾‹å­ä¸­çš„ button ç»„ä»¶ï¼Œæ¥æ”¶äº† handleIncrement ï¼Œå¹¶ä½œä¸ºä¸€ä¸ªå±æ€§ã€‚å¦‚æœæ¯æ¬¡éƒ½æ˜¯ä¸€ä¸ªæ–°çš„ï¼Œé‚£ä¹ˆè¿™ä¸ª React å°±ä¼šè®¤ä¸ºè¿™ä¸ªç»„ä»¶çš„ props å‘ç”Ÿäº†å˜åŒ–ï¼Œä»è€Œå¿…é¡»é‡æ–°æ¸²æŸ“ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åšåˆ°çš„æ˜¯ï¼š<strong>åªæœ‰å½“ count å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬æ‰éœ€è¦é‡æ–°å®šä¸€ä¸ªå›è°ƒå‡½æ•°</strong>ã€‚è€Œè¿™æ­£æ˜¯ useCallback è¿™ä¸ª Hook çš„ä½œç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> React, &#123; useState, useCallback &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Counter</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> [count, setCount] = useState(<span class="hljs-number">0</span>);<br>  <span class="hljs-keyword">const</span> handleIncrement = useCallback(<br>    <span class="hljs-function">() =&gt;</span> setCount(count + <span class="hljs-number">1</span>),<br>    [count], <span class="hljs-comment">// åªæœ‰å½“ count å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°åˆ›å»ºå›è°ƒå‡½æ•°</span><br>  );<br>  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;handleIncrement&#125;</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="useMemoï¼šç¼“å­˜è®¡ç®—çš„ç»“æœ"><a href="#useMemoï¼šç¼“å­˜è®¡ç®—çš„ç»“æœ" class="headerlink" title="useMemoï¼šç¼“å­˜è®¡ç®—çš„ç»“æœ"></a>useMemoï¼šç¼“å­˜è®¡ç®—çš„ç»“æœ</h2><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">use<span class="hljs-constructor">Memo(<span class="hljs-params">fn</span>, <span class="hljs-params">deps</span>)</span>;<br></code></pre></td></tr></table></figure><blockquote><p>useCallback(fn, deps) ç›¸å½“äº useMemo(() =&gt; fn, deps)ã€‚</p></blockquote><p>è¿™é‡Œçš„ fn æ˜¯äº§ç”Ÿæ‰€éœ€æ•°æ®çš„ä¸€ä¸ª<strong>è®¡ç®—å‡½æ•°</strong>ã€‚é€šå¸¸æ¥è¯´ï¼Œ<strong>fn ä¼šä½¿ç”¨ deps ä¸­å£°æ˜çš„ä¸€äº›å˜é‡æ¥ç”Ÿæˆä¸€ä¸ªç»“æœï¼Œç”¨æ¥æ¸²æŸ“å‡ºæœ€ç»ˆçš„ UI</strong>ã€‚</p><p>è¿™ä¸ªåœºæ™¯åº”è¯¥å¾ˆå®¹æ˜“ç†è§£ï¼šå¦‚æœæŸä¸ª<strong>æ•°æ®</strong>æ˜¯é€šè¿‡å…¶å®ƒæ•°æ®è®¡ç®—å¾—åˆ°çš„ï¼Œé‚£ä¹ˆåªæœ‰å½“ç”¨åˆ°çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä¾èµ–çš„æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ‰åº”è¯¥éœ€è¦é‡æ–°è®¡ç®—ã€‚</p><h3 id="é¿å…é‡å¤è®¡ç®—"><a href="#é¿å…é‡å¤è®¡ç®—" class="headerlink" title="é¿å…é‡å¤è®¡ç®—"></a>é¿å…é‡å¤è®¡ç®—</h3><blockquote><p>é€šè¿‡ <strong>useMemo</strong> è¿™ä¸ª Hookï¼Œå¯ä»¥é¿å…åœ¨ç”¨åˆ°çš„æ•°æ®æ²¡å‘ç”Ÿå˜åŒ–æ—¶è¿›è¡Œçš„é‡å¤è®¡ç®—ã€‚è™½ç„¶ä¾‹å­å±•ç¤ºçš„æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„åœºæ™¯ï¼Œä½†å¦‚æœæ˜¯ä¸€ä¸ªå¤æ‚çš„è®¡ç®—ï¼Œé‚£ä¹ˆå¯¹äº<strong>æå‡æ€§èƒ½</strong>ä¼šæœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚</p></blockquote><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> calc = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// å‡è®¾è¿™é‡Œåšäº†å¤æ‚çš„è®¡ç®—ï¼Œæš‚æ—¶ç”¨æ¬¡å¹‚æ¨¡æ‹Ÿ</span><br>    <span class="hljs-keyword">return</span> a ** b;<br>&#125;<br><span class="hljs-keyword">const</span> MyComponent = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123;a, b&#125; = props;<br>    <span class="hljs-keyword">const</span> c = calc(a, b);<br>    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>c: &#123;c&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœ calc è®¡ç®—è€—æ—¶ 1000msï¼Œé‚£ä¹ˆæ¯æ¬¡æ¸²æŸ“éƒ½è¦ç­‰å¾…è¿™ä¹ˆä¹…ï¼Œæ€ä¹ˆä¼˜åŒ–å‘¢ï¼Ÿ</p><blockquote><p>a, b å€¼ä¸å˜çš„æƒ…å†µä¸‹ï¼Œå¾—å‡ºçš„ c å®šæ˜¯ç›¸åŒçš„ã€‚</p></blockquote><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ useMemo æŠŠå€¼ç»™ç¼“å­˜èµ·æ¥ï¼Œé¿å…é‡å¤è®¡ç®—ç›¸åŒçš„ç»“æœã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> calc = <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// å‡è®¾è¿™é‡Œåšäº†å¤æ‚çš„è®¡ç®—ï¼Œæš‚æ—¶ç”¨æ¬¡å¹‚æ¨¡æ‹Ÿ</span><br>    <span class="hljs-keyword">return</span> a ** b;<br>&#125;<br><span class="hljs-keyword">const</span> MyComponent = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> &#123;a, b&#125; = props;<br>    <span class="hljs-comment">// ç¼“å­˜</span><br>    <span class="hljs-keyword">const</span> c = React.useMemo(<span class="hljs-function">() =&gt;</span> calc(a, b), [a, b]);<br>    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>c: &#123;c&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>useCallback çš„åŠŸèƒ½å…¶å®æ˜¯å¯ä»¥ç”¨ useMemo æ¥å®ç°çš„:</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs arcade">const myEventHandler = useMemo(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>  <span class="hljs-comment">// è¿”å›ä¸€ä¸ªå‡½æ•°ä½œä¸ºç¼“å­˜ç»“æœ</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>    <span class="hljs-comment">// åœ¨è¿™é‡Œè¿›è¡Œäº‹ä»¶å¤„ç†</span><br>  &#125;<br>&#125;, [dep1, dep2]);<br></code></pre></td></tr></table></figure><h3 id="å°ç»“ä¸€ä¸‹ï¼š"><a href="#å°ç»“ä¸€ä¸‹ï¼š" class="headerlink" title="å°ç»“ä¸€ä¸‹ï¼š"></a>å°ç»“ä¸€ä¸‹ï¼š</h3><p><strong>æ„Ÿè§‰åˆ°è¿™æœ‰è¿™ç§æ„Ÿè§‰ï¼Œå…¶å®hookå°±æ˜¯å»ºç«‹äº†ä¸€ä¸ªç»‘å®šæŸä¸ªç»“æœåˆ°ä¾èµ–æ•°æ®çš„å…³ç³»ã€‚åªæœ‰å½“ä¾èµ–å˜äº†ï¼Œè¿™ä¸ªç»“æœæ‰éœ€è¦è¢«é‡æ–°å¾—åˆ°ã€‚</strong></p><h2 id="useRefï¼šåœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´å…±äº«æ•°æ®"><a href="#useRefï¼šåœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´å…±äº«æ•°æ®" class="headerlink" title="useRefï¼šåœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´å…±äº«æ•°æ®"></a>useRefï¼šåœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´å…±äº«æ•°æ®</h2><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">const myRefContainer</span> = useRef(initialValue);<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥æŠŠ <strong>useRef</strong> çœ‹ä½œæ˜¯åœ¨å‡½æ•°ç»„ä»¶ä¹‹å¤–åˆ›å»ºçš„ä¸€ä¸ªå®¹å™¨ç©ºé—´ã€‚åœ¨è¿™ä¸ªå®¹å™¨ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å”¯ä¸€çš„ current å±è®¾ç½®ä¸€ä¸ªå€¼ï¼Œä»è€Œåœ¨å‡½æ•°ç»„ä»¶çš„å¤šæ¬¡æ¸²æŸ“ä¹‹é—´å…±äº«è¿™ä¸ªå€¼ã€‚</p><h3 id="useRef-çš„é‡è¦çš„åŠŸèƒ½"><a href="#useRef-çš„é‡è¦çš„åŠŸèƒ½" class="headerlink" title="useRef çš„é‡è¦çš„åŠŸèƒ½"></a>useRef çš„é‡è¦çš„åŠŸèƒ½</h3><h4 id="1-å­˜å‚¨è·¨æ¸²æŸ“çš„æ•°æ®"><a href="#1-å­˜å‚¨è·¨æ¸²æŸ“çš„æ•°æ®" class="headerlink" title="1. å­˜å‚¨è·¨æ¸²æŸ“çš„æ•°æ®"></a>1. å­˜å‚¨è·¨æ¸²æŸ“çš„æ•°æ®</h4><p>ä½¿ç”¨ <strong>useRef</strong> ä¿å­˜çš„æ•°æ®ä¸€èˆ¬æ˜¯å’Œ UI çš„æ¸²æŸ“æ— å…³çš„ï¼Œå› æ­¤å½“ <strong>ref</strong> çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ˜¯ä¸ä¼šè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“çš„ï¼Œè¿™ä¹Ÿæ˜¯ <strong>useRef</strong> åŒºåˆ«äº <strong>useState</strong> çš„åœ°æ–¹ã€‚</p><p>ä¸¾ä¾‹ï¼š</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">const [time, setTime] = useState(<span class="hljs-number">0</span>);<br><span class="hljs-regexp">//</span> å®šä¹‰ timer è¿™æ ·ä¸€ä¸ªå®¹å™¨ç”¨äºåœ¨è·¨ç»„ä»¶æ¸²æŸ“ä¹‹é—´ä¿å­˜ä¸€ä¸ªå˜é‡ <br>const timer = useRef(<span class="hljs-literal">null</span>);<br><br> const handleStart = useCallback(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>   <span class="hljs-regexp">//</span> ä½¿ç”¨ current å±æ€§è®¾ç½® ref çš„å€¼<br>   timer.current = <span class="hljs-built_in">window</span>.<span class="hljs-built_in">setInterval</span>(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123; setTime(<span class="hljs-function"><span class="hljs-params">(time)</span> =&gt;</span> time + <span class="hljs-number">1</span>); &#125;, <span class="hljs-number">100</span>);<br> &#125;, []);<br></code></pre></td></tr></table></figure><h4 id="2-ä¿å­˜æŸä¸ª-DOM-èŠ‚ç‚¹çš„å¼•ç”¨"><a href="#2-ä¿å­˜æŸä¸ª-DOM-èŠ‚ç‚¹çš„å¼•ç”¨" class="headerlink" title="2. ä¿å­˜æŸä¸ª DOM èŠ‚ç‚¹çš„å¼•ç”¨"></a>2. ä¿å­˜æŸä¸ª DOM èŠ‚ç‚¹çš„å¼•ç”¨</h4><blockquote><p>æ˜¯åœ¨æŸäº›åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»è¦è·å¾—çœŸå®<strong>DOM</strong>èŠ‚ç‚¹çš„å¼•ç”¨ï¼Œæ‰€ä»¥ç»“åˆ React çš„ <strong>ref</strong> å±æ€§å’Œ <strong>useRef</strong> è¿™ä¸ª Hookï¼Œæˆ‘ä»¬å°±å¯ä»¥è·å¾—çœŸå®çš„ DOM èŠ‚ç‚¹ï¼Œå¹¶å¯¹è¿™ä¸ªèŠ‚ç‚¹è¿›è¡Œæ“ä½œã€‚</p></blockquote><p>React å®˜æ–¹ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">TextInputWithFocusButton</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> inputEl = useRef(<span class="hljs-literal">null</span>);<br>  <span class="hljs-keyword">const</span> onButtonClick = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-comment">// current å±æ€§æŒ‡å‘äº†çœŸå®çš„ input è¿™ä¸ª DOM èŠ‚ç‚¹ï¼Œä»è€Œå¯ä»¥è°ƒç”¨ focus æ–¹æ³•</span><br>    inputEl.current.focus();<br>  &#125;;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;inputEl&#125;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> /&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;onButtonClick&#125;</span>&gt;</span>Focus the input<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="ç†è§£ï¼š"><a href="#ç†è§£ï¼š" class="headerlink" title="ç†è§£ï¼š"></a>ç†è§£ï¼š</h4><p>å¯ä»¥çœ‹åˆ°ref è¿™ä¸ªå±æ€§æä¾›äº†è·å¾— DOM èŠ‚ç‚¹çš„èƒ½åŠ›ï¼Œå¹¶åˆ©ç”¨ useRef ä¿å­˜äº†è¿™ä¸ªèŠ‚ç‚¹çš„åº”ç”¨ã€‚è¿™æ ·çš„è¯ï¼Œä¸€æ—¦ input èŠ‚ç‚¹è¢«æ¸²æŸ“åˆ°ç•Œé¢ä¸Šï¼Œé‚£æˆ‘ä»¬é€šè¿‡ inputEl.current å°±èƒ½è®¿é—®åˆ°çœŸå®çš„ DOM èŠ‚ç‚¹çš„å®ä¾‹äº†</p><h2 id="useContextï¼šå®šä¹‰å…¨å±€çŠ¶æ€"><a href="#useContextï¼šå®šä¹‰å…¨å±€çŠ¶æ€" class="headerlink" title="useContextï¼šå®šä¹‰å…¨å±€çŠ¶æ€"></a>useContextï¼šå®šä¹‰å…¨å±€çŠ¶æ€</h2><h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-useContextï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-useContextï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ useContextï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ useContextï¼Ÿ</h3><p>React ç»„ä»¶ä¹‹é—´çš„çŠ¶æ€ä¼ é€’åªæœ‰ä¸€ç§æ–¹å¼ï¼Œé‚£å°±æ˜¯é€šè¿‡ propsã€‚ç¼ºç‚¹ï¼š<strong>è¿™ç§ä¼ é€’å…³ç³»åªèƒ½åœ¨çˆ¶å­ç»„ä»¶ä¹‹é—´è¿›è¡Œã€‚</strong></p><p>é‚£ä¹ˆé—®é¢˜å‡ºç°ï¼šè·¨å±‚æ¬¡ï¼Œæˆ–è€…åŒå±‚çš„ç»„ä»¶ä¹‹é—´è¦å¦‚ä½•è¿›è¡Œæ•°æ®çš„å…±äº«ï¼Ÿè¿™å°±æ¶‰åŠåˆ°ä¸€ä¸ªæ–°çš„å‘½é¢˜ï¼š<strong>å…¨å±€çŠ¶æ€ç®¡ç†</strong>ã€‚</p><p>æœï¼šreactæä¾›çš„è§£å†³æ–¹æ¡ˆï¼š<strong>Context</strong> æœºåˆ¶ã€‚</p><h3 id="å…·ä½“åŸç†ï¼š"><a href="#å…·ä½“åŸç†ï¼š" class="headerlink" title="å…·ä½“åŸç†ï¼š"></a>å…·ä½“åŸç†ï¼š</h3><p>React æä¾›äº† Context è¿™æ ·ä¸€ä¸ªæœºåˆ¶ï¼Œ<strong>èƒ½å¤Ÿè®©æ‰€æœ‰åœ¨æŸä¸ªç»„ä»¶å¼€å§‹çš„ç»„ä»¶æ ‘ä¸Šåˆ›å»ºä¸€ä¸ª Contextã€‚è¿™æ ·è¿™ä¸ªç»„ä»¶æ ‘ä¸Šçš„æ‰€æœ‰ç»„ä»¶ï¼Œå°±éƒ½èƒ½è®¿é—®å’Œä¿®æ”¹è¿™ä¸ª Context</strong> äº†ã€‚</p><p>é‚£ä¹ˆåœ¨å‡½æ•°ç»„ä»¶é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ useContext è¿™æ ·ä¸€ä¸ª Hook æ¥ç®¡ç† Contextã€‚</p><h3 id="ä½¿ç”¨ï¼šï¼ˆè¿™å„¿ç”¨äº†å®˜æ–¹ä¾‹å­ï¼‰"><a href="#ä½¿ç”¨ï¼šï¼ˆè¿™å„¿ç”¨äº†å®˜æ–¹ä¾‹å­ï¼‰" class="headerlink" title="ä½¿ç”¨ï¼šï¼ˆè¿™å„¿ç”¨äº†å®˜æ–¹ä¾‹å­ï¼‰"></a>ä½¿ç”¨ï¼šï¼ˆè¿™å„¿ç”¨äº†å®˜æ–¹ä¾‹å­ï¼‰</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-keyword">const</span> themes = &#123;<br>  <span class="hljs-attr">light</span>: &#123;<br>    <span class="hljs-attr">foreground</span>: <span class="hljs-string">&quot;#000000&quot;</span>,<br>    <span class="hljs-attr">background</span>: <span class="hljs-string">&quot;#eeeeee&quot;</span><br>  &#125;,<br>  <span class="hljs-attr">dark</span>: &#123;<br>    <span class="hljs-attr">foreground</span>: <span class="hljs-string">&quot;#ffffff&quot;</span>,<br>    <span class="hljs-attr">background</span>: <span class="hljs-string">&quot;#222222&quot;</span><br>  &#125;<br>&#125;;<br><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª Theme çš„ Context</span><br><br><span class="hljs-keyword">const</span> ThemeContext = React.createContext(themes.light);<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-comment">// æ•´ä¸ªåº”ç”¨ä½¿ç”¨ ThemeContext.Provider ä½œä¸ºæ ¹ç»„ä»¶</span><br>  <span class="hljs-keyword">return</span> (<br>    <span class="hljs-comment">// ä½¿ç”¨ themes.dark ä½œä¸ºå½“å‰ Context </span><br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;themes.dark&#125;</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Toolbar</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-comment">// åœ¨ Toolbar ç»„ä»¶ä¸­ä½¿ç”¨ä¸€ä¸ªä¼šä½¿ç”¨ Theme çš„ Button</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Toolbar</span>(<span class="hljs-params">props</span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">ThemedButton</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-comment">// åœ¨ Theme Button ä¸­ä½¿ç”¨ useContext æ¥è·å–å½“å‰çš„ä¸»é¢˜</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ThemedButton</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> theme = useContext(ThemeContext);<br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">background:</span> <span class="hljs-attr">theme.background</span>,</span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">color:</span> <span class="hljs-attr">theme.foreground</span></span></span><br><span class="hljs-tag"><span class="xml">    &#125;&#125;&gt;</span></span><br><span class="xml">      I am styled by theme context!</span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹:"></a>ä¼˜ç‚¹:</h3><p><strong>Context</strong> æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿åœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´å…±äº«æ•°æ®çš„æœºåˆ¶ã€‚</p><h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹:"></a>ç¼ºç‚¹:</h3><p>Context ç›¸å½“äºæä¾›äº†ä¸€ä¸ªå®šä¹‰ React ä¸–ç•Œä¸­å…¨å±€å˜é‡çš„æœºåˆ¶ï¼Œè€Œå…¨å±€å˜é‡åˆ™æ„å‘³ç€ä¸¤ç‚¹ï¼š</p><h4 id="1-ä¼šè®©è°ƒè¯•å˜å¾—å›°éš¾ï¼Œå› ä¸ºä½ å¾ˆéš¾è·Ÿè¸ªæŸä¸ª-Context-çš„å˜åŒ–ç©¶ç«Ÿæ˜¯å¦‚ä½•äº§ç”Ÿçš„ã€‚"><a href="#1-ä¼šè®©è°ƒè¯•å˜å¾—å›°éš¾ï¼Œå› ä¸ºä½ å¾ˆéš¾è·Ÿè¸ªæŸä¸ª-Context-çš„å˜åŒ–ç©¶ç«Ÿæ˜¯å¦‚ä½•äº§ç”Ÿçš„ã€‚" class="headerlink" title="1. ä¼šè®©è°ƒè¯•å˜å¾—å›°éš¾ï¼Œå› ä¸ºä½ å¾ˆéš¾è·Ÿè¸ªæŸä¸ª Context çš„å˜åŒ–ç©¶ç«Ÿæ˜¯å¦‚ä½•äº§ç”Ÿçš„ã€‚"></a>1. ä¼šè®©è°ƒè¯•å˜å¾—å›°éš¾ï¼Œå› ä¸ºä½ å¾ˆéš¾è·Ÿè¸ªæŸä¸ª Context çš„å˜åŒ–ç©¶ç«Ÿæ˜¯å¦‚ä½•äº§ç”Ÿçš„ã€‚</h4><h4 id="2-è®©ç»„ä»¶çš„å¤ç”¨å˜å¾—å›°éš¾ï¼Œå› ä¸ºä¸€ä¸ªç»„ä»¶å¦‚æœä½¿ç”¨äº†æŸä¸ª-Contextï¼Œå®ƒå°±å¿…é¡»ç¡®ä¿è¢«ç”¨åˆ°çš„åœ°æ–¹ä¸€å®šæœ‰è¿™ä¸ª-Context-çš„-Provider-åœ¨å…¶çˆ¶ç»„ä»¶çš„è·¯å¾„ä¸Šã€‚"><a href="#2-è®©ç»„ä»¶çš„å¤ç”¨å˜å¾—å›°éš¾ï¼Œå› ä¸ºä¸€ä¸ªç»„ä»¶å¦‚æœä½¿ç”¨äº†æŸä¸ª-Contextï¼Œå®ƒå°±å¿…é¡»ç¡®ä¿è¢«ç”¨åˆ°çš„åœ°æ–¹ä¸€å®šæœ‰è¿™ä¸ª-Context-çš„-Provider-åœ¨å…¶çˆ¶ç»„ä»¶çš„è·¯å¾„ä¸Šã€‚" class="headerlink" title="2. è®©ç»„ä»¶çš„å¤ç”¨å˜å¾—å›°éš¾ï¼Œå› ä¸ºä¸€ä¸ªç»„ä»¶å¦‚æœä½¿ç”¨äº†æŸä¸ª Contextï¼Œå®ƒå°±å¿…é¡»ç¡®ä¿è¢«ç”¨åˆ°çš„åœ°æ–¹ä¸€å®šæœ‰è¿™ä¸ª Context çš„ Provider åœ¨å…¶çˆ¶ç»„ä»¶çš„è·¯å¾„ä¸Šã€‚"></a>2. è®©ç»„ä»¶çš„å¤ç”¨å˜å¾—å›°éš¾ï¼Œå› ä¸ºä¸€ä¸ªç»„ä»¶å¦‚æœä½¿ç”¨äº†æŸä¸ª Contextï¼Œå®ƒå°±å¿…é¡»ç¡®ä¿è¢«ç”¨åˆ°çš„åœ°æ–¹ä¸€å®šæœ‰è¿™ä¸ª Context çš„ Provider åœ¨å…¶çˆ¶ç»„ä»¶çš„è·¯å¾„ä¸Šã€‚</h4><h3 id="å®é™…åº”ç”¨åœºæ™¯"><a href="#å®é™…åº”ç”¨åœºæ™¯" class="headerlink" title="å®é™…åº”ç”¨åœºæ™¯"></a>å®é™…åº”ç”¨åœºæ™¯</h3><p>ç”±äºä»¥ä¸Šç¼ºç‚¹ï¼Œæ‰€ä»¥åœ¨ React çš„å¼€å‘ä¸­ï¼Œé™¤äº†åƒ Themeã€Language ç­‰ä¸€ç›®äº†ç„¶çš„éœ€è¦å…¨å±€è®¾ç½®çš„å˜é‡å¤–ï¼ˆmy: åªè¯»å–ï¼Œä¸éœ€è¦åœ¨é¡¹ç›®é‡Œæ‰‹åŠ¨è§¦å‘ä¿®æ”¹çš„ï¼‰ï¼Œæˆ‘ä»¬å¾ˆå°‘ä¼šä½¿ç”¨ Context æ¥åšå¤ªå¤šæ•°æ®çš„å…±äº«ã€‚éœ€è¦å†ä¸‰å¼ºè°ƒçš„æ˜¯ï¼ŒContext æ›´å¤šçš„æ˜¯æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„æœºåˆ¶ï¼Œè®© React åº”ç”¨å…·å¤‡å®šä¹‰å…¨å±€çš„å“åº”å¼æ•°æ®çš„èƒ½åŠ›ã€‚</p><blockquote><p>æ­¤å¤–ï¼Œå¾ˆå¤šçŠ¶æ€ç®¡ç†æ¡†æ¶ï¼Œæ¯”å¦‚ Reduxï¼Œæ­£æ˜¯åˆ©ç”¨äº† Context çš„æœºåˆ¶æ¥æä¾›ä¸€ç§æ›´åŠ å¯æ§çš„ç»„ä»¶ä¹‹é—´çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ã€‚å› æ­¤ï¼Œç†è§£ Context çš„æœºåˆ¶ï¼Œä¹Ÿå¯ä»¥è®©æˆ‘ä»¬æ›´å¥½åœ°å»ç†è§£ Redux è¿™æ ·çš„æ¡†æ¶å®ç°çš„åŸç†ã€‚</p></blockquote><h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p>æ„Ÿè§‰è¿™æ¬¡çš„å†…å®¹ä¸å¤šä¸å°‘ã€‚å…¶å®äº†è§£å­¦ä¼šäº†useState å’Œ useEffect è¿™ä¸¤ä¸ª æ ¸å¿ƒ Hooksï¼Œå‡ ä¹å°±èƒ½å®Œæˆæ‰€æœ‰ React åŠŸèƒ½çš„å¼€å‘äº†ã€‚</p><p>useCallbackã€useMemoã€useRef å’Œ useContextã€‚è¿™å‡ ä¸ª Hook éƒ½æ˜¯ä¸ºäº†è§£å†³å‡½æ•°ç»„ä»¶ä¸­é‡åˆ°çš„ç‰¹å®šé—®é¢˜ã€‚</p><p>è¿˜æœ‰å‡ ä¸ªæ¯”è¾ƒè¾¹ç¼˜çš„hookè¿™é‡Œå°±ä¸å†å†™äº†ï¼Œæœ‰å…´è¶£çš„å¤§ä½¬å¯ä»¥ç§»æ­¥åˆ°å®˜æ–¹æ–‡æ¡£ä¸Šçœ‹çœ‹ã€‚</p><p>ç å­—ä¸æ˜“ï¼Œä¹Ÿè¾›è‹¦å¤§ä½¬ä»¬æŠ½ç©ºäº†è§£äº†~</p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å†œæ°‘å·¥æ—¥è®°04</title>
    <link href="/2021/11/10/%E5%86%9C%E6%B0%91%E5%B7%A5%E6%97%A5%E8%AE%B004/"/>
    <url>/2021/11/10/%E5%86%9C%E6%B0%91%E5%B7%A5%E6%97%A5%E8%AE%B004/</url>
    
    <content type="html"><![CDATA[<h3 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h3><p>æœ€è¿‘å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œæ„Ÿè§‰è‡ªå·±æ‡‚ï¼Œä½†æ˜¯è¯´ä¸å‡ºæ¥ï¼Œå…¶å®è¿˜æ˜¯æ²¡é‚£ä¹ˆæ˜ç™½ï¼Œèµ·ç å¾—è¯•ç€å…ˆç»™è‡ªå·±è®²æ˜ç™½ã€‚</p><h3 id="Reactç¯‡"><a href="#Reactç¯‡" class="headerlink" title="Reactç¯‡"></a>Reactç¯‡</h3><ol><li>Reactä¹‹setStateåŸç†åˆ†æ</li></ol><p><a href="http://blog.poetries.top/2018/12/20/react-setState/">http://blog.poetries.top/2018/12/20/react-setState/</a></p><ol start="2"><li></li></ol>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ€»ç»“</tag>
      
      <tag>é¢ç»</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é‡æ„æ€»ç»“</title>
    <link href="/2021/11/03/%E9%87%8D%E6%9E%84%E6%80%BB%E7%BB%93/"/>
    <url>/2021/11/03/%E9%87%8D%E6%9E%84%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h1 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h1><p>é¡¹ç›®å¾—å¤šåšæ€»ç»“ï¼Œèƒ½è®°å°±è®°ä¸€ä¸‹ã€‚</p><h2 id="ä»æ‰“åŒ…å¼€å§‹"><a href="#ä»æ‰“åŒ…å¼€å§‹" class="headerlink" title="ä»æ‰“åŒ…å¼€å§‹"></a>ä»æ‰“åŒ…å¼€å§‹</h2><p>package.json =&gt; scripts</p><p>æ‰¾åˆ°è¿è¡Œè„šæœ¬ =&gt; åœ¨æ ¹ç›®å½•ä¸‹scripts/start.js</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">&quot;scripts&quot;</span>: &#123;<br>  <span class="hljs-string">&quot;app&quot;</span>: <span class="hljs-string">&quot;npm run api &amp;&amp; npm run start&quot;</span>,<br>  <span class="hljs-string">&quot;start&quot;</span>: <span class="hljs-string">&quot;node scripts/start.js&quot;</span>,<br>  <span class="hljs-string">...</span><br>&#125;,<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹start.js</p><p>å¤§å¤šæ•°éƒ½æ˜¯ä¸€äº›æ‰§è¡Œè„šæœ¬ï¼Œå¹¶ä¸”ç›®å‰å¤§å¤šæ•°é¡¹ç›®éƒ½æ˜¯ä½¿ç”¨çš„Webpackæ‰“åŒ…ï¼Œè¿™é‡Œç¨å¾®è®°å½•ä¸€ä¸‹setupProxyï¼ˆè½¬å‘ä»£ç†ï¼‰</p><h2 id="ä»‹ç»ä¸€ä¸‹é¡¹ç›®ç»“æ„ï¼Œå¯ä»¥ä»¥æ­¤ä¸ºå‚è€ƒ"><a href="#ä»‹ç»ä¸€ä¸‹é¡¹ç›®ç»“æ„ï¼Œå¯ä»¥ä»¥æ­¤ä¸ºå‚è€ƒ" class="headerlink" title="ä»‹ç»ä¸€ä¸‹é¡¹ç›®ç»“æ„ï¼Œå¯ä»¥ä»¥æ­¤ä¸ºå‚è€ƒ"></a>ä»‹ç»ä¸€ä¸‹é¡¹ç›®ç»“æ„ï¼Œå¯ä»¥ä»¥æ­¤ä¸ºå‚è€ƒ</h2><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">.<br>â”œâ”€â”€ README.md<br>â”œâ”€â”€ <span class="hljs-built_in">config</span>                 <span class="hljs-comment"># é…ç½®æ–‡ä»¶</span><br>â”œâ”€â”€ mock                   <span class="hljs-comment"># æ¨¡æ‹Ÿæ•°æ®</span><br>â”œâ”€â”€ package.<span class="hljs-keyword">json</span><br><span class="hljs-keyword"></span>â”œâ”€â”€ public                 <span class="hljs-comment"># å…¬å…±èµ„æº</span><br>â”œâ”€â”€ <span class="hljs-keyword">scripts </span>               <span class="hljs-comment"># æ„å»ºè„šæœ¬</span><br>â””â”€â”€ src<br>    â”œâ”€â”€ assets             <span class="hljs-comment"># é™æ€èµ„æº</span><br>    â”œâ”€â”€ components         <span class="hljs-comment"># å…¬å…±ç»„ä»¶</span><br>    â”œâ”€â”€ configs            <span class="hljs-comment"># é…ç½®æ–‡ä»¶</span><br>    â”œâ”€â”€ layouts            <span class="hljs-comment"># å¸ƒå±€ç»„ä»¶</span><br>    â”œâ”€â”€ models             <span class="hljs-comment"># æ•°æ®æ¨¡å‹</span><br>    â”œâ”€â”€ pages              <span class="hljs-comment"># é¡µé¢ç»„ä»¶</span><br>    â”œâ”€â”€ services           <span class="hljs-comment"># æ¥å£æœåŠ¡</span><br>    â”œâ”€â”€ styles             <span class="hljs-comment"># å…¨å±€æ ·å¼</span><br>    â”œâ”€â”€ utils              <span class="hljs-comment"># å·¥å…·å‡½æ•°</span><br>    â””â”€â”€ index.tsx          <span class="hljs-comment"># å…¥å£æ–‡ä»¶</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ€»ç»“</tag>
      
      <tag>é‡æ„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¯æ‹–æ‹½çš„Listç»„ä»¶</title>
    <link href="/2021/11/03/%E5%8F%AF%E6%8B%96%E6%8B%BD%E7%9A%84List%E7%BB%84%E4%BB%B6/"/>
    <url>/2021/11/03/%E5%8F%AF%E6%8B%96%E6%8B%BD%E7%9A%84List%E7%BB%84%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>æœ¬ç»„ä»¶æ˜¯åŸºäºreact-beautiful-dndåŒ…å°è£…çš„å¯æ‹–æ‹½çš„Listç»„ä»¶ã€‚</p><h3 id="å…³é”®ä»£ç å¦‚ä¸‹ï¼š"><a href="#å…³é”®ä»£ç å¦‚ä¸‹ï¼š" class="headerlink" title="å…³é”®ä»£ç å¦‚ä¸‹ï¼š"></a>å…³é”®ä»£ç å¦‚ä¸‹ï¼š</h3><p>App.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> React, &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; list &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./const&quot;</span>;<br><span class="hljs-keyword">import</span> DraggableList <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./DraggableList&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./styles.css&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;antd/dist/antd.css&quot;</span>;<br><br><span class="hljs-keyword">const</span> renderListItem = <span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> &#123; name &#125; = item;<br>  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;name&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;<br>&#125;;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> [data, onDragEnd] = useState(list);<br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">DraggableList</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">list</span>=<span class="hljs-string">&#123;data&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">listItemKey</span>=<span class="hljs-string">&quot;id&quot;</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">renderListItem</span>=<span class="hljs-string">&#123;renderListItem&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">onDragEnd</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> onDragEnd(e)&#125;</span><br><span class="xml">      /&gt;</span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>DraggableList.tsx</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/* eslint-disable react/prop-types */</span><br><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; DragDropContext, Droppable, Draggable &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-beautiful-dnd&quot;</span>;<br><br><span class="hljs-comment">// a little function to help us with reordering the result</span><br><span class="hljs-keyword">const</span> reorder = <span class="hljs-function">(<span class="hljs-params">list: <span class="hljs-built_in">any</span>, startIndex: <span class="hljs-built_in">any</span>, endIndex: <span class="hljs-built_in">any</span></span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> result = <span class="hljs-built_in">Array</span>.from(list);<br>  <span class="hljs-keyword">const</span> [removed] = result.splice(startIndex, <span class="hljs-number">1</span>);<br>  result.splice(endIndex, <span class="hljs-number">0</span>, removed);<br><br>  <span class="hljs-keyword">return</span> result;<br>&#125;;<br><br><span class="hljs-keyword">const</span> getItemStyle = <span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">  isDragging: <span class="hljs-built_in">boolean</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">  draggableStyle: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">  height: <span class="hljs-built_in">any</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">  margin = <span class="hljs-string">&quot;1px&quot;</span></span></span><br><span class="hljs-params"><span class="hljs-function"></span>) =&gt;</span> (&#123;<br>  <span class="hljs-comment">// some basic styles to make the items look a bit nicer</span><br>  <span class="hljs-attr">padding</span>: <span class="hljs-string">&quot;0 12px&quot;</span>,<br>  <span class="hljs-attr">userSelect</span>: <span class="hljs-string">&quot;none&quot;</span>,<br>  height,<br>  margin,<br>  <span class="hljs-attr">border</span>: <span class="hljs-string">&quot;1px solid #d9d9d9&quot;</span>,<br><br>  <span class="hljs-comment">// change background colour if dragging</span><br>  <span class="hljs-attr">background</span>: isDragging ? <span class="hljs-string">&quot;#69c0ff&quot;</span> : <span class="hljs-string">&quot;white&quot;</span>,<br><br>  <span class="hljs-comment">// styles we need to apply on draggables</span><br>  ...draggableStyle<br>&#125;);<br><br><span class="hljs-keyword">const</span> getListStyle = <span class="hljs-function">(<span class="hljs-params">isDraggingOver: <span class="hljs-built_in">any</span></span>) =&gt;</span> (&#123;<br>  <span class="hljs-attr">background</span>: isDraggingOver ? <span class="hljs-string">&quot;#e6f7fe&quot;</span> : <span class="hljs-string">&quot;white&quot;</span>,<br>  <span class="hljs-attr">width</span>: <span class="hljs-string">&quot;100%&quot;</span><br>&#125;);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">DraggableList</span>(<span class="hljs-params">&#123;</span></span><br><span class="hljs-params"><span class="hljs-function">  list,</span></span><br><span class="hljs-params"><span class="hljs-function">  listItemKey,</span></span><br><span class="hljs-params"><span class="hljs-function">  renderListItem,</span></span><br><span class="hljs-params"><span class="hljs-function">  onDragEnd,</span></span><br><span class="hljs-params"><span class="hljs-function">  itemHeight = <span class="hljs-string">&quot;51px&quot;</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">  margin</span></span><br><span class="hljs-params"><span class="hljs-function">&#125;: <span class="hljs-built_in">any</span></span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DragDropContext</span></span></span><br><span class="hljs-tag"><span class="xml">      <span class="hljs-attr">onDragEnd</span>=<span class="hljs-string">&#123;(result:</span> <span class="hljs-attr">any</span>) =&gt;</span> &#123;</span><br><span class="xml">        console.log(&quot;result&quot;, result);</span><br><span class="xml">        if (!result.destination) return;</span><br><span class="xml">        const orderedList = reorder(</span><br><span class="xml">          list,</span><br><span class="xml">          result.source.index,</span><br><span class="xml">          result.destination.index</span><br><span class="xml">        );</span><br><span class="xml">        if (onDragEnd) onDragEnd(orderedList);</span><br><span class="xml">      &#125;&#125;</span><br><span class="xml">    &gt;</span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Droppable</span> <span class="hljs-attr">droppableId</span>=<span class="hljs-string">&quot;droppable&quot;</span>&gt;</span></span><br><span class="xml">        &#123;(provided, snapshot) =&gt; (</span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">div</span></span></span><br><span class="hljs-tag"><span class="xml">            &#123;<span class="hljs-attr">...provided.droppableProps</span>&#125;</span></span><br><span class="hljs-tag"><span class="xml">            <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;provided.innerRef&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">            <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;getListStyle(snapshot.isDraggingOver)&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">          &gt;</span></span><br><span class="xml">            &#123;list.map((item: any, index: any) =&gt; &#123;</span><br><span class="xml">              const key = listItemKey ? item[listItemKey] : index;</span><br><span class="xml"></span><br><span class="xml">              return (</span><br><span class="xml">                <span class="hljs-tag">&lt;<span class="hljs-name">Draggable</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;key&#125;</span> <span class="hljs-attr">draggableId</span>=<span class="hljs-string">&#123;</span>`$&#123;<span class="hljs-attr">key</span>&#125;`&#125; <span class="hljs-attr">index</span>=<span class="hljs-string">&#123;index&#125;</span>&gt;</span></span><br><span class="xml">                  &#123;(provided, snapshot) =&gt; (</span><br><span class="xml">                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span></span></span><br><span class="hljs-tag"><span class="xml">                      <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;provided.innerRef&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">                      &#123;<span class="hljs-attr">...provided.draggableProps</span>&#125;</span></span><br><span class="hljs-tag"><span class="xml">                      &#123;<span class="hljs-attr">...provided.dragHandleProps</span>&#125;</span></span><br><span class="hljs-tag"><span class="xml">                      <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;getItemStyle(</span></span></span><br><span class="hljs-tag"><span class="xml">                        <span class="hljs-attr">snapshot.isDragging</span>,</span></span><br><span class="hljs-tag"><span class="xml">                        <span class="hljs-attr">provided.draggableProps.style</span>,</span></span><br><span class="hljs-tag"><span class="xml">                        <span class="hljs-attr">itemHeight</span>,</span></span><br><span class="hljs-tag"><span class="xml">                        <span class="hljs-attr">margin</span></span></span><br><span class="hljs-tag"><span class="xml">                      )&#125;</span></span><br><span class="hljs-tag"><span class="xml">                    &gt;</span></span><br><span class="xml">                      &#123;renderListItem(item, index)&#125;</span><br><span class="xml">                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">                  )&#125;</span><br><span class="xml">                <span class="hljs-tag">&lt;/<span class="hljs-name">Draggable</span>&gt;</span></span><br><span class="xml">              );</span><br><span class="xml">            &#125;)&#125;</span><br><span class="xml">            &#123;provided.placeholder&#125;</span><br><span class="xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">        )&#125;</span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Droppable</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">DragDropContext</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¼”ç¤ºåœ°å€ï¼š<br><a href="https://codesandbox.io/s/draggablelist-ot1n7?file=/src/App.js:0-558">è¿™é‡Œ</a>æ˜¯æœ¬èŠ‚çš„å…¨éƒ¨ä»£ç </p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>React</tag>
      
      <tag>ç»„ä»¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸‰çº§çº§è”é€‰æ‹©å™¨</title>
    <link href="/2021/10/28/%E4%B8%89%E7%BA%A7%E7%BA%A7%E8%81%94Select/"/>
    <url>/2021/10/28/%E4%B8%89%E7%BA%A7%E7%BA%A7%E8%81%94Select/</url>
    
    <content type="html"><![CDATA[<h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>æœ¬ç»„ä»¶æ˜¯åŸºäºantd4.xçš„Selectç»„ä»¶ï¼ŒäºŒæ¬¡å°è£…çš„ä¸‰çº§çº§è”é€‰æ‹©å™¨ï¼Œç”¨æ³•ï¼šå°†æ•°æ®æŒ‰ç…§è§„å®šçš„æ ¼å¼ä¼ å…¥ä¸ºç»„ä»¶çš„propsï¼Œå³å¯å®Œæˆé€‰æ‹©ã€‚</p><h3 id="ä»£ç å¦‚ä¸‹ï¼š"><a href="#ä»£ç å¦‚ä¸‹ï¼š" class="headerlink" title="ä»£ç å¦‚ä¸‹ï¼š"></a>ä»£ç å¦‚ä¸‹ï¼š</h3><p>DiSelect3Cas.tsx</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author <span class="hljs-variable">zhangzheyi</span></span></span><br><span class="hljs-comment"> * 3çº§è”åŠ¨çš„é€‰æ‹©å™¨</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; Select &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;antd&quot;</span>;<br><br><span class="hljs-keyword">const</span> &#123; Option &#125; = Select;<br><span class="hljs-keyword">const</span> stPre = &#123; <span class="hljs-attr">color</span>: <span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-attr">display</span>: <span class="hljs-string">&quot;inline-block&quot;</span>, <span class="hljs-attr">verticalAlign</span>: <span class="hljs-string">&quot;top&quot;</span> &#125;;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">DiSelect3Cas</span>(<span class="hljs-params">&#123;</span></span><br><span class="hljs-params"><span class="hljs-function">  pre,</span></span><br><span class="hljs-params"><span class="hljs-function">  required,</span></span><br><span class="hljs-params"><span class="hljs-function">  block,</span></span><br><span class="hljs-params"><span class="hljs-function">  title,</span></span><br><span class="hljs-params"><span class="hljs-function">  value = [],</span></span><br><span class="hljs-params"><span class="hljs-function">  onChange,</span></span><br><span class="hljs-params"><span class="hljs-function">  data = [],</span></span><br><span class="hljs-params"><span class="hljs-function">  hasEmpty,</span></span><br><span class="hljs-params"><span class="hljs-function">  emptyLabel = <span class="hljs-string">&quot;ä¸é™&quot;</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">  emptyValue = <span class="hljs-string">&quot;&quot;</span>,</span></span><br><span class="hljs-params"><span class="hljs-function">  extraStyle = &#123;&#125;</span></span><br><span class="hljs-params"><span class="hljs-function">&#125;: DiSelect3</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> style = &#123; <span class="hljs-attr">display</span>: <span class="hljs-string">&quot;inline-block&quot;</span> &#125;;<br>  <span class="hljs-keyword">if</span> (block) style.display = <span class="hljs-string">&quot;block&quot;</span>;<br>  <span class="hljs-keyword">const</span> preView = pre ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">pre</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;stPre&#125;</span>&gt;</span>&#123;required ? &quot;* &quot; : &quot;  &quot;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span></span> : <span class="hljs-string">&quot;&quot;</span>;<br><br>  <span class="hljs-keyword">const</span> &#123;<br>    <span class="hljs-attr">title</span>: titleSt = &#123; <span class="hljs-attr">width</span>: <span class="hljs-string">&quot;80px&quot;</span>, <span class="hljs-attr">fontWeight</span>: <span class="hljs-number">500</span> &#125;,<br>    <span class="hljs-attr">input</span>: inputSt = &#123; <span class="hljs-attr">width</span>: <span class="hljs-number">120</span> &#125;<br>  &#125; = extraStyle;<br>  <span class="hljs-keyword">const</span> [data0 = [], data1 = [], data2 = []] = data;<br>  <span class="hljs-keyword">const</span> [value0, value1, value2] = value;<br><br>  <span class="hljs-keyword">const</span> onSelectChange = <span class="hljs-function">(<span class="hljs-params">selectorIdx: <span class="hljs-built_in">number</span>, value: <span class="hljs-built_in">string</span></span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (onChange) &#123;<br>      <span class="hljs-keyword">const</span> passedValue = [value0, value1, value2];<br>      passedValue[selectorIdx] = value;<br>      <span class="hljs-keyword">if</span> (selectorIdx === <span class="hljs-number">0</span>) &#123;<br>        passedValue[<span class="hljs-number">1</span>] = emptyValue;<br>        passedValue[<span class="hljs-number">2</span>] = emptyValue;<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (selectorIdx === <span class="hljs-number">1</span>) &#123;<br>        passedValue[<span class="hljs-number">2</span>] = emptyValue;<br>      &#125;<br>      onChange(passedValue);<br>    &#125;<br>  &#125;;<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;difilter-item-wrap&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;style&#125;</span>&gt;</span></span><br><span class="xml">      &#123;preView&#125;</span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;func-title&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;titleSt&#125;</span>&gt;</span></span><br><span class="xml">        &#123;title&#125;</span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Select</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;value0&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">size</span>=<span class="hljs-string">&#123;</span>&quot;<span class="hljs-attr">small</span>&quot;&#125;</span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;inputSt&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(value)</span> =&gt;</span> onSelectChange(0, value)&#125;</span><br><span class="xml">      &gt;</span><br><span class="xml">        &#123;hasEmpty ? (</span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Option</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;__hasEmpty__&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;emptyValue&#125;</span>&gt;</span></span><br><span class="xml">            &#123;emptyLabel&#125;</span><br><span class="xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">Option</span>&gt;</span></span><br><span class="xml">        ) : (</span><br><span class="xml">          &quot;&quot;</span><br><span class="xml">        )&#125;</span><br><span class="xml">        &#123;data0.map((v: any, i: any) =&gt; (</span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Option</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;i&#125;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;v.value&#125;</span>&gt;</span></span><br><span class="xml">            &#123;v.label&#125;</span><br><span class="xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">Option</span>&gt;</span></span><br><span class="xml">        ))&#125;</span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Select</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Select</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;value1&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">size</span>=<span class="hljs-string">&#123;</span>&quot;<span class="hljs-attr">small</span>&quot;&#125;</span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;inputSt&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(value)</span> =&gt;</span> onSelectChange(1, value)&#125;</span><br><span class="xml">      &gt;</span><br><span class="xml">        &#123;hasEmpty ? (</span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Option</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;__hasEmpty__&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;emptyValue&#125;</span>&gt;</span></span><br><span class="xml">            &#123;emptyLabel&#125;</span><br><span class="xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">Option</span>&gt;</span></span><br><span class="xml">        ) : (</span><br><span class="xml">          &quot;&quot;</span><br><span class="xml">        )&#125;</span><br><span class="xml">        &#123;data1.map((v: any, i: any) =&gt; (</span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Option</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;i&#125;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;v.value&#125;</span>&gt;</span></span><br><span class="xml">            &#123;v.label&#125;</span><br><span class="xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">Option</span>&gt;</span></span><br><span class="xml">        ))&#125;</span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Select</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Select</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;value2&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">size</span>=<span class="hljs-string">&#123;</span>&quot;<span class="hljs-attr">small</span>&quot;&#125;</span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;inputSt&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(value)</span> =&gt;</span> onSelectChange(2, value)&#125;</span><br><span class="xml">      &gt;</span><br><span class="xml">        &#123;hasEmpty ? (</span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Option</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;__hasEmpty__&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;emptyValue&#125;</span>&gt;</span></span><br><span class="xml">            &#123;emptyLabel&#125;</span><br><span class="xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">Option</span>&gt;</span></span><br><span class="xml">        ) : (</span><br><span class="xml">          &quot;&quot;</span><br><span class="xml">        )&#125;</span><br><span class="xml">        &#123;data2.map((v: any, i: any) =&gt; (</span><br><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Option</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#123;i&#125;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&#123;v.value&#125;</span>&gt;</span></span><br><span class="xml">            &#123;v.label&#125;</span><br><span class="xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">Option</span>&gt;</span></span><br><span class="xml">        ))&#125;</span><br><span class="xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Select</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">interface</span> DiSelect3 &#123;<br>  <span class="hljs-attr">pre</span>: <span class="hljs-built_in">boolean</span>;<br>  required: <span class="hljs-built_in">boolean</span>;<br>  block: <span class="hljs-built_in">boolean</span>;<br>  title: <span class="hljs-built_in">string</span>;<br>  value: <span class="hljs-built_in">string</span>[];<br>  data: <span class="hljs-built_in">any</span>;<br>  hasEmpty: <span class="hljs-built_in">boolean</span>;<br>  emptyLabel: <span class="hljs-built_in">string</span>;<br>  emptyValue: <span class="hljs-built_in">string</span>;<br>  extraStyle: &#123;<br>    title?: &#123;&#125;;<br>    input?: &#123;&#125;;<br>  &#125;;<br>  onChange: <span class="hljs-built_in">any</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>App.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> DiSelect3Cas <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./DiSelect3Cas&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; data &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./const&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./styles.css&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;*&#125;</span> </span>data åŸå§‹æ•°æ®</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;*&#125;</span> </span>cateForUi é»˜è®¤å€¼ä¸º[&#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;], ä¸‰ä¸ªå­—ç¬¦ä¸²åˆ†è¡¨ä»£è¡¨ä¸€äºŒä¸‰çº§çº§è”çš„id</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">computed</span>(<span class="hljs-params">data, cateForUi</span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> [value0, value1] = cateForUi;<br>  <span class="hljs-keyword">return</span> [data[<span class="hljs-number">0</span>], data[<span class="hljs-number">1</span>][value0] || [], data[<span class="hljs-number">2</span>][value1] || []];<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> [cateForUi, changeUI] = useState([<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;&quot;</span>]);<br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;App&quot;</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">DiSelect3Cas</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">data</span>=<span class="hljs-string">&#123;computed(data,</span> <span class="hljs-attr">cateForUi</span>)&#125;</span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;æ‰€å±è¡Œä¸š&quot;</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">hasEmpty</span>=<span class="hljs-string">&#123;true&#125;</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">emptyLabel</span>=<span class="hljs-string">&quot;è¯·é€‰æ‹©&quot;</span></span></span><br><span class="hljs-tag"><span class="xml">        <span class="hljs-attr">onChange</span>=<span class="hljs-string">&#123;(e)</span> =&gt;</span> changeUI(e)&#125;</span><br><span class="xml">        value=&#123;cateForUi&#125;</span><br><span class="xml">      /&gt;</span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>å…·ä½“æ¼”ç¤ºåœ°å€åœ¨<a href="https://codesandbox.io/s/diselectcas-pb8on?file=/src/App.js:0-720">https://codesandbox.io/s/diselectcas-pb8on?file=/src/App.js:0-720</a></p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>React</tag>
      
      <tag>ç»„ä»¶</tag>
      
      <tag>antd</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>jsä¸€äº›è¯­æ³•å°æŠ€å·§</title>
    <link href="/2021/10/27/js%E4%B8%80%E4%BA%9B%E8%AF%AD%E6%B3%95%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
    <url>/2021/10/27/js%E4%B8%80%E4%BA%9B%E8%AF%AD%E6%B3%95%E5%B0%8F%E6%8A%80%E5%B7%A7/</url>
    
    <content type="html"><![CDATA[<h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>æœ‰ç©ºè¿˜æ˜¯å¾—çœ‹çœ‹å¤§ä½¬å†™çš„ä»£ç ï¼Œæœ‰çš„è¯­æ³•å’Œå°æŠ€å·§å¯ä»¥å€Ÿé‰´ä¸€ä¸‹ï¼Œç¡®å®èƒ½æé«˜ä¸å°‘æ•ˆç‡ã€‚</p><h2 id="1-jsåŒå¹å·çš„ä½œç”¨"><a href="#1-jsåŒå¹å·çš„ä½œç”¨" class="headerlink" title="1.jsåŒå¹å·çš„ä½œç”¨"></a>1.jsåŒå¹å·çš„ä½œç”¨</h2><p>æŒ‰ç…§æˆ‘çš„ç†è§£ï¼Œå°±æ˜¯ä¸ºä¸€äº›åŸºç¡€æ•°æ®ç±»å‹åšä¸€ä¸‹Booleanç±»å‹çš„è¿”å›ï¼Œæ¯”å¦‚<code>ï¼ˆnull/undifined/0/&quot;&quot;/NaNï¼‰</code>ç­‰å€¼ï¼Œå¯ä»¥è¿”å›false</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">var unknow = null; <span class="hljs-regexp">//</span> è¿™é‡Œå¯ä»¥æ˜¯null<span class="hljs-regexp">/undifined/</span><span class="hljs-number">0</span><span class="hljs-regexp">/&quot;&quot;/</span>NaNä»»æ„çš„å€¼<br>console.log(!!unknow); <span class="hljs-regexp">//</span> false<br></code></pre></td></tr></table></figure><h2 id="2-jså¯é€‰é“¾æ“ä½œç¬¦"><a href="#2-jså¯é€‰é“¾æ“ä½œç¬¦" class="headerlink" title="2.jså¯é€‰é“¾æ“ä½œç¬¦"></a>2.jså¯é€‰é“¾æ“ä½œç¬¦</h2><p>è¿™æ®µä»£ç ä¹‹å‰è€æ˜¯è¿™ä¹ˆå†™</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-title">var</span> ret = res.<span class="hljs-class"><span class="hljs-keyword">data</span> &amp;&amp; res.<span class="hljs-keyword">data</span>.list;</span><br></code></pre></td></tr></table></figure><p>å…¶å®æ˜¯å¯ä»¥è¿™ä¹ˆå†™çš„</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">var <span class="hljs-keyword">ret</span> = res.data?<span class="hljs-meta">.list</span><br></code></pre></td></tr></table></figure><p>æœ‰ç‚¹åƒé“¾å¼è°ƒç”¨ï¼Œè¿™é‡Œéœ€è¦å¼•ç”³å‡ºæ¥è¿™ä¹ˆä¸€ä¸ªå°é—®é¢˜ï¼Œ|| å’Œ ??çš„ç”¨æ³•</p><h2 id="3-JSä¸­-ä¸-çš„åŒºåˆ«"><a href="#3-JSä¸­-ä¸-çš„åŒºåˆ«" class="headerlink" title="3. JSä¸­??ä¸||çš„åŒºåˆ«"></a>3. JSä¸­??ä¸||çš„åŒºåˆ«</h2><p>ç›¸åŒç‚¹ï¼š</p><blockquote><p>ç”¨æ³•ç›¸åŒï¼Œéƒ½æ˜¯å‰åæ˜¯å€¼ï¼Œä¸­é—´ç”¨ç¬¦å·è¿æ¥ã€‚æ ¹æ®å‰é¢çš„å€¼æ¥åˆ¤æ–­æœ€ç»ˆè¿”å›å‰é¢çš„å€¼è¿˜æ˜¯åé¢çš„å€¼ã€‚</p></blockquote><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs 1c">å€¼<span class="hljs-number">1</span> ?? å€¼<span class="hljs-number">2</span><br>å€¼<span class="hljs-number">1</span> <span class="hljs-string">|| å€¼2</span><br></code></pre></td></tr></table></figure><p>ä¸åŒç‚¹:</p><blockquote><p>åˆ¤æ–­æ–¹å¼ä¸åŒï¼š</p></blockquote><ul><li>ä½¿ç”¨ <code>??</code> æ—¶ï¼Œåªæœ‰å½“<code>å€¼1</code>ä¸º<code>null</code>æˆ–<code>undefined</code>æ—¶æ‰è¿”å›<code>å€¼2</code>ï¼›</li><li>ä½¿ç”¨ <code>||</code> æ—¶ï¼Œ<code>å€¼1</code>ä¼šè½¬æ¢ä¸ºå¸ƒå°”å€¼åˆ¤æ–­ï¼Œä¸º<code>true</code>è¿”å›<code>å€¼1</code>ï¼Œfalse è¿”å›<code>å€¼2</code></li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span> ??<br>undefined ?? <span class="hljs-number">2</span><span class="hljs-regexp">//</span> <span class="hljs-number">2</span><br>null ?? <span class="hljs-number">2</span><span class="hljs-regexp">//</span> <span class="hljs-number">2</span><br><span class="hljs-number">0</span> ?? <span class="hljs-number">2</span><span class="hljs-regexp">//</span> <span class="hljs-number">0</span><br><span class="hljs-string">&quot;&quot;</span> ?? <span class="hljs-number">2</span><span class="hljs-regexp">//</span> <span class="hljs-string">&quot;&quot;</span><br>true ?? <span class="hljs-number">2</span><span class="hljs-regexp">//</span> true<br>false ?? <span class="hljs-number">2</span><span class="hljs-regexp">//</span> false<br><br><span class="hljs-regexp">//</span> ||<br>undefined || <span class="hljs-number">2</span><span class="hljs-regexp">//</span> <span class="hljs-number">2</span><br>null || <span class="hljs-number">2</span><span class="hljs-regexp">//</span> <span class="hljs-number">2</span><br><span class="hljs-number">0</span> || <span class="hljs-number">2</span><span class="hljs-regexp">//</span> <span class="hljs-number">2</span><br><span class="hljs-string">&quot;&quot;</span> || <span class="hljs-number">2</span><span class="hljs-regexp">//</span> <span class="hljs-number">2</span><br>true || <span class="hljs-number">2</span><span class="hljs-regexp">//</span> true<br>false || <span class="hljs-number">2</span><span class="hljs-regexp">//</span> <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><blockquote><p>æ€»çš„æ¥è¯´ï¼Œ<code>??</code>æ›´åŠ é€‚åˆåœ¨ä¸çŸ¥é“å˜é‡æ˜¯å¦æœ‰å€¼æ—¶ä½¿ç”¨ã€‚</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>js</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å†œæ°‘å·¥æ—¥è®°03</title>
    <link href="/2021/10/24/%E5%86%9C%E6%B0%91%E5%B7%A5%E6%97%A5%E8%AE%B003/"/>
    <url>/2021/10/24/%E5%86%9C%E6%B0%91%E5%B7%A5%E6%97%A5%E8%AE%B003/</url>
    
    <content type="html"><![CDATA[<h3 id="1-æµè§ˆå™¨é‡ç»˜å’Œé‡æ’çš„åŒºåˆ«ï¼Ÿ"><a href="#1-æµè§ˆå™¨é‡ç»˜å’Œé‡æ’çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="1.æµè§ˆå™¨é‡ç»˜å’Œé‡æ’çš„åŒºåˆ«ï¼Ÿ"></a>1.æµè§ˆå™¨é‡ç»˜å’Œé‡æ’çš„åŒºåˆ«ï¼Ÿ</h3><blockquote><p>å¦‚ä½•è§¦å‘é‡æ’å’Œé‡ç»˜ï¼Ÿ</p></blockquote><p>ä»»ä½•æ”¹å˜ç”¨æ¥æ„å»ºæ¸²æŸ“æ ‘çš„ä¿¡æ¯éƒ½ä¼šå¯¼è‡´ä¸€æ¬¡é‡æ’æˆ–é‡ç»˜ï¼š</p><ul><li>æ·»åŠ ã€åˆ é™¤ã€æ›´æ–°DOMèŠ‚ç‚¹</li><li>é€šè¿‡display: noneéšè—ä¸€ä¸ªDOMèŠ‚ç‚¹-è§¦å‘é‡æ’å’Œé‡ç»˜</li><li>é€šè¿‡visibility: hiddenéšè—ä¸€ä¸ªDOMèŠ‚ç‚¹-åªè§¦å‘é‡ç»˜ï¼Œå› ä¸ºæ²¡æœ‰å‡ ä½•å˜åŒ–</li><li>ç§»åŠ¨æˆ–è€…ç»™é¡µé¢ä¸­çš„DOMèŠ‚ç‚¹æ·»åŠ åŠ¨ç”»</li><li>æ·»åŠ ä¸€ä¸ªæ ·å¼è¡¨ï¼Œè°ƒæ•´æ ·å¼å±æ€§</li><li>ç”¨æˆ·è¡Œä¸ºï¼Œä¾‹å¦‚è°ƒæ•´çª—å£å¤§å°ï¼Œæ”¹å˜å­—å·ï¼Œæˆ–è€…æ»šåŠ¨ã€‚</li></ul><blockquote><p>å¦‚ä½•é¿å…é‡ç»˜æˆ–è€…é‡æ’ï¼Ÿ</p></blockquote><ol><li><p>é›†ä¸­æ”¹å˜æ ·å¼ï¼Œä¸è¦ä¸€æ¡ä¸€æ¡åœ°ä¿®æ”¹ DOM çš„æ ·å¼ã€‚</p></li><li><p>ä¸è¦æŠŠ DOM ç»“ç‚¹çš„å±æ€§å€¼æ”¾åœ¨å¾ªç¯é‡Œå½“æˆå¾ªç¯é‡Œçš„å˜é‡ã€‚</p></li><li><p>ä¸ºåŠ¨ç”»çš„ HTML å…ƒä»¶ä½¿ç”¨ fixed æˆ– absoult çš„ positionï¼Œé‚£ä¹ˆä¿®æ”¹ä»–ä»¬çš„ CSS æ˜¯ä¸ä¼š reflow çš„ã€‚</p></li><li><p>ä¸ä½¿ç”¨ table å¸ƒå±€ã€‚å› ä¸ºå¯èƒ½å¾ˆå°çš„ä¸€ä¸ªå°æ”¹åŠ¨ä¼šé€ æˆæ•´ä¸ª table çš„é‡æ–°å¸ƒå±€ã€‚</p></li><li><p>å°½é‡åªä¿®æ”¹positionï¼šabsoluteæˆ–fixedå…ƒç´ ï¼Œå¯¹å…¶ä»–å…ƒç´ å½±å“ä¸å¤§</p></li><li><p>åŠ¨ç”»å¼€å§‹GPUåŠ é€Ÿï¼Œtranslateä½¿ç”¨3Då˜åŒ–</p></li><li><p>æå‡ä¸ºåˆæˆå±‚<br>å°†å…ƒç´ æå‡ä¸ºåˆæˆå±‚æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p></li></ol><ul><li>åˆæˆå±‚çš„ä½å›¾ï¼Œä¼šäº¤ç”± GPU åˆæˆï¼Œæ¯” CPU å¤„ç†è¦å¿«</li><li>å½“éœ€è¦ repaint æ—¶ï¼Œåªéœ€è¦ repaint æœ¬èº«ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–çš„å±‚</li><li>å¯¹äº transform å’Œ opacity æ•ˆæœï¼Œä¸ä¼šè§¦å‘ layout å’Œ paint</li></ul><p>æå‡åˆæˆå±‚çš„æœ€å¥½æ–¹å¼æ˜¯ä½¿ç”¨ CSS çš„ will-change å±æ€§ï¼š</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs fortran">#<span class="hljs-keyword">target</span> &#123;<br>  will-<span class="hljs-built_in">change</span>: transform;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-æ‰‹å†™å¸¸è§æ’åº"><a href="#2-æ‰‹å†™å¸¸è§æ’åº" class="headerlink" title="2. æ‰‹å†™å¸¸è§æ’åº"></a>2. æ‰‹å†™å¸¸è§æ’åº</h3><ul><li>å†’æ³¡æ’åº</li></ul><blockquote><p>å†’æ³¡æ’åºçš„åŸç†å¦‚ä¸‹ï¼Œä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼ŒæŠŠå½“å‰å…ƒç´ å’Œä¸‹ä¸€ä¸ªç´¢å¼•å…ƒç´ è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœå½“å‰å…ƒç´ å¤§ï¼Œé‚£ä¹ˆå°±äº¤æ¢ä½ç½®ï¼Œé‡å¤æ“ä½œç›´åˆ°æ¯”è¾ƒåˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆæ­¤æ—¶æœ€åä¸€ä¸ªå…ƒç´ å°±æ˜¯è¯¥æ•°ç»„ä¸­æœ€å¤§çš„æ•°ã€‚ä¸‹ä¸€è½®é‡å¤ä»¥ä¸Šæ“ä½œï¼Œä½†æ˜¯æ­¤æ—¶æœ€åä¸€ä¸ªå…ƒç´ å·²ç»æ˜¯æœ€å¤§æ•°äº†ï¼Œæ‰€ä»¥ä¸éœ€è¦å†æ¯”è¾ƒæœ€åä¸€ä¸ªå…ƒç´ ï¼Œåªéœ€è¦æ¯”è¾ƒåˆ° <code>length - 1</code> çš„ä½ç½®ã€‚</p></blockquote><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bubbleSort</span><span class="hljs-params">(list)</span> </span>&#123;<br>  <span class="hljs-keyword">var</span> n = list.length;<br>  <span class="hljs-keyword">if</span> (!n) <span class="hljs-keyword">return</span> [];<br><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>    <span class="hljs-comment">// æ³¨æ„è¿™é‡Œéœ€è¦ n - i - 1</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; n - i - <span class="hljs-number">1</span>; j++) &#123;<br>      <span class="hljs-keyword">if</span> (list[j] &gt; list[j + <span class="hljs-number">1</span>]) &#123;<br>        <span class="hljs-keyword">var</span> temp = list[j + <span class="hljs-number">1</span>];<br>        list[j + <span class="hljs-number">1</span>] = list[j];<br>        list[j] = temp;<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> list;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å¿«é€Ÿæ’åº</li></ul><blockquote><p>å¿«æ’çš„åŸç†å¦‚ä¸‹ã€‚éšæœºé€‰å–ä¸€ä¸ªæ•°ç»„ä¸­çš„å€¼ä½œä¸ºåŸºå‡†å€¼ï¼Œä»å·¦è‡³å³å–å€¼ä¸åŸºå‡†å€¼å¯¹æ¯”å¤§å°ã€‚æ¯”åŸºå‡†å€¼å°çš„æ”¾æ•°ç»„å·¦è¾¹ï¼Œå¤§çš„æ”¾å³è¾¹ï¼Œå¯¹æ¯”å®Œæˆåå°†åŸºå‡†å€¼å’Œç¬¬ä¸€ä¸ªæ¯”åŸºå‡†å€¼å¤§çš„å€¼äº¤æ¢ä½ç½®ã€‚ç„¶åå°†æ•°ç»„ä»¥åŸºå‡†å€¼çš„ä½ç½®åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œç»§ç»­é€’å½’ä»¥ä¸Šæ“ä½œ</p></blockquote><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs excel">function quickSort(list) &#123;<br>  <span class="hljs-built_in">var</span> <span class="hljs-built_in">n</span> = list.length;<br>  <span class="hljs-built_in">if</span> (<span class="hljs-built_in">n</span> &lt;= <span class="hljs-number">1</span>) return list;<br><br>  <span class="hljs-built_in">var</span> midIndex = Math.floor(<span class="hljs-built_in">n</span> / <span class="hljs-number">2</span>);<br>  <span class="hljs-built_in">var</span> midVal = list[midIndex]; // å–ä¸­é—´çš„æ•°<br>  <span class="hljs-built_in">var</span> <span class="hljs-built_in">left</span> = [];<br>  <span class="hljs-built_in">var</span> <span class="hljs-built_in">right</span> = [];<br><br>  for (<span class="hljs-built_in">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">n</span>; i++) &#123;<br>    <span class="hljs-built_in">if</span> (i === midIndex) continue;<br>    <span class="hljs-built_in">if</span> (list[i] &lt; midVal) &#123;<br>      left.push(list[i]);<br>    &#125; else &#123;<br>      right.push(list[i]);<br>    &#125;<br>  &#125;<br><br>  // é€’å½’<br>  return quickSort(<span class="hljs-built_in">left</span>).<span class="hljs-built_in">concat</span>(quickSort(<span class="hljs-built_in">right</span>));<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-è§£å†³è·¨åŸŸé—®é¢˜"><a href="#3-è§£å†³è·¨åŸŸé—®é¢˜" class="headerlink" title="3. è§£å†³è·¨åŸŸé—®é¢˜"></a>3. è§£å†³è·¨åŸŸé—®é¢˜</h3><p>- </p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ€»ç»“</tag>
      
      <tag>é¢ç»</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å†œæ°‘å·¥æ—¥è®°02</title>
    <link href="/2021/10/13/%E5%86%9C%E6%B0%91%E5%B7%A5%E6%97%A5%E8%AE%B002/"/>
    <url>/2021/10/13/%E5%86%9C%E6%B0%91%E5%B7%A5%E6%97%A5%E8%AE%B002/</url>
    
    <content type="html"><![CDATA[<h3 id="1-æ·±æ‹·è´ï¼Œæµ…æ‹·è´"><a href="#1-æ·±æ‹·è´ï¼Œæµ…æ‹·è´" class="headerlink" title="1.æ·±æ‹·è´ï¼Œæµ…æ‹·è´"></a>1.æ·±æ‹·è´ï¼Œæµ…æ‹·è´</h3><ul><li>æµ…æ‹·è´ï¼šé‡æ–°åœ¨å †ä¸­åˆ›å»ºå†…å­˜ï¼Œæ‹·è´å‰åå¯¹è±¡çš„<code>åŸºæœ¬æ•°æ®ç±»å‹äº’ä¸å½±å“</code>ï¼Œä½†æ‹·è´å‰åå¯¹è±¡çš„<code>å¼•ç”¨ç±»å‹</code>å› å…±äº«åŒä¸€å—å†…å­˜ï¼Œä¼š<code>ç›¸äº’å½±å“</code>ã€‚</li><li>æ·±æ‹·è´ï¼šä»å †å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªæ–°çš„åŒºåŸŸå­˜æ”¾æ–°å¯¹è±¡ï¼Œå¯¹å¯¹è±¡ä¸­çš„å­å¯¹è±¡è¿›è¡Œé€’å½’æ‹·è´,æ‹·è´å‰åçš„ä¸¤ä¸ªå¯¹è±¡äº’ä¸å½±å“ã€‚</li></ul><p>ä¸ªäººç†è§£ï¼šé‡ç‚¹æ˜¯å¼•ç”¨ç±»å‹ä¼šç›¸äº’å½±å“</p><p>åŸºç¡€æ•°æ®ç±»å‹ï¼šUndefinedã€Nullã€Booleanã€Numberã€Stringã€Symbol<br>å¼•ç”¨ç±»å‹ï¼šç»Ÿç§°ä¸º <code>Object</code> ç±»å‹ã€‚ç»†åˆ†çš„è¯ï¼Œæœ‰ï¼š<code>Object</code> ç±»å‹ã€<code>Array</code> ç±»å‹ã€<code>Date</code> ç±»å‹ã€<code>RegExp</code> ç±»å‹ã€<code>Function</code> ç±»å‹</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼Œå¯¹æ¯”èµ‹å€¼ä¸æ·±/æµ…æ‹·è´å¾—åˆ°çš„å¯¹è±¡ä¿®æ”¹åå¯¹åŸå§‹å¯¹è±¡çš„å½±å“ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å¯¹è±¡èµ‹å€¼</span><br><span class="hljs-keyword">let</span> obj1 = &#123;<br>    <span class="hljs-attr">name</span> : <span class="hljs-string">&#x27;æµªé‡Œè¡ŒèˆŸ&#x27;</span>,<br>    <span class="hljs-attr">arr</span> : [<span class="hljs-number">1</span>,[<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],<span class="hljs-number">4</span>],<br>&#125;;<br><span class="hljs-keyword">let</span> obj2 = obj1;<br>obj2.name = <span class="hljs-string">&quot;é˜¿æµª&quot;</span>;<br>obj2.arr[<span class="hljs-number">1</span>] =[<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>] ;<br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;obj1&#x27;</span>,obj1) <span class="hljs-comment">// obj1 &#123; name: &#x27;é˜¿æµª&#x27;, arr: [ 1, [ 5, 6, 7 ], 4 ] &#125;</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;obj2&#x27;</span>,obj2) <span class="hljs-comment">// obj2 &#123; name: &#x27;é˜¿æµª&#x27;, arr: [ 1, [ 5, 6, 7 ], 4 ] &#125;</span><br><span class="hljs-comment">// æµ…æ‹·è´</span><br><span class="hljs-keyword">let</span> obj1 = &#123;<br>    <span class="hljs-attr">name</span> : <span class="hljs-string">&#x27;æµªé‡Œè¡ŒèˆŸ&#x27;</span>,<br>    <span class="hljs-attr">arr</span> : [<span class="hljs-number">1</span>,[<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],<span class="hljs-number">4</span>],<br>&#125;;<br><span class="hljs-keyword">let</span> obj3=shallowClone(obj1)<br>obj3.name = <span class="hljs-string">&quot;é˜¿æµª&quot;</span>;<br>obj3.arr[<span class="hljs-number">1</span>] = [<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>] ; <span class="hljs-comment">// æ–°æ—§å¯¹è±¡è¿˜æ˜¯å…±äº«åŒä¸€å—å†…å­˜</span><br><span class="hljs-comment">// è¿™æ˜¯ä¸ªæµ…æ‹·è´çš„æ–¹æ³•</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shallowClone</span>(<span class="hljs-params">source</span>) </span>&#123;<br>    <span class="hljs-keyword">var</span> target = &#123;&#125;;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> source) &#123;<br>        <span class="hljs-keyword">if</span> (source.hasOwnProperty(i)) &#123;<br>            target[i] = source[i];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> target;<br>&#125;<br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;obj1&#x27;</span>,obj1) <span class="hljs-comment">// obj1 &#123; name: &#x27;æµªé‡Œè¡ŒèˆŸ&#x27;, arr: [ 1, [ 5, 6, 7 ], 4 ] &#125;</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;obj3&#x27;</span>,obj3) <span class="hljs-comment">// obj3 &#123; name: &#x27;é˜¿æµª&#x27;, arr: [ 1, [ 5, 6, 7 ], 4 ] &#125;</span><br><span class="hljs-comment">// æ·±æ‹·è´</span><br><span class="hljs-keyword">let</span> obj1 = &#123;<br>    <span class="hljs-attr">name</span> : <span class="hljs-string">&#x27;æµªé‡Œè¡ŒèˆŸ&#x27;</span>,<br>    <span class="hljs-attr">arr</span> : [<span class="hljs-number">1</span>,[<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],<span class="hljs-number">4</span>],<br>&#125;;<br><span class="hljs-keyword">let</span> obj4=deepClone(obj1)<br>obj4.name = <span class="hljs-string">&quot;é˜¿æµª&quot;</span>;<br>obj4.arr[<span class="hljs-number">1</span>] = [<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>] ; <span class="hljs-comment">// æ–°å¯¹è±¡è·ŸåŸå¯¹è±¡ä¸å…±äº«å†…å­˜</span><br><span class="hljs-comment">// è¿™æ˜¯ä¸ªæ·±æ‹·è´çš„æ–¹æ³•</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deepClone</span>(<span class="hljs-params">obj</span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (obj === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> obj; <br>    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(obj);<br>    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">RegExp</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(obj);<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">&quot;object&quot;</span>) <span class="hljs-keyword">return</span> obj;<br>    <span class="hljs-keyword">let</span> cloneObj = <span class="hljs-keyword">new</span> obj.constructor();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> obj) &#123;<br>      <span class="hljs-keyword">if</span> (obj.hasOwnProperty(key)) &#123;<br>        <span class="hljs-comment">// å®ç°ä¸€ä¸ªé€’å½’æ‹·è´</span><br>        cloneObj[key] = deepClone(obj[key]);<br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> cloneObj;<br>&#125;<br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;obj1&#x27;</span>,obj1) <span class="hljs-comment">// obj1 &#123; name: &#x27;æµªé‡Œè¡ŒèˆŸ&#x27;, arr: [ 1, [ 2, 3 ], 4 ] &#125;</span><br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;obj4&#x27;</span>,obj4) <span class="hljs-comment">// obj4 &#123; name: &#x27;é˜¿æµª&#x27;, arr: [ 1, [ 5, 6, 7 ], 4 ] &#125;</span><br></code></pre></td></tr></table></figure><p>æµ…æ‹·è´å®ç°æ–¹å¼ï¼š</p><ul><li>Object. assign();</li><li>å‡½æ•°åº“lodashçš„_.cloneæ–¹æ³•</li><li>Array.prototype.concat();</li><li>Array.prototype.slice();</li></ul><p>æ·±æ‹·è´çš„å®ç°æ–¹å¼ï¼š</p><ul><li>JSON.parse(JSON.stringify()); <strong>è¿™ç§æ–¹æ³•è™½ç„¶å¯ä»¥å®ç°æ•°ç»„æˆ–å¯¹è±¡æ·±æ‹·è´,ä½†ä¸èƒ½å¤„ç†å‡½æ•°å’Œæ­£åˆ™</strong></li><li>å‡½æ•°åº“lodashçš„_.cloneDeepæ–¹æ³•</li></ul><h3 id="2-bindï¼Œapplyï¼Œcallçš„åŒºåˆ«"><a href="#2-bindï¼Œapplyï¼Œcallçš„åŒºåˆ«" class="headerlink" title="2. bindï¼Œapplyï¼Œcallçš„åŒºåˆ«"></a>2. bindï¼Œapplyï¼Œcallçš„åŒºåˆ«</h3><p>ã€€ã€€ä¸‰è€…éƒ½æ˜¯ç”¨äºæ”¹å˜å‡½æ•°ä½“å†…thisçš„æŒ‡å‘ï¼Œä½†æ˜¯bindä¸applyå’Œcallçš„æœ€å¤§çš„åŒºåˆ«æ˜¯ï¼šbindä¸ä¼šç«‹å³è°ƒç”¨ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œç§°ä¸ºç»‘å®šå‡½æ•°ï¼Œå…¶å†…çš„thisæŒ‡å‘ä¸ºåˆ›å»ºå®ƒæ—¶ä¼ å…¥bindçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œä¼ å…¥bindçš„ç¬¬äºŒä¸ªåŠä»¥åçš„å‚æ•°ä½œä¸ºåŸå‡½æ•°çš„å‚æ•°æ¥è°ƒç”¨åŸå‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> obj = &#123;&#125;;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span> === obj);<br>&#125;<br><br>test(); <span class="hljs-comment">//false</span><br><br><span class="hljs-keyword">var</span> testObj = test.bind(obj);<br>testObj();  <span class="hljs-comment">//true</span><br></code></pre></td></tr></table></figure><pre><code>applyå’Œcalléƒ½æ˜¯ä¸ºäº†æ”¹å˜æŸä¸ªå‡½æ•°è¿è¡Œæ—¶çš„ä¸Šä¸‹æ–‡è€Œå­˜åœ¨çš„ï¼ˆå°±æ˜¯ä¸ºäº†æ”¹å˜å‡½æ•°å†…éƒ¨thisçš„æŒ‡å‘ï¼‰ï¼›applyå’Œcallçš„è°ƒç”¨è¿”å›å‡½æ•°æ‰§è¡Œç»“æœï¼›</code></pre><p>ã€€ã€€å¦‚æœä½¿ç”¨applyæˆ–callæ–¹æ³•ï¼Œé‚£ä¹ˆthisæŒ‡å‘ä»–ä»¬çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œapplyçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‚æ•°æ•°ç»„ï¼Œcallçš„ç¬¬äºŒä¸ªåŠå…¶ä»¥åçš„å‚æ•°éƒ½æ˜¯æ•°ç»„é‡Œé¢çš„å…ƒç´ ï¼Œå°±æ˜¯è¯´è¦å…¨éƒ¨åˆ—ä¸¾å‡ºæ¥ï¼›</p><h3 id="3-ä»æµè§ˆå™¨åœ°å€æ è¾“å…¥urlåˆ°æ˜¾ç¤ºé¡µé¢çš„æ­¥éª¤"><a href="#3-ä»æµè§ˆå™¨åœ°å€æ è¾“å…¥urlåˆ°æ˜¾ç¤ºé¡µé¢çš„æ­¥éª¤" class="headerlink" title="3. ä»æµè§ˆå™¨åœ°å€æ è¾“å…¥urlåˆ°æ˜¾ç¤ºé¡µé¢çš„æ­¥éª¤"></a>3. ä»æµè§ˆå™¨åœ°å€æ è¾“å…¥urlåˆ°æ˜¾ç¤ºé¡µé¢çš„æ­¥éª¤</h3><p><strong>åŸºç¡€ç‰ˆæœ¬</strong></p><ul><li>æµè§ˆå™¨æ ¹æ®è¯·æ±‚çš„<code>URL</code>äº¤ç»™<code>DNS</code>åŸŸåè§£æï¼Œæ‰¾åˆ°çœŸå®<code>IP</code>ï¼Œå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼›ï¼ˆurlåŸŸåè§£æï¼Œå‘é€è¯·æ±‚ï¼‰</li><li>æœåŠ¡å™¨äº¤ç»™åå°å¤„ç†å®Œæˆåè¿”å›æ•°æ®ï¼Œæµè§ˆå™¨æ¥æ”¶æ–‡ä»¶ï¼ˆ<code>HTML</code>ã€<code>JS</code>ã€<code>CSS</code>ã€å›¾è±¡ç­‰ï¼‰ï¼›ï¼ˆåç«¯å¤„ç†è¯·æ±‚ï¼Œæµè§ˆå™¨æ¥å—æ–‡ä»¶ï¼‰</li><li>æµè§ˆå™¨å¯¹åŠ è½½åˆ°çš„èµ„æºï¼ˆ<code>HTML</code>ã€<code>JS</code>ã€<code>CSS</code>ç­‰ï¼‰è¿›è¡Œè¯­æ³•è§£æï¼Œå»ºç«‹ç›¸åº”çš„å†…éƒ¨æ•°æ®ç»“æ„ï¼ˆå¦‚<code>HTML</code>çš„<code>DOM</code>ï¼‰ï¼›ï¼ˆæµè§ˆå™¨è§£æé™æ€èµ„æºï¼Œå»ºç«‹æ•°æ®ç»“æ„ï¼‰</li><li>è½½å…¥è§£æåˆ°çš„èµ„æºæ–‡ä»¶ï¼Œæ¸²æŸ“é¡µé¢ï¼Œå®Œæˆã€‚ï¼ˆè½½å…¥ï¼Œæ¸²æŸ“ï¼‰</li></ul><h3 id="4-httpå’Œhttpsçš„åŒºåˆ«"><a href="#4-httpå’Œhttpsçš„åŒºåˆ«" class="headerlink" title="4. httpå’Œhttpsçš„åŒºåˆ«"></a>4. httpå’Œhttpsçš„åŒºåˆ«</h3><ul><li>å®‰å…¨æ€§ã€‚HTTP æ˜æ–‡ä¼ è¾“ï¼Œæ•°æ®éƒ½æ˜¯æœªåŠ å¯†çš„ï¼Œå®‰å…¨æ€§è¾ƒå·®ï¼ŒHTTPSï¼ˆSSL+HTTPï¼‰ æ•°æ®ä¼ è¾“è¿‡ç¨‹æ˜¯åŠ å¯†çš„ï¼Œå®‰å…¨æ€§è¾ƒå¥½ã€‚</li><li>åè®®ã€‚ä½¿ç”¨ HTTPS åè®®éœ€è¦åˆ° CAï¼ˆCertificate Authorityï¼Œæ•°å­—è¯ä¹¦è®¤è¯æœºæ„ï¼‰ ç”³è¯·è¯ä¹¦ï¼Œä¸€èˆ¬å…è´¹è¯ä¹¦è¾ƒå°‘ï¼Œå› è€Œéœ€è¦ä¸€å®šè´¹ç”¨ã€‚è¯ä¹¦é¢å‘æœºæ„å¦‚ï¼šSymantecã€Comodoã€GoDaddy å’Œ GlobalSign ç­‰ã€‚</li><li>å“åº”é€Ÿåº¦ã€‚HTTP é¡µé¢å“åº”é€Ÿåº¦æ¯” HTTPS å¿«ï¼Œä¸»è¦æ˜¯å› ä¸º HTTP ä½¿ç”¨ TCP ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éœ€è¦äº¤æ¢ 3 ä¸ªåŒ…ï¼Œè€Œ HTTPSé™¤äº† TCP çš„ä¸‰ä¸ªåŒ…ï¼Œè¿˜è¦åŠ ä¸Š ssl æ¡æ‰‹éœ€è¦çš„ 9 ä¸ªåŒ…ï¼Œæ‰€ä»¥ä¸€å…±æ˜¯ 12 ä¸ªåŒ…ã€‚</li><li>ç«¯å£ã€‚http å’Œ https ä½¿ç”¨çš„æ˜¯å®Œå…¨ä¸åŒçš„è¿æ¥æ–¹å¼ï¼Œç”¨çš„ç«¯å£ä¹Ÿä¸ä¸€æ ·ï¼Œå‰è€…æ˜¯ 80ï¼Œåè€…æ˜¯ 443ã€‚</li><li>èµ„æºå ç”¨ã€‚HTTPS å…¶å®å°±æ˜¯å»ºæ„åœ¨ SSL/TLS ä¹‹ä¸Šçš„ HTTP åè®®ï¼Œæ‰€ä»¥ï¼Œè¦æ¯”è¾ƒ HTTPS æ¯” HTTP è¦æ›´è€—è´¹æœåŠ¡å™¨èµ„æºã€‚</li></ul><h3 id="5-TCPä¸‰æ¬¡æ¡æ‰‹"><a href="#5-TCPä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="5. TCPä¸‰æ¬¡æ¡æ‰‹"></a>5. TCPä¸‰æ¬¡æ¡æ‰‹</h3><p>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å°è¯•è¿æ¥æœåŠ¡å™¨ï¼Œå‘æœåŠ¡å™¨å‘é€ syn åŒ…ï¼ˆåŒæ­¥åºåˆ—ç¼–å·Synchronize Sequence Numbersï¼‰ï¼Œsyn=jï¼Œå®¢æˆ·ç«¯è¿›å…¥ SYN_SEND çŠ¶æ€ç­‰å¾…æœåŠ¡å™¨ç¡®è®¤<br>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ¥æ”¶å®¢æˆ·ç«¯synåŒ…å¹¶ç¡®è®¤ï¼ˆack=j+1ï¼‰ï¼ŒåŒæ—¶å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª SYNåŒ…ï¼ˆsyn=kï¼‰ï¼Œå³ SYN+ACK åŒ…ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥ SYN_RECV çŠ¶æ€<br>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„SYN+ACKåŒ…ï¼Œå‘æœåŠ¡å™¨å‘é€ç¡®è®¤åŒ…ACK(ack=k+1ï¼‰ï¼Œæ­¤åŒ…å‘é€å®Œæ¯•ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹</p><h3 id="6-è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹"><a href="#6-è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹" class="headerlink" title="6. è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹"></a>6. è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹</h3><p><strong>è¿›ç¨‹</strong>æ˜¯ä¸€ä¸ªå…·æœ‰ä¸€å®šç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºåœ¨ä¸€ä¸ªæ•°æ®é›†ä¸Šçš„ä¸€æ¬¡åŠ¨æ€æ‰§è¡Œçš„è¿‡ç¨‹ï¼Œ<code>æ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½</code>ï¼Œæ˜¯åº”ç”¨ç¨‹åºè¿è¡Œçš„è½½ä½“ã€‚è¿›ç¨‹æ˜¯ä¸€ç§æŠ½è±¡çš„æ¦‚å¿µï¼Œä»æ¥æ²¡æœ‰ç»Ÿä¸€çš„æ ‡å‡†å®šä¹‰ã€‚</p><p><strong>çº¿ç¨‹</strong>æ˜¯ç¨‹åºæ‰§è¡Œä¸­ä¸€ä¸ªå•ä¸€çš„é¡ºåºæ§åˆ¶æµç¨‹ï¼Œæ˜¯<code>ç¨‹åºæ‰§è¡Œæµçš„æœ€å°å•å…ƒ</code>ï¼Œæ˜¯å¤„ç†å™¨è°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ï¼Œå„ä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«ç¨‹åºçš„å†…å­˜ç©ºé—´(ä¹Ÿå°±æ˜¯æ‰€åœ¨è¿›ç¨‹çš„å†…å­˜ç©ºé—´)ã€‚ä¸€ä¸ªæ ‡å‡†çš„çº¿ç¨‹ç”±çº¿ç¨‹IDã€å½“å‰æŒ‡ä»¤æŒ‡é’ˆ(PC)ã€å¯„å­˜å™¨å’Œå †æ ˆç»„æˆã€‚è€Œè¿›ç¨‹ç”±å†…å­˜ç©ºé—´(ä»£ç ã€æ•°æ®ã€è¿›ç¨‹ç©ºé—´ã€æ‰“å¼€çš„æ–‡ä»¶)å’Œä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ç»„æˆã€‚</p><p><strong>åç¨‹</strong>ï¼Œè‹±æ–‡Coroutinesï¼Œæ˜¯ä¸€ç§<code>åŸºäºçº¿ç¨‹ä¹‹ä¸Šï¼Œä½†åˆæ¯”çº¿ç¨‹æ›´åŠ è½»é‡çº§çš„å­˜åœ¨</code>ï¼Œè¿™ç§ç”±ç¨‹åºå‘˜è‡ªå·±å†™ç¨‹åºæ¥ç®¡ç†çš„è½»é‡çº§çº¿ç¨‹å«åšã€ç”¨æˆ·ç©ºé—´çº¿ç¨‹ã€ï¼Œå…·æœ‰å¯¹å†…æ ¸æ¥è¯´ä¸å¯è§çš„ç‰¹æ€§ã€‚</p><p><strong>è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«ä¸è”ç³»</strong></p><p>ã€åŒºåˆ«ã€‘ï¼š<br>è°ƒåº¦ï¼šçº¿ç¨‹ä½œä¸ºè°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œè¿›ç¨‹ä½œä¸ºæ‹¥æœ‰èµ„æºçš„åŸºæœ¬å•ä½ï¼›</p><p>å¹¶å‘æ€§ï¼šä¸ä»…è¿›ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘æ‰§è¡Œï¼ŒåŒä¸€ä¸ªè¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹ä¹‹é—´ä¹Ÿå¯å¹¶å‘æ‰§è¡Œï¼›</p><p>æ‹¥æœ‰èµ„æºï¼šè¿›ç¨‹æ˜¯æ‹¥æœ‰èµ„æºçš„ä¸€ä¸ªç‹¬ç«‹å•ä½ï¼Œçº¿ç¨‹ä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼Œä½†å¯ä»¥è®¿é—®éš¶å±äºè¿›ç¨‹çš„èµ„æºã€‚</p><p>ç³»ç»Ÿå¼€é”€ï¼šåœ¨åˆ›å»ºæˆ–æ’¤æ¶ˆè¿›ç¨‹æ—¶ï¼Œç”±äºç³»ç»Ÿéƒ½è¦ä¸ºä¹‹åˆ†é…å’Œå›æ”¶èµ„æºï¼Œå¯¼è‡´ç³»ç»Ÿçš„å¼€é”€æ˜æ˜¾å¤§äºåˆ›å»ºæˆ–æ’¤æ¶ˆçº¿ç¨‹æ—¶çš„å¼€é”€ã€‚ä½†æ˜¯è¿›ç¨‹æœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼Œä¸€ä¸ªè¿›ç¨‹å´©æºƒåï¼Œåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ä¸ä¼šå¯¹å…¶å®ƒè¿›ç¨‹äº§ç”Ÿå½±å“ï¼Œè€Œçº¿ç¨‹åªæ˜¯ä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä¸åŒæ‰§è¡Œè·¯å¾„ã€‚çº¿ç¨‹æœ‰è‡ªå·±çš„å †æ ˆå’Œå±€éƒ¨å˜é‡ï¼Œä½†çº¿ç¨‹ä¹‹é—´æ²¡æœ‰å•ç‹¬çš„åœ°å€ç©ºé—´ï¼Œä¸€ä¸ªè¿›ç¨‹æ­»æ‰å°±ç­‰äºæ‰€æœ‰çš„çº¿ç¨‹æ­»æ‰ï¼Œæ‰€ä»¥å¤šè¿›ç¨‹çš„ç¨‹åºè¦æ¯”å¤šçº¿ç¨‹çš„ç¨‹åºå¥å£®ï¼Œä½†åœ¨è¿›ç¨‹åˆ‡æ¢æ—¶ï¼Œè€—è´¹èµ„æºè¾ƒå¤§ï¼Œæ•ˆç‡è¦å·®ä¸€äº›ã€‚</p><p>ã€è”ç³»ã€‘ï¼š<br>ä¸€ä¸ªçº¿ç¨‹åªèƒ½å±äºä¸€ä¸ªè¿›ç¨‹ï¼Œè€Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œä½†è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼›</p><p>èµ„æºåˆ†é…ç»™è¿›ç¨‹ï¼ŒåŒä¸€è¿›ç¨‹çš„æ‰€æœ‰çº¿ç¨‹å…±äº«è¯¥è¿›ç¨‹çš„æ‰€æœ‰èµ„æºï¼›</p><p>å¤„ç†æœºåˆ†ç»™çº¿ç¨‹ï¼Œå³çœŸæ­£åœ¨å¤„ç†æœºä¸Šè¿è¡Œçš„æ˜¯çº¿ç¨‹ï¼›</p><p>çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œéœ€è¦åä½œåŒæ­¥ã€‚ä¸åŒè¿›ç¨‹çš„çº¿ç¨‹é—´è¦åˆ©ç”¨æ¶ˆæ¯é€šä¿¡çš„åŠæ³•å®ç°åŒæ­¥</p><h3 id="7-thisçš„æŒ‡å‘ï¼ˆ5ç§æƒ…å†µï¼‰"><a href="#7-thisçš„æŒ‡å‘ï¼ˆ5ç§æƒ…å†µï¼‰" class="headerlink" title="7. thisçš„æŒ‡å‘ï¼ˆ5ç§æƒ…å†µï¼‰"></a>7. thisçš„æŒ‡å‘ï¼ˆ5ç§æƒ…å†µï¼‰</h3><ol><li>ä½œä¸ºæ™®é€šå‡½æ•°æ‰§è¡Œæ—¶ï¼Œ<code>this</code>æŒ‡å‘<code>window</code>ã€‚</li><li>å½“å‡½æ•°ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œ<code>this</code>å°±ä¼šæŒ‡å‘<code>è¯¥å¯¹è±¡</code>ã€‚</li><li>æ„é€ å™¨è°ƒç”¨ï¼Œ<code>this</code>æŒ‡å‘<code>è¿”å›çš„è¿™ä¸ªå¯¹è±¡</code>ã€‚ newå‡ºæ¥çš„</li><li>ç®­å¤´å‡½æ•° ç®­å¤´å‡½æ•°çš„<code>this</code>ç»‘å®šçœ‹çš„æ˜¯<code>thisæ‰€åœ¨å‡½æ•°å®šä¹‰åœ¨å“ªä¸ªå¯¹è±¡ä¸‹</code>ï¼Œå°±ç»‘å®šå“ªä¸ªå¯¹è±¡ã€‚å¦‚æœæœ‰åµŒå¥—çš„æƒ…å†µï¼Œåˆ™thisç»‘å®šåˆ°æœ€è¿‘çš„ä¸€å±‚å¯¹è±¡ä¸Šã€‚</li><li>åŸºäºFunction.prototypeä¸Šçš„<code>apply ã€ call å’Œ bind</code>è°ƒç”¨æ¨¡å¼ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•éƒ½å¯ä»¥æ˜¾ç¤ºçš„æŒ‡å®šè°ƒç”¨å‡½æ•°çš„ this æŒ‡å‘ã€‚<code>apply</code>æ¥æ”¶å‚æ•°çš„æ˜¯æ•°ç»„ï¼Œ<code>call</code>æ¥å—å‚æ•°åˆ—è¡¨ï¼Œ<code> bind</code>æ–¹æ³•é€šè¿‡ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ª this ç»‘å®šäº†ä¼ å…¥å¯¹è±¡çš„æ–°å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°çš„ thisæŒ‡å‘é™¤äº†ä½¿ç”¨newæ—¶ä¼šè¢«æ”¹å˜ï¼Œå…¶ä»–æƒ…å†µä¸‹éƒ½ä¸ä¼šæ”¹å˜ã€‚è‹¥ä¸ºç©ºé»˜è®¤æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡windowã€‚</li></ol><p>// ä½ ä¸çŸ¥é“çš„jsè®²è§£(æ„Ÿè§‰è¿™ä¸ªæ›´å¥½ç†è§£ä¸€ç‚¹)</p><ol><li><p>é»˜è®¤ç»‘å®š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">run</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.a);<br>&#125;<br><span class="hljs-keyword">var</span> a = <span class="hljs-number">1</span>;<br>run();  <span class="hljs-comment">// 1</span><br></code></pre></td></tr></table></figure></li><li><p> éšå¼ç»‘å®šï¼šå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ï¼Œè°è°ƒç”¨å°±ç»‘å®šè°</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-function">function <span class="hljs-title">run</span><span class="hljs-params">()</span></span>&#123;<br>    console.<span class="hljs-built_in">log</span>(<span class="hljs-keyword">this</span>.a);<br>&#125;<br>var obj = &#123;<br>    a: <span class="hljs-number">1</span>,<br>    run<br>&#125;<br>obj.<span class="hljs-built_in">run</span>();  <span class="hljs-comment">// 1</span><br></code></pre></td></tr></table></figure></li><li><p>æ˜¾ç¤ºç»‘å®šï¼šcallã€applyã€bind å®ç°çš„ç»‘å®šæˆ‘ä»¬ç§°ä¸ºå®ç°æ˜¾ç¤ºç»‘å®š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ada"><span class="hljs-keyword">function</span> <span class="hljs-title">run</span>(param) &#123; <br>    console.log( param, this.id ); <br>&#125;<br>var obj = &#123; <br>    id: <span class="hljs-string">&quot;welcome&quot;</span><br>&#125;; <br>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].forEach( run, obj );  // <span class="hljs-number">1</span> <span class="hljs-string">&quot;welcome&quot;</span> <span class="hljs-number">2</span> <span class="hljs-string">&quot;welcome&quot;</span> <span class="hljs-number">3</span> <span class="hljs-string">&quot;welcome&quot;</span><br></code></pre></td></tr></table></figure></li><li><p>newç»‘å®š</p></li></ol><p>new å°±æ˜¯ä¸€ä¸ªå¯ä»¥è°ƒç”¨æ™®é€šå‡½æ•°çš„æ“ä½œç¬¦ï¼Œä½¿ç”¨ new æ¥è°ƒç”¨å‡½æ•°ï¼Œæˆ–è€…è¯´å‘ç”Ÿæ„é€ å‡½æ•°è°ƒç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼š</p><p>åˆ›å»ºï¼ˆæˆ–è€…è¯´æ„é€ ï¼‰ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚=&gt;</p><p>è¿™ä¸ªæ–°å¯¹è±¡ä¼šè¢«æ‰§è¡Œ [[ åŸå‹ ]] è¿æ¥ã€‚=&gt;</p><p>è¿™ä¸ªæ–°å¯¹è±¡ä¼šç»‘å®šåˆ°å‡½æ•°è°ƒç”¨çš„ thisã€‚=&gt;</p><p>å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å…¶ä»–å¯¹è±¡ï¼Œé‚£ä¹ˆ <strong>new è¡¨è¾¾å¼ä¸­çš„å‡½æ•°è°ƒç”¨ä¼šè‡ªåŠ¨è¿”å›è¿™ä¸ªæ–°å¯¹è±¡</strong>ã€‚</p><ol start="5"><li>ç®­å¤´å‡½æ•°ä¸‹çš„this</li></ol><p>æˆ‘ä»¬éƒ½çŸ¥é“ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ thisï¼Œå®ƒçš„ this æ¥è‡ªäºå¤–å±‚ä½œç”¨åŸŸï¼Œä¹Ÿå› ä¸ºç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ this è¿™ä¸€ç‰¹æ€§ï¼Œå®ƒä¸èƒ½è¢«ç”¨ä½œæ„é€ å‡½æ•°ã€‚<br>ç®­å¤´å‡½æ•°ä¸ä½¿ç”¨ä¸Šé¢  this  çš„å››ç§æ ‡å‡†è§„åˆ™ï¼Œå‡½æ•°æ‰§è¡Œæ—¶ï¼Œå®ƒä¼šæ•è·å¤–å±‚ä½œç”¨åŸŸçš„  this ï¼Œä¸€ç»ç»‘å®šå†ä¹Ÿæ— æ³•ä¿®æ”¹ï¼Œå¹¶ä¸”é«˜äº new ç»‘å®šã€‚</p><ol start="6"><li>ä¼˜å…ˆçº§</li></ol><p>ï¼ˆç®­å¤´å‡½æ•°ä¸‹çš„thisï¼‰=&gt; newç»‘å®š &gt; æ˜¾å¼ç»‘å®š &gt; éšå¼ç»‘å®š &gt; é»˜è®¤ç»‘å®š</p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ€»ç»“</tag>
      
      <tag>é¢ç»</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å†œæ°‘å·¥æ—¥è®°01</title>
    <link href="/2021/09/26/%E5%86%9C%E6%B0%91%E5%B7%A5%E6%97%A5%E8%AE%B001/"/>
    <url>/2021/09/26/%E5%86%9C%E6%B0%91%E5%B7%A5%E6%97%A5%E8%AE%B001/</url>
    
    <content type="html"><![CDATA[<h1 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h1><p>æœ‰äº›ä¸œè¥¿ä¸å†™ä¸‹æ¥çœŸçš„æ˜¯è®°ä¸ä½ï¼Œçœ‹å‡ æ¬¡å¿˜å‡ æ¬¡ï¼ŒçœŸçš„ä½›äº†ã€‚ã€‚ã€‚</p><h3 id="1-domæ ‘èŠ‚ç‚¹å’Œæ¸²æŸ“æ ‘èŠ‚ç‚¹ä¸€ä¸€å¯¹åº”å—ï¼Œæœ‰ä»€ä¹ˆæ˜¯domæ ‘ä¼šæœ‰ï¼Œæ¸²æŸ“æ ‘ä¸ä¼šæœ‰çš„èŠ‚ç‚¹ï¼ˆæè¿°æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹ï¼ŒDOMæ ‘å’Œæ¸²æŸ“æ ‘çš„åŒºåˆ«ï¼‰"><a href="#1-domæ ‘èŠ‚ç‚¹å’Œæ¸²æŸ“æ ‘èŠ‚ç‚¹ä¸€ä¸€å¯¹åº”å—ï¼Œæœ‰ä»€ä¹ˆæ˜¯domæ ‘ä¼šæœ‰ï¼Œæ¸²æŸ“æ ‘ä¸ä¼šæœ‰çš„èŠ‚ç‚¹ï¼ˆæè¿°æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹ï¼ŒDOMæ ‘å’Œæ¸²æŸ“æ ‘çš„åŒºåˆ«ï¼‰" class="headerlink" title="1. domæ ‘èŠ‚ç‚¹å’Œæ¸²æŸ“æ ‘èŠ‚ç‚¹ä¸€ä¸€å¯¹åº”å—ï¼Œæœ‰ä»€ä¹ˆæ˜¯domæ ‘ä¼šæœ‰ï¼Œæ¸²æŸ“æ ‘ä¸ä¼šæœ‰çš„èŠ‚ç‚¹ï¼ˆæè¿°æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹ï¼ŒDOMæ ‘å’Œæ¸²æŸ“æ ‘çš„åŒºåˆ«ï¼‰"></a>1. domæ ‘èŠ‚ç‚¹å’Œæ¸²æŸ“æ ‘èŠ‚ç‚¹ä¸€ä¸€å¯¹åº”å—ï¼Œæœ‰ä»€ä¹ˆæ˜¯domæ ‘ä¼šæœ‰ï¼Œæ¸²æŸ“æ ‘ä¸ä¼šæœ‰çš„èŠ‚ç‚¹ï¼ˆæè¿°æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹ï¼ŒDOMæ ‘å’Œæ¸²æŸ“æ ‘çš„åŒºåˆ«ï¼‰</h3><ul><li><p>æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹ï¼š</p><ul><li>è§£æ<code>HTML</code>æ„å»º<code>DOM</code>(DOMæ ‘)ï¼Œå¹¶è¡Œè¯·æ±‚<code>css/image/js</code></li><li><code>CSS</code> æ–‡ä»¶ä¸‹è½½å®Œæˆï¼Œå¼€å§‹æ„å»º <code>CSSOM</code>(<code>CSS</code>æ ‘)</li><li><code>CSSOM</code> æ„å»ºç»“æŸåï¼Œå’Œ <code>DOM</code> ä¸€èµ·ç”Ÿæˆ <code>Render Tree</code>(æ¸²æŸ“æ ‘)</li><li>å¸ƒå±€(<code>Layout</code>)ï¼šè®¡ç®—å‡ºæ¯ä¸ªèŠ‚ç‚¹åœ¨å±å¹•ä¸­çš„ä½ç½®</li><li>æ˜¾ç¤º(<code>Painting</code>)ï¼šé€šè¿‡æ˜¾å¡æŠŠé¡µé¢ç”»åˆ°å±å¹•ä¸Š</li></ul></li><li><p><code>DOM</code>æ ‘ å’Œ æ¸²æŸ“æ ‘ çš„åŒºåˆ«ï¼š</p><ul><li><code>DOM</code>æ ‘ä¸<code>HTML</code>æ ‡ç­¾ä¸€ä¸€å¯¹åº”ï¼ŒåŒ…æ‹¬<code>head</code>å’Œéšè—å…ƒç´ </li><li>æ¸²æŸ“æ ‘ä¸åŒ…æ‹¬<code>head</code>å’Œéšè—å…ƒç´ ï¼Œå¤§æ®µæ–‡æœ¬çš„æ¯ä¸€ä¸ªè¡Œéƒ½æ˜¯ç‹¬ç«‹èŠ‚ç‚¹ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æœ‰å¯¹åº”çš„<code>css</code>å±æ€§</li></ul></li></ul><h3 id="2-CSSä¼šé˜»å¡domè§£æå—ï¼Ÿ"><a href="#2-CSSä¼šé˜»å¡domè§£æå—ï¼Ÿ" class="headerlink" title="2. CSSä¼šé˜»å¡domè§£æå—ï¼Ÿ"></a>2. CSSä¼šé˜»å¡domè§£æå—ï¼Ÿ</h3><p>å…ˆè¯´ç»“è®ºï¼š</p><ul><li>cssåŠ è½½ä¸ä¼šé˜»å¡DOMæ ‘çš„è§£æ</li><li>cssåŠ è½½ä¼šé˜»å¡DOMæ ‘çš„æ¸²æŸ“</li><li>cssåŠ è½½ä¼šé˜»å¡åé¢jsè¯­å¥çš„æ‰§è¡Œ</li></ul><p>å› æ­¤ï¼Œä¸ºäº†é¿å…è®©ç”¨æˆ·çœ‹åˆ°é•¿æ—¶é—´çš„ç™½å±æ—¶é—´ï¼Œæˆ‘ä»¬åº”è¯¥å°½å¯èƒ½çš„æé«˜cssåŠ è½½é€Ÿåº¦ï¼Œæ¯”å¦‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‡ ç§æ–¹æ³•:</p><ul><li>ä½¿ç”¨CDN(å› ä¸ºCDNä¼šæ ¹æ®ä½ çš„ç½‘ç»œçŠ¶å†µï¼Œæ›¿ä½ æŒ‘é€‰æœ€è¿‘çš„ä¸€ä¸ªå…·æœ‰ç¼“å­˜å†…å®¹çš„èŠ‚ç‚¹ä¸ºä½ æä¾›èµ„æºï¼Œå› æ­¤å¯ä»¥å‡å°‘åŠ è½½æ—¶é—´)</li><li>å¯¹cssè¿›è¡Œå‹ç¼©(å¯ä»¥ç”¨å¾ˆå¤šæ‰“åŒ…å·¥å…·ï¼Œæ¯”å¦‚webpack,gulpç­‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¼€å¯gzipå‹ç¼©)</li><li>åˆç†çš„ä½¿ç”¨ç¼“å­˜(è®¾ç½®cache-control,expires,ä»¥åŠE-tagéƒ½æ˜¯ä¸é”™çš„ï¼Œä¸è¿‡è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ–‡ä»¶æ›´æ–°åï¼Œä½ è¦é¿å…ç¼“å­˜è€Œå¸¦æ¥çš„å½±å“ã€‚å…¶ä¸­ä¸€ä¸ªè§£å†³é˜²èŒƒæ˜¯åœ¨æ–‡ä»¶åå­—åé¢åŠ ä¸€ä¸ªç‰ˆæœ¬å·)</li><li>å‡å°‘httpè¯·æ±‚æ•°ï¼Œå°†å¤šä¸ªcssæ–‡ä»¶åˆå¹¶ï¼Œæˆ–è€…æ˜¯å¹²è„†ç›´æ¥å†™æˆå†…è”æ ·å¼(å†…è”æ ·å¼çš„ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯ä¸èƒ½ç¼“å­˜)</li></ul><p>ä¸ªäººå¯¹è¿™ç§æœºåˆ¶çš„è¯„ä»·<br>å…¶å®æˆ‘è§‰å¾—ï¼Œè¿™å¯èƒ½ä¹Ÿæ˜¯æµè§ˆå™¨çš„ä¸€ç§ä¼˜åŒ–æœºåˆ¶ã€‚å› ä¸ºä½ åŠ è½½cssçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šä¿®æ”¹ä¸‹é¢DOMèŠ‚ç‚¹çš„æ ·å¼ï¼Œå¦‚æœcssåŠ è½½ä¸é˜»å¡DOMæ ‘æ¸²æŸ“çš„è¯ï¼Œé‚£ä¹ˆå½“cssåŠ è½½å®Œä¹‹åï¼ŒDOMæ ‘å¯èƒ½åˆå¾—é‡æ–°é‡ç»˜æˆ–è€…å›æµäº†ï¼Œè¿™å°±é€ æˆäº†ä¸€äº›æ²¡æœ‰å¿…è¦çš„æŸè€—ã€‚æ‰€ä»¥æˆ‘å¹²è„†å°±å…ˆæŠŠDOMæ ‘çš„ç»“æ„å…ˆè§£æå®Œï¼ŒæŠŠå¯ä»¥åšçš„å·¥ä½œåšå®Œï¼Œç„¶åç­‰ä½ cssåŠ è½½å®Œä¹‹åï¼Œåœ¨æ ¹æ®æœ€ç»ˆçš„æ ·å¼æ¥æ¸²æŸ“DOMæ ‘ï¼Œè¿™ç§åšæ³•æ€§èƒ½æ–¹é¢ç¡®å®ä¼šæ¯”è¾ƒå¥½ä¸€ç‚¹ã€‚</p><h3 id="3-æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹"><a href="#3-æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹" class="headerlink" title="3. æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹"></a>3. æµè§ˆå™¨çš„æ¸²æŸ“è¿‡ç¨‹</h3><p><a href="https://blog.poetries.top/FE-Interview-Questions/docs/excellent.html#_21-1-%E6%B8%B2%E6%9F%93%E8%BF%87%E7%A8%8B">https://blog.poetries.top/FE-Interview-Questions/docs/excellent.html#_21-1-%E6%B8%B2%E6%9F%93%E8%BF%87%E7%A8%8B</a></p><ol><li>æµè§ˆå™¨æ¥æ”¶åˆ°<strong>HTML</strong>æ–‡ä»¶å¹¶è½¬æ¢ä¸º<strong>DOM</strong>æ ‘</li><li>å°†<strong>CSS</strong>æ–‡ä»¶è½¬æ¢ä¸º<strong>CSSOM</strong>æ ‘</li><li>ç”Ÿæˆæ¸²æŸ“æ ‘</li></ol><h3 id="4-å®ç°ä¸€ä¸ªcallï¼ˆæ‰‹å†™ï¼‰"><a href="#4-å®ç°ä¸€ä¸ªcallï¼ˆæ‰‹å†™ï¼‰" class="headerlink" title="4. å®ç°ä¸€ä¸ªcallï¼ˆæ‰‹å†™ï¼‰"></a>4. å®ç°ä¸€ä¸ªcallï¼ˆæ‰‹å†™ï¼‰</h3><p>callåšäº†ä»€ä¹ˆ:</p><ul><li>å°†å‡½æ•°è®¾ä¸ºå¯¹è±¡çš„å±æ€§</li><li>æ‰§è¡Œ&amp;åˆ é™¤è¿™ä¸ªå‡½æ•°</li><li>æŒ‡å®šthisåˆ°å‡½æ•°å¹¶ä¼ å…¥ç»™å®šå‚æ•°æ‰§è¡Œå‡½æ•°</li><li>å¦‚æœä¸ä¼ å…¥å‚æ•°ï¼Œé»˜è®¤æŒ‡å‘ä¸º window<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs maxima">// æ¨¡æ‹Ÿ call bar.mycall(null);<br>//å®ç°ä¸€ä¸ªcallæ–¹æ³•ï¼š<br>// åŸç†ï¼šåˆ©ç”¨ <span class="hljs-built_in">context</span>.xxx = self obj.xx = func--&gt;obj.xx()<br>Function.prototype.myCall = function(<span class="hljs-built_in">context</span> = window, ...<span class="hljs-built_in">args</span>) &#123;<br>  // this--&gt;func  <span class="hljs-built_in">context</span>--&gt; obj  <span class="hljs-built_in">args</span>--&gt; ä¼ é€’è¿‡æ¥çš„å‚æ•°<br><br>  // åœ¨<span class="hljs-built_in">context</span>ä¸ŠåŠ ä¸€ä¸ªå”¯ä¸€å€¼ä¸å½±å“<span class="hljs-built_in">context</span>ä¸Šçš„å±æ€§<br>  <span class="hljs-built_in">let</span> <span class="hljs-built_in">key</span> = Symbol(&#x27;<span class="hljs-built_in">key</span>&#x27;)<br>  <span class="hljs-built_in">context</span>[<span class="hljs-built_in">key</span>] = this; // <span class="hljs-built_in">context</span>ä¸ºè°ƒç”¨çš„ä¸Šä¸‹æ–‡,thisæ­¤å¤„ä¸ºå‡½æ•°ï¼Œå°†è¿™ä¸ªå‡½æ•°ä½œä¸º<span class="hljs-built_in">context</span>çš„æ–¹æ³•<br>  // <span class="hljs-built_in">let</span> <span class="hljs-built_in">args</span> = [...arguments].slice(<span class="hljs-number">1</span>)   //ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºobjæ‰€ä»¥åˆ é™¤,ä¼ªæ•°ç»„è½¬ä¸ºæ•°ç»„<br>  <br>  <span class="hljs-built_in">let</span> result = <span class="hljs-built_in">context</span>[<span class="hljs-built_in">key</span>](...<span class="hljs-built_in">args</span>);<br>  <span class="hljs-built_in">delete</span> <span class="hljs-built_in">context</span>[<span class="hljs-built_in">key</span>]; // ä¸åˆ é™¤ä¼šå¯¼è‡´<span class="hljs-built_in">context</span>å±æ€§è¶Šæ¥è¶Šå¤š<br>  <span class="hljs-built_in">return</span> result;<br>&#125;;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//ç”¨æ³•ï¼šf.call(obj,arg1)</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">a,b</span>)</span>&#123;<br> <span class="hljs-built_in">console</span>.log(a+b)<br> <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name)<br>&#125;<br><span class="hljs-keyword">let</span> obj=&#123;<br> <span class="hljs-attr">name</span>:<span class="hljs-number">1</span><br>&#125;<br>f.myCall(obj,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>) <span class="hljs-comment">//å¦åˆ™thisæŒ‡å‘window</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="5-å®ç°ä¸€ä¸ªapplyï¼ˆæ‰‹å†™ï¼‰"><a href="#5-å®ç°ä¸€ä¸ªapplyï¼ˆæ‰‹å†™ï¼‰" class="headerlink" title="5. å®ç°ä¸€ä¸ªapplyï¼ˆæ‰‹å†™ï¼‰"></a>5. å®ç°ä¸€ä¸ªapplyï¼ˆæ‰‹å†™ï¼‰</h3><blockquote><p>æ€è·¯: åˆ©ç”¨<code>this</code>çš„ä¸Šä¸‹æ–‡ç‰¹æ€§ã€‚</p></blockquote><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs maxima">Function.prototype.myApply = function(<span class="hljs-built_in">context</span> = window, ...<span class="hljs-built_in">args</span>) &#123;<br>  // this--&gt;func  <span class="hljs-built_in">context</span>--&gt; obj  <span class="hljs-built_in">args</span>--&gt; ä¼ é€’è¿‡æ¥çš„å‚æ•°<br><br>  // åœ¨<span class="hljs-built_in">context</span>ä¸ŠåŠ ä¸€ä¸ªå”¯ä¸€å€¼ä¸å½±å“<span class="hljs-built_in">context</span>ä¸Šçš„å±æ€§<br>  <span class="hljs-built_in">let</span> <span class="hljs-built_in">key</span> = Symbol(&#x27;<span class="hljs-built_in">key</span>&#x27;)<br>  <span class="hljs-built_in">context</span>[<span class="hljs-built_in">key</span>] = this; // <span class="hljs-built_in">context</span>ä¸ºè°ƒç”¨çš„ä¸Šä¸‹æ–‡,thisæ­¤å¤„ä¸ºå‡½æ•°ï¼Œå°†è¿™ä¸ªå‡½æ•°ä½œä¸º<span class="hljs-built_in">context</span>çš„æ–¹æ³•<br>  // <span class="hljs-built_in">let</span> <span class="hljs-built_in">args</span> = [...arguments].slice(<span class="hljs-number">1</span>)   //ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºobjæ‰€ä»¥åˆ é™¤,ä¼ªæ•°ç»„è½¬ä¸ºæ•°ç»„<br>  <br>  <span class="hljs-built_in">let</span> result = <span class="hljs-built_in">context</span>[<span class="hljs-built_in">key</span>](<span class="hljs-built_in">args</span>); // è¿™é‡Œå’Œcallä¼ å‚ä¸ä¸€æ ·<br>  <span class="hljs-built_in">delete</span> <span class="hljs-built_in">context</span>[<span class="hljs-built_in">key</span>]; // ä¸åˆ é™¤ä¼šå¯¼è‡´<span class="hljs-built_in">context</span>å±æ€§è¶Šæ¥è¶Šå¤š<br>  <span class="hljs-built_in">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">a,b</span>)</span>&#123;<br> <span class="hljs-built_in">console</span>.log(a,b)<br> <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.name)<br>&#125;<br><span class="hljs-keyword">let</span> obj=&#123;<br> <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span><br>&#125;<br>f.myApply(obj,[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>])  <span class="hljs-comment">//arguments[1]</span><br></code></pre></td></tr></table></figure><h3 id="6-å®ç°bind"><a href="#6-å®ç°bind" class="headerlink" title="6. å®ç°bind"></a>6. å®ç°bind</h3><blockquote><p>bind çš„å®ç°å¯¹æ¯”å…¶ä»–ä¸¤ä¸ªå‡½æ•°ç•¥å¾®åœ°å¤æ‚äº†ä¸€ç‚¹ï¼Œå› ä¸º bind éœ€è¦è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œéœ€è¦åˆ¤æ–­ä¸€äº›è¾¹ç•Œé—®é¢˜ï¼Œä»¥ä¸‹æ˜¯ bind çš„å®ç°</p></blockquote><ul><li><code>bind</code> è¿”å›äº†ä¸€ä¸ªå‡½æ•°ï¼Œå¯¹äºå‡½æ•°æ¥è¯´æœ‰ä¸¤ç§æ–¹å¼è°ƒç”¨ï¼Œä¸€ç§æ˜¯ç›´æ¥è°ƒç”¨ï¼Œä¸€ç§æ˜¯é€šè¿‡ <code>new</code> çš„æ–¹å¼ï¼Œæˆ‘ä»¬å…ˆæ¥è¯´ç›´æ¥è°ƒç”¨çš„æ–¹å¼<br>å¯¹äºç›´æ¥è°ƒç”¨æ¥è¯´ï¼Œè¿™é‡Œé€‰æ‹©äº† apply çš„æ–¹å¼å®ç°ï¼Œä½†æ˜¯å¯¹äºå‚æ•°éœ€è¦æ³¨æ„ä»¥ä¸‹æƒ…å†µï¼šå› ä¸º <code>bind</code> å¯ä»¥å®ç°ç±»ä¼¼è¿™æ ·çš„ä»£ç  <code>f.bind(obj, 1)(2)</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†ä¸¤è¾¹çš„å‚æ•°æ‹¼æ¥èµ·æ¥<br>æœ€åæ¥è¯´é€šè¿‡ new çš„æ–¹å¼ï¼Œå¯¹äº new çš„æƒ…å†µæ¥è¯´ï¼Œä¸ä¼šè¢«ä»»ä½•æ–¹å¼æ”¹å˜ <code>this</code>ï¼Œæ‰€ä»¥å¯¹äºè¿™ç§æƒ…å†µæˆ‘ä»¬éœ€è¦å¿½ç•¥ä¼ å…¥çš„ <code>this</code></li></ul><p><strong>ç®€æ´ç‰ˆæœ¬</strong></p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">Function.prototype.myBind = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(context, <span class="hljs-rest_arg">...outerArgs</span>)</span> </span>&#123;<br>  <span class="hljs-comment">// this-&gt;func context-&gt;obj outerArgs-&gt;[10,20]</span><br>  let self = <span class="hljs-keyword">this</span><br><br>  <span class="hljs-comment">// è¿”å›ä¸€ä¸ªå‡½æ•°</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">F</span><span class="hljs-params">(<span class="hljs-rest_arg">...innerArgs</span>)</span> </span>&#123; <span class="hljs-comment">//è¿”å›äº†ä¸€ä¸ªå‡½æ•°ï¼Œ...innerArgsä¸ºå®é™…è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°</span><br>    <span class="hljs-comment">// è€ƒè™‘newçš„æ–¹å¼</span><br>    <span class="hljs-keyword">if</span>(self <span class="hljs-keyword">instanceof</span> F) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> self(...outerArgs, ...innerArgs)<br>    &#125;<br>    <span class="hljs-comment">// æŠŠfuncæ‰§è¡Œï¼Œå¹¶ä¸”æ”¹å˜thiså³å¯</span><br>    <span class="hljs-keyword">return</span> self.apply(context, [...outerArgs, ...innerArgs]) <span class="hljs-comment">//è¿”å›æ”¹å˜äº†thisçš„å‡½æ•°ï¼Œå‚æ•°åˆå¹¶</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">// ä¾‹å­</span><br>document.body.add<span class="hljs-constructor">EventListener(&#x27;<span class="hljs-params">click</span>&#x27;, <span class="hljs-params">func</span>.<span class="hljs-params">bind</span>(<span class="hljs-params">obj</span>, 10, 20)</span>)<br><br><span class="hljs-keyword">function</span> func(params) &#123;&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š bindä¹‹åä¸èƒ½å†æ¬¡ä¿®æ”¹thisçš„æ‰§è¡Œï¼Œbindå¤šæ¬¡åæ‰§è¡Œï¼Œå‡½æ•°thisè¿˜æ˜¯æŒ‡å‘ç¬¬ä¸€æ¬¡bindçš„å¯¹è±¡</p></blockquote><h3 id="7-é˜²æŠ–ï¼ˆæ‰‹å†™ï¼‰"><a href="#7-é˜²æŠ–ï¼ˆæ‰‹å†™ï¼‰" class="headerlink" title="7. é˜²æŠ–ï¼ˆæ‰‹å†™ï¼‰"></a>7. é˜²æŠ–ï¼ˆæ‰‹å†™ï¼‰</h3><blockquote><p>é˜²æŠ–å‡½æ•°åŸç†ï¼šåœ¨äº‹ä»¶è¢«è§¦å‘nç§’åå†æ‰§è¡Œå›è°ƒï¼Œå¦‚æœåœ¨è¿™nç§’å†…åˆè¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶`</p></blockquote><p>é˜²æŠ–åŠ¨å’ŒèŠ‚æµæœ¬è´¨æ˜¯ä¸ä¸€æ ·çš„ã€‚é˜²æŠ–åŠ¨æ˜¯å°†å¤šæ¬¡æ‰§è¡Œå˜ä¸ºæœ€åä¸€æ¬¡æ‰§è¡Œï¼ŒèŠ‚æµæ˜¯å°†å¤šæ¬¡æ‰§è¡Œå˜æˆæ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œ</p><blockquote><p>eg. åƒä»¿ç™¾åº¦æœç´¢ï¼Œå°±åº”è¯¥ç”¨é˜²æŠ–ï¼Œå½“æˆ‘è¿ç»­ä¸æ–­è¾“å…¥æ—¶ï¼Œä¸ä¼šå‘é€è¯·æ±‚ï¼›å½“æˆ‘ä¸€æ®µæ—¶é—´å†…ä¸è¾“å…¥äº†ï¼Œæ‰ä¼šå‘é€ä¸€æ¬¡è¯·æ±‚ï¼›å¦‚æœå°äºè¿™æ®µæ—¶é—´ç»§ç»­è¾“å…¥çš„è¯ï¼Œæ—¶é—´ä¼šé‡æ–°è®¡ç®—ï¼Œä¹Ÿä¸ä¼šå‘é€è¯·æ±‚ã€‚</p></blockquote><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-comment">// funcæ˜¯ç”¨æˆ·ä¼ å…¥éœ€è¦é˜²æŠ–çš„å‡½æ•°</span><br><span class="hljs-comment">// waitæ˜¯ç­‰å¾…æ—¶é—´</span><br><span class="hljs-keyword">const</span> debounce = (func, wait = <span class="hljs-number">50</span>) =&gt; &#123;<br>  <span class="hljs-comment">// ç¼“å­˜ä¸€ä¸ªå®šæ—¶å™¨id</span><br>  let timer = <span class="hljs-number">0</span><br>  <span class="hljs-comment">// è¿™é‡Œè¿”å›çš„å‡½æ•°æ˜¯æ¯æ¬¡ç”¨æˆ·å®é™…è°ƒç”¨çš„é˜²æŠ–å‡½æ•°</span><br>  <span class="hljs-comment">// å¦‚æœå·²ç»è®¾å®šè¿‡å®šæ—¶å™¨äº†å°±æ¸…ç©ºä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨</span><br>  <span class="hljs-comment">// å¼€å§‹ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ï¼Œå»¶è¿Ÿæ‰§è¡Œç”¨æˆ·ä¼ å…¥çš„æ–¹æ³•</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(<span class="hljs-rest_arg">...args</span>)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (timer) clearTimeout(timer)<br>    timer = setTimeout(() =&gt; &#123;<br>      func.apply(<span class="hljs-keyword">this</span>, args)<br>    &#125;, wait)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ€»ç»“</tag>
      
      <tag>é¢ç»</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>10ä¸ªå¥½ç”¨çš„çš„cssæ¡†æ¶</title>
    <link href="/2021/09/22/10%E4%B8%AA%E5%A5%BD%E7%94%A8%E7%9A%84css%E6%A1%86%E6%9E%B6/"/>
    <url>/2021/09/22/10%E4%B8%AA%E5%A5%BD%E7%94%A8%E7%9A%84css%E6%A1%86%E6%9E%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="10ä¸ªå¥½ç”¨çš„çš„cssæ¡†æ¶"><a href="#10ä¸ªå¥½ç”¨çš„çš„cssæ¡†æ¶" class="headerlink" title="10ä¸ªå¥½ç”¨çš„çš„cssæ¡†æ¶"></a>10ä¸ªå¥½ç”¨çš„çš„cssæ¡†æ¶</h1><p>ä¼˜ç§€çš„cssæ¡†æ¶å¯ä»¥ä½¿å¼€å‘å˜å¾—æ›´åŠ å¿«é€Ÿï¼Œä¸å†ä¸ºå…¼å®¹æ€§è‹¦æ¼ï¼Œå¹¶ä¸”ä¸€èˆ¬éƒ½ä¼šæœ‰åˆç†çš„å¸ƒå±€ï¼Œä½œä¸ºå¼€å‘å¯ä»¥å‡å°‘å¯¹UIè®¾è®¡çš„æ€è€ƒã€‚è¿‘æœŸæˆ‘æ•´ç†äº†ä¸€äº›cssæ¡†æ¶ä¾›å¼€å‘è€…é€‰æ‹©å’Œä½¿ç”¨ï¼Œæ’åä¸åˆ†å…ˆåã€‚</p><h2 id="1-bootstrap"><a href="#1-bootstrap" class="headerlink" title="1.bootstrap"></a>1.bootstrap</h2><p>Bootstrapä»ç„¶æ˜¯æœ€æµè¡Œçš„ CSS æ¡†æ¶ä¹‹ä¸€ã€‚ä»–ä»¬æä¾›äº†å¤§é‡çš„æ–‡æ¡£ã€ç¤ºä¾‹å’Œæ¼”ç¤ºï¼Œå¯ä»¥å¸®ä½ å¿«é€Ÿè¿›è¡Œå“åº”å¼ Web å¼€å‘ã€‚è¯¥æ¡†æ¶çš„å½“å‰ç‰ˆæœ¬æ˜¯ Bootstrap 5ï¼Œç›¸è¾ƒäºV4ï¼Œåšå‡ºäº†ä¸€äº›æ”¹å˜ï¼š</p><ul><li>æ‹¥æœ‰äº†è‡ªå·±çš„SVGå›¾æ ‡åº“</li><li>ä¸å†æ”¯æŒjquery</li><li>ä¸å†æ”¯æŒIE</li><li>å¢åŠ äº†cssè‡ªå®šä¹‰å±æ€§</li><li>å¢å¼ºçš„ç½‘æ ¼ç³»ç»Ÿ</li><li>Formså¯è¢«æ›´æ–°</li></ul><p><img src="/img/cssLibraries/bootstrap.png" alt="bootstrap"><br>ä¼ é€é—¨ï¼š<a href="https://getbootstrap.com/">https://getbootstrap.com/</a></p><h2 id="2-tailwind"><a href="#2-tailwind" class="headerlink" title="2.tailwind"></a>2.tailwind</h2><p>Tailwind CSS æ˜¯ä¸€ä¸ªåŠŸèƒ½ç±»ä¼˜å…ˆçš„ CSS æ¡†æ¶ï¼Œå®ƒé›†æˆäº†è¯¸å¦‚<strong>flex</strong>, <strong>pt-4</strong>, <strong>text-center</strong> å’Œ <strong>rotate-90</strong> è¿™æ ·çš„çš„ç±»ï¼Œå®ƒä»¬èƒ½ç›´æ¥åœ¨è„šæœ¬æ ‡è®°è¯­è¨€ä¸­ç»„åˆèµ·æ¥ï¼Œæ„å»ºå‡ºä»»ä½•è®¾è®¡ã€‚</p><p>ä¸»è¦ç‰¹æ€§ï¼š</p><ul><li>ç»„ä»¶åŒ–</li><li>ä½“ç§¯å°ï¼Œæ€§èƒ½é«˜</li><li>å“åº”å¼</li></ul><p><img src="/img/cssLibraries/tailwindcss.png" alt="tailwind"></p><p>ä¼ é€é—¨ï¼š<a href="https://tailwindcss.com/">https://tailwindcss.com/</a></p><h2 id="3-Foundation"><a href="#3-Foundation" class="headerlink" title="3.Foundation"></a>3.Foundation</h2><p>Foundation æ˜¯ç”±äº§å“è®¾è®¡å…¬å¸ ZURB åˆ¶ä½œçš„è‡ªé€‚åº”å‰ç«¯æ¡†æ¶ã€‚<br>ç›¸æ¯”äºå…¶ä»–åŒç±»å‹å·¥å…·ï¼ŒFoundationçš„ç§»åŠ¨åŒ–æ–¹æ¡ˆæ›´åŠ å‡ºè‰²ã€‚å€Ÿé‰´å“åº”å¼Webè®¾è®¡çš„æ€è·¯å’Œæ–¹æ³•ï¼ŒFoundationå¯¹å†…å®¹ç»“æ„åœ¨ä¸åŒç±»å‹è®¾å¤‡ä¸­çš„çš„å‘ˆç°æ–¹å¼è¿›è¡Œäº†ç›¸åº”çš„é¢„è®¾ã€‚</p><p><img src="/img/cssLibraries/foundation.png" alt="foundation"></p><p>ä¼ é€é—¨ï¼š<a href="https://get.foundation/">https://get.foundation/</a></p><h2 id="4-Skeleton"><a href="#4-Skeleton" class="headerlink" title="4. Skeleton"></a>4. Skeleton</h2><p>å¦‚æœæ‚¨æ­£åœ¨ç€æ‰‹ä¸€ä¸ªè¾ƒå°çš„é¡¹ç›®ï¼Œæˆ–è€…åªæ˜¯è§‰å¾—ä¸éœ€è¦å¤§å‹æ¡†æ¶çš„æ‰€æœ‰å®ç”¨ç¨‹åºï¼Œåˆ™åº”è¯¥ä½¿ç”¨ Skeletonã€‚</p><p>åœ¨Skeleton csså®˜ç½‘ä¸­ï¼Œä»‹ç»äº†ä¸‰ä¸ªSkeletonçš„ä¸‰å¤§ä¼˜åŠ¿ï¼š</p><ul><li>Light as a feather at ~400 lines &amp; built with mobile in mind.ï¼ˆè¶…è½»é‡çº§, ä¸ºç§»åŠ¨ç«¯æ‰“é€ ï¼‰</li><li>Styles designed to be a starting point, not a UI framework.ï¼ˆæ ·å¼è®¾è®¡ä¸ºèµ·ç‚¹ï¼Œè€Œé UI æ¡†æ¶ï¼‰</li><li>Quick to start with zero compiling or installing necessary.<br>ï¼ˆå¿«é€Ÿå…¥é—¨ï¼Œé›¶ç¼–è¯‘æˆ–å®‰è£…å¿…è¦ï¼‰</li></ul><p>æ ¹æ®Skeletonçš„ç‰¹ç‚¹å’Œä¼˜åŠ¿ï¼Œå¯ä»¥æŠŠå®ƒçš„å…¸å‹åº”ç”¨åœºæ™¯å½’çº³ä¸ºï¼š</p><ul><li>csså­¦ä¹ å’Œdemoç»ƒä¹ ï¼›</li><li>åˆ›å»ºå°å‹çš„å“åº”å¼æ‰‹æœºåº”ç”¨ï¼›</li></ul><p><img src="/img/cssLibraries/skeleton.png" alt="skeleton"></p><p>ä¼ é€é—¨ï¼š<a href="http://getskeleton.com/">http://getskeleton.com/</a></p><h2 id="5-Tachyons"><a href="#5-Tachyons" class="headerlink" title="5.Tachyons"></a>5.Tachyons</h2><p>Tachyonså…·å¤‡äº†å½“å‰æµè¡Œçš„cssæ¡†æ¶çš„ä¼˜ç‚¹ï¼Œæ— éœ€è‡ªå·±ç¼–å†™å¤§é‡ CSSã€‚è½»é‡ã€å¯å®šåˆ¶åŒ–å’Œæ‹“å±•ç­‰ã€‚Tachyonsæœ‰æå…¶ç»†åŒ–çš„åŸå­ç±»ï¼Œåªéœ€è¦åœ¨ç±»åä¸­æ·»åŠ å±æ€§æ–°çš„æ ·å¼å³å¯ã€‚ä¸å¿…æ‹…å¿ƒå‘½åå†²çªï¼Œä¹Ÿæ— éœ€æ‹…å¿ƒæ ·å¼è¦†ç›–ï¼Œè¿™æ ·å¯ä»¥æ›´èƒ½ç›´è§‚çš„çœ‹å‡ºæ ·å¼çš„å…·ä½“å†…å®¹ã€‚</p><p><img src="/img/cssLibraries/tachyons.png" alt="tachyons"></p><p>ä¼ é€é—¨ï¼š<a href="https://tachyons.io/">https://tachyons.io/</a></p><h2 id="6-UIkit"><a href="#6-UIkit" class="headerlink" title="6.UIkit"></a>6.UIkit</h2><p>ç›¸è¾ƒäºå…¶ä»–é€šç”¨çš„cssæ¡†æ¶ï¼ŒUIkitæœ‰ä¸€äº›è¿™äº›æ¡†æ¶æ²¡æœ‰çš„ç»„ä»¶ï¼Œæ¯”å¦‚</p><ul><li>Lightboxï¼ˆåˆ©ç”¨æ¨¡æ€å¯¹è¯æ¡†ä¸ºå›¾ç‰‡å’Œè§†é¢‘åˆ›å»ºä¸€ä¸ªåˆ«è‡´çš„ç¯ç®±ï¼‰</li><li>Parallaxï¼ˆä¾èµ–äºé¡µé¢æ»šåŠ¨æ¡ä½ç½®çš„åŠ¨æ€ CSS ç‰¹æ€§ï¼‰</li><li>Nestableï¼ˆåˆ›å»ºå¯ä»¥é€šè¿‡æ‹–æ‹½æ’åºçš„å¯åµŒå¥—å¼åˆ—è¡¨ï¼‰</li><li>Sortableï¼ˆåˆ›å»ºå¯æ’åºçš„ç½‘æ ¼å’Œåˆ—è¡¨é‡æ–°æ¥æ’åˆ—å…ƒç´ çš„é¡ºåºï¼‰</li><li>â€¦</li></ul><p><img src="/img/cssLibraries/uikit.png" alt="uikit"></p><p>ä¼ é€é—¨ï¼š<a href="https://getuikit.com/">https://getuikit.com/</a></p><h2 id="7-Semantic-UI"><a href="#7-Semantic-UI" class="headerlink" title="7.Semantic UI"></a>7.Semantic UI</h2><p>Semanticæ„ä¸ºè¯­ä¹‰ï¼Œç”±äºSemantic UIç±»åœ¨å‘½åä¸Šæ¸…æ™°æ˜“æ‡‚ï¼Œå› æ­¤å¼€å‘äººå‘˜ä¸ä½†èŠ‚çœäº†å­¦ä¹ çš„æ—¶é—´ï¼Œä¹Ÿè®©æ‰‹å¤´ä¸Šé¡¹ç›®çš„å¼€å‘æ›´å¿«ã€æ›´ç›´è§‚ã€‚æ­¤å¤–å¸ƒå±€çš„å¤šæ ·æ€§æ˜¯Semantic UIçš„å¦ä¸€ä¸ªä¼˜åŠ¿ã€‚é€šè¿‡ä¸åŒçš„ä¸»é¢˜ï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°ä¸ºå„ç§é¡¹ç›®æ‰¾åˆ°å¿…è¦çš„ç»„ä»¶ã€‚</p><p>Semantic UIå­˜åœ¨ä¸€äº›ç¼ºç‚¹ï¼Œæ›´æ–°é¢‘ç‡ç›¸è¾ƒäºå…¶ä»–çƒ­é—¨æ¡†æ¶è¾ƒä½ï¼Œå¹¶ä¸”åœ¨æŸäº›è®¾å¤‡è¿è¡Œå“åº”èƒ½åŠ›ä¸€èˆ¬ã€‚</p><p><img src="/img/cssLibraries/semantic.png" alt="semantic"></p><p>ä¼ é€é—¨ï¼š<a href="https://semantic-ui.com/">https://semantic-ui.com/</a></p><h2 id="8-Bulma"><a href="#8-Bulma" class="headerlink" title="8.Bulma"></a>8.Bulma</h2><p>Bulma æ˜¯ä¸€ä¸ªåŸºäº Flexbox çš„ç°ä»£åŒ–çš„ CSS æ¡†æ¶ã€‚å®ƒæä¾›äº†éšæ—¶å¯ç”¨çš„å‰ç«¯ç»„ä»¶ï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°ç»„åˆè¿™äº›ç»„ä»¶æ¥æ„å»ºå“åº”å¼ Web ç•Œé¢ã€‚</p><p><img src="/img/cssLibraries/bulma.png" alt="bulma"></p><p>å’Œbootstrapç›¸æ¯”ï¼Œä¸¤è€…æœ€å¤§çš„åŒºåˆ«æ˜¯ï¼Œbulmaæ˜¯çº¯cssï¼Œæ²¡æœ‰jsï¼Œbootstrapæœ‰JSã€‚è¿™é‡Œä¸¾ä¸ª<strong>åˆ—å¸ƒå±€</strong>çš„ä¾‹å­ï¼š</p><ol><li>æ·»åŠ <code>columns</code>å®¹å™¨</li><li>æ·»åŠ ä»»æ„æ•°é‡çš„<code>column</code>å…ƒç´ </li></ol><p>æ— è®ºåˆ—æ•°æ˜¯å¤šå°‘ï¼Œæ¯ä¸€åˆ—çš„<strong>å®½åº¦</strong>éƒ½<strong>ç›¸ç­‰</strong>ã€‚</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">&lt;div <span class="hljs-keyword">class</span>=&quot;<span class="hljs-symbol">columns</span>&quot;&gt;<br>  &lt;<span class="hljs-symbol">div</span> <span class="hljs-symbol">class</span>=&quot;<span class="hljs-symbol">column</span>&quot;&gt;<span class="hljs-symbol">1</span>&lt;/<span class="hljs-symbol">div</span>&gt;<br>  &lt;<span class="hljs-symbol">div</span> <span class="hljs-symbol">class</span>=&quot;<span class="hljs-symbol">column</span>&quot;&gt;<span class="hljs-symbol">2</span>&lt;/<span class="hljs-symbol">div</span>&gt;<br>  &lt;<span class="hljs-symbol">div</span> <span class="hljs-symbol">class</span>=&quot;<span class="hljs-symbol">column</span>&quot;&gt;<span class="hljs-symbol">3</span>&lt;/<span class="hljs-symbol">div</span>&gt;<br>  &lt;<span class="hljs-symbol">div</span> <span class="hljs-symbol">class</span>=&quot;<span class="hljs-symbol">column</span>&quot;&gt;<span class="hljs-symbol">4</span>&lt;/<span class="hljs-symbol">div</span>&gt;<br>  &lt;<span class="hljs-symbol">div</span> <span class="hljs-symbol">class</span>=&quot;<span class="hljs-symbol">column</span>&quot;&gt;<span class="hljs-symbol">5</span>&lt;/<span class="hljs-symbol">div</span>&gt;<br>&lt;/<span class="hljs-symbol">div</span>&gt;<br></code></pre></td></tr></table></figure><p>ä¼ é€é—¨ï¼š<a href="https://bulma.io/">https://bulma.io/</a></p><h2 id="9-Picnic"><a href="#9-Picnic" class="headerlink" title="9.Picnic"></a>9.Picnic</h2><p>Picnicæ˜¯ä¸€ä¸ªè½»é‡çº§CSSæ¡†æ¶ï¼Œå‹ç¼©åçš„å¤§å°ä¸åˆ°10kbã€‚è¯¥æ¡†æ¶æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å…·æœ‰å¤šä¸ªäº¤äº’å¼ç»„ä»¶ï¼ŒåŒ…æ‹¬æ …æ ¼ã€è¡¨å•ã€é€‰é¡¹å¡ã€å·¥å…·æç¤ºç­‰ç­‰ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜å¿«é€Ÿåˆ›å»ºå“åº”å¼ç½‘ç«™å’Œwebåº”ç”¨ç¨‹åºã€‚</p><p>Picnic CSSæ˜¯ä¸€ä¸ªç”¨<strong>Sass</strong>å†™çš„è½»é‡çº§UIæ¡†æ¶ï¼Œå®ƒèƒ½æ›´å®¹æ˜“çš„ç¼–è¾‘å’Œè‡ªå®šä¹‰å˜é‡ï¼Œå¦‚é¢œè‰²å’Œé•¿åº¦ã€‚å®ƒè¿˜æœ‰ä¸€äº›ä¸é”™çš„çº¯CSSå†™çš„UIç»„ä»¶ï¼Œå¦‚æ¨¡æ€çª—å£å’Œå†…å®¹æ»‘å—ã€‚ </p><p><img src="/img/cssLibraries/picnicss.png" alt="picnicss"></p><p>ä¼ é€é—¨ï¼š<a href="https://picnicss.com/">https://picnicss.com/</a></p><h2 id="10-NES-css"><a href="#10-NES-css" class="headerlink" title="10.NES.css"></a>10.NES.css</h2><p>NES.css æ¨¡ä»¿äº†8 ä½ Nintendo Entertainment System å›¾å½¢ï¼Œè¥é€ å‡ºå¤å¤çš„æ¸¸æˆå¤–è§‚ï¼š</p><p>NES.css åªéœ€è¦ CSSï¼Œä¸ä¾èµ–ä»»ä½• JavaScriptã€‚ä½œä¸ºæ¯ä¸ªæ¸¸æˆå‘çƒ§å‹éƒ½ä¼šå¤§å‘¼ï¼šçˆ±äº†ï¼</p><p><img src="/img/cssLibraries/NES.png" alt="NES"></p><p>ä¼ é€é—¨ï¼š<a href="https://nostalgic-css.github.io/NES.css/">https://nostalgic-css.github.io/NES.css/</a></p><p>GitHubï¼š<a href="https://github.com/nostalgic-css/NES.css">https://github.com/nostalgic-css/NES.css</a></p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ€»ç»“</tag>
      
      <tag>css</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>gitå‘½ä»¤</title>
    <link href="/2021/08/30/git%E5%91%BD%E4%BB%A4/"/>
    <url>/2021/08/30/git%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h3 id="macæ“ä½œï¼Œä¸åˆ†å…ˆåé¡ºåº"><a href="#macæ“ä½œï¼Œä¸åˆ†å…ˆåé¡ºåº" class="headerlink" title="macæ“ä½œï¼Œä¸åˆ†å…ˆåé¡ºåº"></a>macæ“ä½œï¼Œä¸åˆ†å…ˆåé¡ºåº</h3><p>sudo ä»¥ç®¡ç†å‘˜èº«ä»½æ‰§è¡Œ<br>vim æ‰“å¼€ç¼–è¾‘å™¨  :wq ä¿å­˜å¹¶é€€å‡º<br>catï¼ˆè‹±æ–‡å…¨æ‹¼ï¼šconcatenateï¼‰å‘½ä»¤ç”¨äºè¿æ¥æ–‡ä»¶å¹¶æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ä¸Šã€‚<br>source<br>rm -rf [æ–‡ä»¶å] åˆ é™¤æ–‡ä»¶</p><p>ä½¿ç”¨æ–°ç”µè„‘ï¼Œéœ€è¦å’Œè¿œç¨‹GitHubè¿›è¡Œè¿æ¥ï¼Œè¿™æ—¶å€™éœ€è¦sshè¿›è¡Œé€šä¿¡ï¼Œè®¾ç½®æ­¥éª¤ä¸º</p><ol><li>æ£€æŸ¥ssh keys æ˜¯å¦å­˜åœ¨<br>è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼Œå¦‚æœæœ‰æ–‡ä»¶id_rsa.pub æˆ– id_dsa.pubï¼Œåˆ™ç›´æ¥è¿›å…¥æ­¥éª¤3å°†SSH keyæ·»åŠ åˆ°GitHubä¸­ï¼Œå¦åˆ™è¿›å…¥ç¬¬äºŒæ­¥ç”ŸæˆSSH key<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-keyword">ls</span> -al ~<span class="hljs-string">/.ssh</span><br><span class="hljs-comment"># Lists the files in your .ssh directory, if they exist</span><br></code></pre></td></tr></table></figure></li><li>ç”Ÿæˆæ–°çš„ssh key<br>åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥<strong>ssh-keygen -t rsa -C â€œ<a href="mailto:&#x79;&#111;&#117;&#x72;&#x5f;&#x65;&#109;&#97;&#105;&#x6c;&#x40;&#101;&#120;&#x61;&#109;&#112;&#108;&#101;&#x2e;&#x63;&#111;&#109;">&#x79;&#111;&#117;&#x72;&#x5f;&#x65;&#109;&#97;&#105;&#x6c;&#x40;&#101;&#120;&#x61;&#109;&#112;&#108;&#101;&#x2e;&#x63;&#111;&#109;</a>â€œ</strong></li><li>å°†ssh keyæ·»åŠ åˆ°GitHubä¸­<br>ç”¨è‡ªå·±å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€id_rsa.pubæ–‡ä»¶ï¼Œé‡Œé¢çš„ä¿¡æ¯å³ä¸ºSSH keyï¼Œå°†è¿™äº›ä¿¡æ¯å¤åˆ¶åˆ°GitHubçš„Add SSH keyé¡µé¢å³å¯</li></ol><p>ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œå‡æœ‰ä¸€äº›å‘½ä»¤ï¼Œç›´æ¥å°†SSH keyä»æ–‡ä»¶æ‹·è´åˆ°ç²˜è´´æ¿ä¸­ï¼Œå¦‚ä¸‹ï¼š<br>mac: </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">pbcopy &lt; ~<span class="hljs-regexp">/.ssh/i</span>d_rsa.pub<br><span class="hljs-comment"># Copies the contents of the id_rsa.pub file to your clipboard</span><br></code></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨vimç¼–è¾‘</p><p>vim /etc/hosts<br>ç»‘å®šåŸŸå</p><p>nvmç¯å¢ƒå˜é‡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> NVM_DIR=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.nvm&quot;</span><br>[ -s <span class="hljs-string">&quot;<span class="hljs-variable">$NVM_DIR</span>/nvm.sh&quot;</span> ] &amp;&amp; \. <span class="hljs-string">&quot;<span class="hljs-variable">$NVM_DIR</span>/nvm.sh&quot;</span>  <span class="hljs-comment"># This loads nvm</span><br>[ -s <span class="hljs-string">&quot;<span class="hljs-variable">$NVM_DIR</span>/bash_completion&quot;</span> ] &amp;&amp; \. <span class="hljs-string">&quot;<span class="hljs-variable">$NVM_DIR</span>/bash_completion&quot;</span>  <span class="hljs-comment"># This loads nvm bash_completion</span><br><span class="hljs-built_in">alias</span> ll=<span class="hljs-string">&#x27;ls -alF&#x27;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ€»ç»“ä¸€ä¸‹è‡ªå·±å¯¹promiseçš„ç†è§£</title>
    <link href="/2021/08/23/%E6%80%BB%E7%BB%93%E4%B8%80%E4%B8%8B%E8%87%AA%E5%B7%B1%E5%AF%B9promise%E7%9A%84%E7%90%86%E8%A7%A3/"/>
    <url>/2021/08/23/%E6%80%BB%E7%BB%93%E4%B8%80%E4%B8%8B%E8%87%AA%E5%B7%B1%E5%AF%B9promise%E7%9A%84%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>å­¦ä¹ æœ¬èº«æ˜¯æ¯”è¾ƒæ¯ç‡¥çš„ï¼Œä¸ªäººè®¤ä¸ºæœ€å¤§çš„å¤–å› æ˜¯å½“ä¸‹æ²¡æœ‰éœ€æ±‚å»è·å–çŸ¥è¯†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æ‰“æ¸¸æˆè¢«å¯¹é¢æ€çˆ†äº†ï¼Œè¢«ç«™åœ¨æ³‰æ°´é—¨å£å µç€æ€ğŸ˜¥ï¼Œå¿ƒæ€å´©äº†ï¼Œå°±æƒ³å›è¿‡å¤´æ¥ç»ƒå¥½æ€å´©æˆ‘çš„è¿™ä¸ªè‹±é›„ï¼ŒæŠ‘æˆ–çœ‹ä¸Šäº†ä»Šå¤©æ™šä¸Šæ¸¸æ³³æ—¶å€™åœ¨éš”å£æ³³é“å®›è‹¥æ¸¸é¾™çš„å¦¹å­ï¼Œä¸çŸ¥é“å¦‚ä½•æ­è®ªä¾¿å‡†å¤‡å¥½å¥½ç»ƒä¹ æ¸¸æ³³ï¼Œå¹»æƒ³ç€æœ‰æœºä¼šå»å’Œå¦¹å­è¯´å¥è¯~(ç„¶è€Œå½“æˆ‘ç»ƒæˆäº†ï¼Œå†ä¹Ÿæ²¡è§è¿‡è¿™ä¸ªå¦¹å­äº†ã€‚ã€‚ã€‚)</p><p>å½“æˆ‘æƒ³å»å­¦ä¸€ä¸ªä¸œè¥¿çš„æ—¶å€™ï¼Œé‡åˆ°çš„ç¬¬ä¸€ä¸ªå›°å¢ƒå°±æ˜¯ä¸çŸ¥é“è¿™ä¸ªä¸œè¥¿æœ‰ä»€ä¹ˆç”¨ï¼Œå­¦äº†ä¹‹åä¼šç»™è‡ªå·±å¸¦æ¥å¤šå°‘æå‡ï¼Œç¡¬ç€å¤´çš®æ‰“å¼€æ–‡æ¡£ï¼Œä¸€çœ‹å¥½é•¿ï¼Œå°±ç¬é—´ä¸æƒ³å­¦äº†ã€‚åé¢é‡åˆ°è¿™ä¸ªä¸œè¥¿çš„é¢‘ç‡è¶Šæ¥è¶Šé«˜ï¼Œè€Œä¸å¾—ä¸å»äº†è§£è¿™ä¸ªä¸œè¥¿çš„æ—¶å€™ï¼Œè¿™ä¸ªæ½œåœ¨å…³ç³»å°±ç»“åˆèµ·æ¥äº†ï¼Œå› ä¸º<strong>éœ€è¦</strong>æ‰€ä»¥<strong>é‡è¦</strong>ã€‚</p><h2 id="promiseè§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#promiseè§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="promiseè§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>promiseè§£å†³äº†ä»€ä¹ˆé—®é¢˜</h2><p>åœ¨ä¼ ç»Ÿçš„å¼‚æ­¥ç¼–ç¨‹ä¸­ï¼Œå¦‚æœå¼‚æ­¥ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œå°±éœ€è¦é€šè¿‡å±‚å±‚åµŒå¥—å›è°ƒçš„æ–¹å¼æ»¡è¶³è¿™ç§ä¾èµ–ï¼Œå¦‚æœåµŒå¥—å±‚æ•°è¿‡å¤šï¼Œå¯è¯»æ€§å’Œå¯ä»¥ç»´æŠ¤æ€§éƒ½ä¼šå˜å¾—å¾ˆå·®ï¼Œäº§ç”Ÿæ‰€è°“çš„â€œå›è°ƒåœ°ç‹±â€ï¼Œè€Œ Promise <strong>å°†åµŒå¥—è°ƒç”¨æ”¹ä¸ºé“¾å¼è°ƒç”¨</strong>ï¼Œå¢åŠ äº†å¯é˜…è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒPromise è§£å†³çš„æ˜¯<strong>å¼‚æ­¥ç¼–ç é£æ ¼</strong>çš„é—®é¢˜ã€‚</p><h2 id="promiseå’Œasync-await"><a href="#promiseå’Œasync-await" class="headerlink" title="promiseå’Œasync|await"></a>promiseå’Œasync|await</h2><p>æˆ‘å‰ç«¯è°ƒç”¨æ¥å£çš„æ—¶å€™ï¼Œå¾€å¾€éƒ½æ˜¯ä½¿ç”¨çš„éƒ½æ˜¯promiseå¯¹è±¡ã€‚æŸ¥çœ‹è°ƒç”¨æ¥å£çš„ç±»å‹æ ‡æ³¨ï¼Œçœ‹åˆ°æ˜¯promiseå¯¹è±¡ï¼Œè€Œæˆ‘æŠŠasyncå»æ‰ï¼Œå½“å‰å‡½æ•°çš„ç±»å‹å°±ä¸æ˜¯promiseäº†ï¼Œasyncå’Œpromiseè‚¯å®šæ˜¯æœ‰å…³ç³»çš„ã€‚æŸ¥äº†ä¸€ä¸‹ç›¸å…³èµ„æ–™ï¼Œget</p><p>ç›¸åŒç‚¹ï¼š</p><ul><li>éƒ½æ˜¯è§£å†³å¼‚æ­¥æµç¨‹é—®é¢˜</li></ul><p>ä¸åŒç‚¹ï¼š</p><ul><li>Promiseæ˜¯es6é‡Œçš„ï¼Œasyncæ˜¯es7ã€‚</li><li>Promiseé“¾å¼æ“ä½œï¼Œè‡ªå·±catchå¼‚å¸¸ã€‚asyncåˆ™è¦åœ¨å‡½æ•°å†…catchã€‚</li><li>Promiseæœ‰å¾ˆå¤šå¹¶è¡Œç¥å™¨ï¼Œæ¯”å¦‚Promise.all\Promise.allSettled\Promise.raceç­‰ã€‚è¿™äº›æ˜¯asyncæ²¡æ³•æå®šçš„</li><li>Promiseæ˜¯æ˜¾å¼çš„å¼‚æ­¥ï¼Œè€ŒAsync/await è®©ä½ çš„ä»£ç çœ‹èµ·æ¥æ˜¯åŒæ­¥çš„ï¼Œä½ ä¾ç„¶éœ€è¦æ³¨æ„å¼‚æ­¥ã€‚</li><li>Promiseå³ä½¿ä¸æ”¯æŒes6ï¼Œä»ç„¶å¯ä»¥ç”¨promiseçš„åº“æˆ–polyfillï¼Œè€Œasyncå°±å¾ˆéš¾åšã€‚</li></ul><h2 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h2><p>å’Œpromiseã€asyncã€awaitç›¸æ¯”ï¼Œæˆ‘åŸºæœ¬ä¸Šå¾ˆå°‘ç”¨ä»–ï¼Œç†è§£ä¸æ˜¯å¾ˆæ·±ï¼Œä¸‹é¢åªå†™ä¸€äº›åŸºæœ¬ä»‹ç»ã€‚</p><p>Generator æ˜¯ES6å¼•å…¥çš„æ–°è¯­æ³•ï¼ŒGeneratoræ˜¯ä¸€ä¸ªå¯ä»¥æš‚åœå’Œç»§ç»­æ‰§è¡Œçš„å‡½æ•°ã€‚</p><p>ç®€å•çš„ç”¨æ³•ï¼Œå¯ä»¥å½“åšä¸€ä¸ªIteratoræ¥ç”¨ï¼Œè¿›è¡Œä¸€äº›éå†æ“ä½œã€‚å¤æ‚ä¸€äº›çš„ç”¨æ³•ï¼Œä»–å¯ä»¥åœ¨å†…éƒ¨ä¿å­˜ä¸€äº›çŠ¶æ€ï¼Œæˆä¸ºä¸€ä¸ªçŠ¶æ€æœºã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-built_in">Generator</span> åŸºæœ¬è¯­æ³•åŒ…å«ä¸¤éƒ¨åˆ†ï¼šå‡½æ•°åå‰è¦åŠ ä¸€ä¸ªæ˜Ÿå·ï¼›å‡½æ•°å†…éƒ¨ç”¨ <span class="hljs-keyword">yield</span> å…³é”®å­—è¿”å›å€¼ã€‚<br></code></pre></td></tr></table></figure><ul><li><p>yieldï¼Œè¡¨è¾¾å¼æœ¬èº«æ²¡æœ‰è¿”å›å€¼ï¼Œæˆ–è€…è¯´æ€»æ˜¯è¿”å›undefinedã€‚</p></li><li><p>nextï¼Œæ–¹æ³•å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å°±ä¼šè¢«å½“ä½œä¸Šä¸€ä¸ªyieldè¡¨è¾¾å¼çš„è¿”å›å€¼ã€‚</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> * <span class="hljs-title">foo</span>(<span class="hljs-params">x</span>) </span>&#123;<br><br>    <span class="hljs-keyword">var</span> y = <span class="hljs-number">2</span> * (<span class="hljs-keyword">yield</span> (x + <span class="hljs-number">1</span>));<br><br>    <span class="hljs-keyword">var</span> z = <span class="hljs-keyword">yield</span> (y / <span class="hljs-number">3</span>);<br><br>    <span class="hljs-keyword">return</span> (x + y + z);<br><br>&#125;<br><br><span class="hljs-keyword">var</span> b = foo(<span class="hljs-number">5</span>); <br><br>b.next() <span class="hljs-comment">// &#123; value:6, done:false &#125;</span><br><br>b.next(<span class="hljs-number">12</span>) <span class="hljs-comment">// &#123; value:8, done:false &#125; </span><br><br>b.next(<span class="hljs-number">13</span>) <span class="hljs-comment">// &#123; value:42, done:true &#125;</span><br><br></code></pre></td></tr></table></figure><h2 id="ç„¶åå†è¯´ä¸€ä¸‹è‡ªå·±å¯¹promiseçš„åŸºæœ¬ç†è§£"><a href="#ç„¶åå†è¯´ä¸€ä¸‹è‡ªå·±å¯¹promiseçš„åŸºæœ¬ç†è§£" class="headerlink" title="ç„¶åå†è¯´ä¸€ä¸‹è‡ªå·±å¯¹promiseçš„åŸºæœ¬ç†è§£"></a>ç„¶åå†è¯´ä¸€ä¸‹è‡ªå·±å¯¹promiseçš„åŸºæœ¬ç†è§£</h2><ul><li><p>ä¾ç…§<strong>Promise/A+<strong>çš„å®šä¹‰ï¼Œ</strong>Promise</strong>æœ‰å››ç§çŠ¶æ€ï¼š</p><p>  <strong>pending</strong>: åˆå§‹çŠ¶æ€, é <strong>fulfilled</strong> æˆ– <strong>rejected</strong>.</p><p>  <strong>fulfilled</strong>: æˆåŠŸçš„æ“ä½œ.</p><p>  <strong>rejected</strong>: å¤±è´¥çš„æ“ä½œ.</p><p>  <strong>settled</strong>: Promiseå·²è¢«<strong>fulfilled</strong>æˆ–<strong>rejected</strong>ï¼Œä¸”ä¸æ˜¯<strong>pending</strong></p><p>è¡¥å……ä¸€ä¸‹ï¼Œpromiseçš„A+å®šä¹‰ï¼š</p><ol><li><p>ä¸€ä¸ªpromiseçš„å½“å‰çŠ¶æ€åªèƒ½æ˜¯pendingã€fulfilledå’Œrejectedä¸‰ç§ä¹‹ä¸€ã€‚çŠ¶æ€æ”¹å˜åªèƒ½æ˜¯pendingåˆ°fulfilledæˆ–è€…pendingåˆ°rejectedã€‚çŠ¶æ€æ”¹å˜ä¸å¯é€†ã€‚</p></li><li><p>promiseçš„thenæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼Œè¡¨ç¤ºè¯¥promiseçŠ¶æ€æ”¹å˜æ—¶çš„å›è°ƒ(promise.then(onFulfilled, onRejected))ã€‚thenæ–¹æ³•è¿”å›ä¸€ä¸ªpromiseï¼Œthen æ–¹æ³•å¯ä»¥è¢«åŒä¸€ä¸ª promise è°ƒç”¨å¤šæ¬¡ã€‚</p></li></ol></li></ul><ul><li><p>å¦å¤–ï¼Œ fulfilledä¸ rejectedä¸€èµ·åˆç§° settled</p></li><li><p>Promise å¯¹è±¡ç”¨æ¥è¿›è¡Œå»¶è¿Ÿ(deferred) å’Œå¼‚æ­¥(asynchronous) è®¡ç®—</p></li></ul><p><strong>promiseåªæ˜¯ç”¨æ¥è§£å†³å¼‚æ­¥è®¡ç®—çš„ä¸€ç§æ–¹æ³•ï¼Œå’Œè°ƒç”¨æ¥å£æ²¡æœ‰ç›´æ¥çš„å¿…ç„¶å…³ç³»ï¼Œåº”è¯¥åè¿‡æ¥è¯´ï¼Œè°ƒç”¨æ¥å£éœ€è¦ä½¿ç”¨promiseæ¥è§£å†³å¼‚æ­¥çš„é—®é¢˜ï¼Œå¯èƒ½æ¥å£è°ƒç”¨å°è£…äº†å¤šå±‚ï¼Œè‡ªå·±æ²¡æœ‰æŸ¥åˆ°æœ€åº•å±‚çš„æºç ã€‚</strong></p><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>å…‰è¯´ä¸ç»ƒå‡æŠŠå¼ï¼Œç›´æ¥ä¸Šé¢˜ã€‚</p><h3 id="1-Promiseçš„å‡ é“åŸºç¡€é¢˜"><a href="#1-Promiseçš„å‡ é“åŸºç¡€é¢˜" class="headerlink" title="1. Promiseçš„å‡ é“åŸºç¡€é¢˜"></a>1. Promiseçš„å‡ é“åŸºç¡€é¢˜</h3><h4 id="1-1-é¢˜ç›®ä¸€"><a href="#1-1-é¢˜ç›®ä¸€" class="headerlink" title="1.1 é¢˜ç›®ä¸€"></a>1.1 é¢˜ç›®ä¸€</h4><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">const promise1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">(resolve, reject)</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;promise1&#x27;</span>)<br>&#125;)<br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;1&#x27;</span>, promise1);<br></code></pre></td></tr></table></figure><ul><li>ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆé‡åˆ°new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­çš„ä»£ç promise1</li><li>ç„¶åæ‰§è¡ŒåŒæ­¥ä»£ç 1ï¼Œæ­¤æ—¶promise1æ²¡æœ‰è¢«resolveæˆ–è€…rejectï¼Œå› æ­¤çŠ¶æ€è¿˜æ˜¯pending</li></ul><h4 id="1-2-é¢˜ç›®äºŒ"><a href="#1-2-é¢˜ç›®äºŒ" class="headerlink" title="1.2 é¢˜ç›®äºŒ"></a>1.2 é¢˜ç›®äºŒ</h4><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">const promise = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">(resolve, reject)</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>);<br>  resolve(<span class="hljs-string">&#x27;success&#x27;</span>)<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>);<br>&#125;);<br>promise.<span class="hljs-keyword">then</span>(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">3</span>);<br>&#125;);<br><span class="hljs-built_in">console</span>.log(<span class="hljs-number">4</span>);<br></code></pre></td></tr></table></figure><ul><li>ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆé‡åˆ°new Promiseï¼Œæ‰§è¡Œå…¶ä¸­çš„åŒæ­¥ä»£ç 1</li><li>å†é‡åˆ°resolve(â€˜successâ€™)ï¼Œ å°†promiseçš„çŠ¶æ€æ”¹ä¸ºäº†resolvedå¹¶ä¸”å°†å€¼ä¿å­˜ä¸‹æ¥</li><li>ç»§ç»­æ‰§è¡ŒåŒæ­¥ä»£ç 2</li><li>è·³å‡ºpromiseï¼Œå¾€ä¸‹æ‰§è¡Œï¼Œç¢°åˆ°promise.thenè¿™ä¸ªå¾®ä»»åŠ¡ï¼Œå°†å…¶åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</li><li>æ‰§è¡ŒåŒæ­¥ä»£ç 4</li><li>æœ¬è½®å®ä»»åŠ¡å…¨éƒ¨æ‰§è¡Œå®Œæ¯•ï¼Œæ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå‘ç°promise.thenè¿™ä¸ªå¾®ä»»åŠ¡ä¸”çŠ¶æ€ä¸ºresolvedï¼Œæ‰§è¡Œå®ƒã€‚</li></ul><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">4</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h4 id="1-3-é¢˜ç›®ä¸‰"><a href="#1-3-é¢˜ç›®ä¸‰" class="headerlink" title="1.3 é¢˜ç›®ä¸‰"></a>1.3 é¢˜ç›®ä¸‰</h4><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">const promise = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">(resolve, reject)</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>);<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>);<br>&#125;);<br>promise.<span class="hljs-keyword">then</span>(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">3</span>);<br>&#125;);<br><span class="hljs-built_in">console</span>.log(<span class="hljs-number">4</span>);<br></code></pre></td></tr></table></figure><ul><li><p>å’Œé¢˜ç›®äºŒç›¸ä¼¼ï¼Œåªä¸è¿‡åœ¨promiseä¸­å¹¶æ²¡æœ‰resolveæˆ–è€…reject</p></li><li><p>å› æ­¤promise.thenå¹¶ä¸ä¼šæ‰§è¡Œï¼Œå®ƒåªæœ‰åœ¨è¢«æ”¹å˜äº†çŠ¶æ€ä¹‹åæ‰ä¼šæ‰§è¡Œã€‚</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><h4 id="1-4-é¢˜ç›®å››"><a href="#1-4-é¢˜ç›®å››" class="headerlink" title="1.4 é¢˜ç›®å››"></a>1.4 é¢˜ç›®å››</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> promise1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;promise1&#x27;</span>)<br>  resolve(<span class="hljs-string">&#x27;resolve1&#x27;</span>)<br>&#125;)<br><span class="hljs-keyword">const</span> promise2 = promise1.then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(res)<br>&#125;)<br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;1&#x27;</span>, promise1);<br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;2&#x27;</span>, promise2);<br></code></pre></td></tr></table></figure></li><li><p>ä»ä¸Šè‡³ä¸‹ï¼Œå…ˆé‡åˆ°new Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­çš„ä»£ç promise1</p></li><li><p>ç¢°åˆ°resolveå‡½æ•°, å°†promise1çš„çŠ¶æ€æ”¹å˜ä¸ºresolved, å¹¶å°†ç»“æœä¿å­˜ä¸‹æ¥</p></li><li><p>ç¢°åˆ°promise1.thenè¿™ä¸ªå¾®ä»»åŠ¡ï¼Œå°†å®ƒæ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</p></li><li><p>promise2æ˜¯ä¸€ä¸ªæ–°çš„çŠ¶æ€ä¸ºpendingçš„Promise`</p></li><li><p>æ‰§è¡ŒåŒæ­¥ä»£ç 1ï¼Œ åŒæ—¶æ‰“å°å‡ºpromise1çš„çŠ¶æ€æ˜¯resolved</p></li><li><p>æ‰§è¡ŒåŒæ­¥ä»£ç 2ï¼ŒåŒæ—¶æ‰“å°å‡ºpromise2çš„çŠ¶æ€æ˜¯pending</p></li><li><p>å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼ŒæŸ¥æ‰¾å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå‘ç°promise1.thenè¿™ä¸ªå¾®ä»»åŠ¡ä¸”çŠ¶æ€ä¸ºresolvedï¼Œæ‰§è¡Œå®ƒã€‚</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-string">&#x27;promise1&#x27;</span><br><span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-built_in">Promise</span>&#123;&lt;resolved&gt;: <span class="hljs-string">&#x27;resolve1&#x27;</span>&#125;<br><span class="hljs-string">&#x27;2&#x27;</span> <span class="hljs-built_in">Promise</span>&#123;&lt;pending&gt;&#125;<br><span class="hljs-string">&#x27;resolve1&#x27;</span><br></code></pre></td></tr></table></figure><h4 id="1-5-é¢˜ç›®äº”"><a href="#1-5-é¢˜ç›®äº”" class="headerlink" title="1.5 é¢˜ç›®äº”"></a>1.5 é¢˜ç›®äº”</h4><figure class="highlight zephir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs zephir"><span class="hljs-keyword">const</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> = <span class="hljs-params">()</span> =&gt; <span class="hljs-params">(<span class="hljs-keyword">new</span> Promise<span class="hljs-params">(<span class="hljs-params">(resolve, reject)</span> =&gt; &#123;</span></span></span><br><span class="hljs-params"><span class="hljs-params"><span class="hljs-function">  console.log<span class="hljs-params">(<span class="hljs-number">1</span>)</span>;</span></span></span><br><span class="hljs-params"><span class="hljs-params"><span class="hljs-function">  resolve<span class="hljs-params">(<span class="hljs-string">&#x27;success&#x27;</span>)</span></span></span></span><br><span class="hljs-params"><span class="hljs-params"><span class="hljs-function">&#125;)</span>)</span></span><br><span class="hljs-function"><span class="hljs-title">fn</span><span class="hljs-params">()</span>.<span class="hljs-title">then</span><span class="hljs-params">(res =&gt; &#123;</span></span><br><span class="hljs-params"><span class="hljs-function">  console.log<span class="hljs-params">(res)</span></span></span><br><span class="hljs-params"><span class="hljs-function">&#125;)</span></span><br><span class="hljs-function"><span class="hljs-title">console</span>.<span class="hljs-title">log</span><span class="hljs-params">(<span class="hljs-string">&#x27;start&#x27;</span>)</span></span><br></code></pre></td></tr></table></figure><p>è¯·ä»”ç»†çœ‹çœ‹å“¦ï¼Œfnå‡½æ•°å®ƒæ˜¯ç›´æ¥è¿”å›äº†ä¸€ä¸ªnew Promiseçš„ï¼Œè€Œä¸”fnå‡½æ•°çš„è°ƒç”¨æ˜¯åœ¨startä¹‹å‰ï¼Œæ‰€ä»¥å®ƒé‡Œé¢çš„å†…å®¹åº”è¯¥ä¼šå…ˆæ‰§è¡Œã€‚</p><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs scheme"><span class="hljs-number">1</span><br><span class="hljs-symbol">&#x27;start</span>&#x27;<br><span class="hljs-symbol">&#x27;success</span>&#x27;<br></code></pre></td></tr></table></figure><h4 id="1-6-é¢˜ç›®å…­"><a href="#1-6-é¢˜ç›®å…­" class="headerlink" title="1.6 é¢˜ç›®å…­"></a>1.6 é¢˜ç›®å…­</h4><p>å¦‚æœæŠŠfnçš„è°ƒç”¨æ”¾åˆ°startä¹‹åå‘¢ï¼Ÿ</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">const fn = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span><br>  <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">(resolve, reject)</span> =&gt;</span> &#123;<br>    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>);<br>    resolve(<span class="hljs-string">&quot;success&quot;</span>);<br>  &#125;);<br><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;start&quot;</span>);<br>fn().<span class="hljs-keyword">then</span>(res =&gt; &#123;<br>  <span class="hljs-built_in">console</span>.log(res);<br>&#125;);<br></code></pre></td></tr></table></figure><p>ç°åœ¨startå°±åœ¨1ä¹‹å‰æ‰“å°å‡ºæ¥äº†ï¼Œå› ä¸ºfnå‡½æ•°æ˜¯ä¹‹åæ‰§è¡Œçš„ã€‚</p><p>  æ³¨æ„âš ï¸ï¼šä¹‹å‰æˆ‘ä»¬å¾ˆå®¹æ˜“å°±ä»¥ä¸ºçœ‹åˆ°new Promise()å°±æ‰§è¡Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°å‡½æ•°äº†ï¼Œå…¶å®è¿™æ˜¯ä¸å¯¹çš„ï¼Œå°±åƒè¿™ä¸¤é“é¢˜ä¸­ï¼Œæˆ‘ä»¬å¾—æ³¨æ„å®ƒæ˜¯ä¸æ˜¯è¢«åŒ…è£¹åœ¨å‡½æ•°å½“ä¸­ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œåªæœ‰åœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œã€‚</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-string">&quot;start&quot;</span><br><span class="hljs-number">1</span><br><span class="hljs-string">&quot;success&quot;</span><br></code></pre></td></tr></table></figure></li></ul><p>æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚</p><p>æ‰‹å†™ï¼š</p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ€»ç»“</tag>
      
      <tag>promise</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Reactäº‹ä»¶é€šä¿¡</title>
    <link href="/2021/07/30/React%E4%BA%8B%E4%BB%B6%E9%80%9A%E4%BF%A1/"/>
    <url>/2021/07/30/React%E4%BA%8B%E4%BB%B6%E9%80%9A%E4%BF%A1/</url>
    
    <content type="html"><![CDATA[<h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>Reactç»„ä»¶ä¹‹é—´çš„é€šä¿¡ä¸€èˆ¬åˆ†ä¸ºä¸‹é¢å‡ ç§æƒ…å†µï¼š</p><ul><li>çˆ¶å­ç»„ä»¶ä¹‹é—´çš„é€šä¿¡</li><li>éåµŒå¥—ç»„ä»¶ä¹‹é—´çš„é€šä¿¡</li></ul><h2 id="çˆ¶å­ç»„ä»¶ä¹‹é—´çš„é€šä¿¡"><a href="#çˆ¶å­ç»„ä»¶ä¹‹é—´çš„é€šä¿¡" class="headerlink" title="çˆ¶å­ç»„ä»¶ä¹‹é—´çš„é€šä¿¡"></a>çˆ¶å­ç»„ä»¶ä¹‹é—´çš„é€šä¿¡</h2><p>è¿™æ˜¯æœ€ç®€å•ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§é€šä¿¡æ–¹å¼ï¼šçˆ¶ç»„ä»¶é€šè¿‡å‘å­ç»„ä»¶ä¼ é€’ propsï¼Œå­ç»„ä»¶å¾—åˆ° props åè¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚ä¸‹é¢è´´ä¸¤æ®µä»£ç :</p><p>çˆ¶ç»„ä»¶ FatherComp.jsï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> Son <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./SonComp&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">FatherComp</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Son</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;æˆ‘å°±æ˜¯é«˜é˜¶é¢†ä¸»&quot;</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br><br></code></pre></td></tr></table></figure><p>å­ç»„ä»¶ SonComp.jsï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><br><span class="hljs-keyword">const</span> Son = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;props.title&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;<br>&#125;;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Son;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªä¹Ÿæ²¡å•¥å¥½è¯´çš„ï¼Œæœ€ç®€å•çš„é€ä¼ ï¼Œä¸‹é¢ä¸»è¦ä»‹ç»éåµŒå¥—çš„ç»„ä»¶ä¹‹é—´çš„é€šä¿¡ã€‚</p><h2 id="éåµŒå¥—ç»„ä»¶ä¹‹é—´çš„é€šä¿¡"><a href="#éåµŒå¥—ç»„ä»¶ä¹‹é—´çš„é€šä¿¡" class="headerlink" title="éåµŒå¥—ç»„ä»¶ä¹‹é—´çš„é€šä¿¡"></a>éåµŒå¥—ç»„ä»¶ä¹‹é—´çš„é€šä¿¡</h2><p>ç®€å•æ¥è¯´å°±æ˜¯ç»„ä»¶ä¹‹é—´æ²¡æœ‰ä»€ä¹ˆå…³è”ï¼Œéœ€è¦é€šä¿¡å°±éœ€è¦æœ‰ä¸ªåª’ä»‹ï¼Œè¿™é‡Œæˆ‘ä»¬é‡‡ç”¨è‡ªå®šä¹‰äº‹ä»¶çš„æ–¹å¼æ¥è¿›è¡Œé€šä¿¡ï¼š<br>é¦–å…ˆéœ€è¦å®‰è£…ä¸€ä¸ªeventåŒ…</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">npm install events <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure><p>æ–°å»ºä¸€ä¸ª event.jsï¼Œå¼•å…¥ events åŒ…ï¼Œå¹¶å‘å¤–æä¾›ä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œä¾›é€šä¿¡æ—¶ä½¿ç”¨ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">import</span> &#123; EventEmitter &#125; from <span class="hljs-string">&quot;events&quot;</span>;<br><span class="hljs-function"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title">EventEmitter</span><span class="hljs-params">()</span></span>;<br></code></pre></td></tr></table></figure><p>App.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./styles.css&quot;</span>;<br><br><span class="hljs-keyword">import</span> Comp1 <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Comp1&quot;</span>;<br><span class="hljs-keyword">import</span> Comp2 <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./Comp2&quot;</span>;<br><span class="hljs-keyword">import</span> FatherComp <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./FatherComp&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">FatherComp</span> /&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Comp1</span> /&gt;</span></span><br><span class="xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Comp2</span> /&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>Comp1.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> React, &#123; useState, useEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> emitter <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./event&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Comp1</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> [msg, setMsg] = useState(<span class="hljs-literal">null</span>);<br>  useEffect(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-comment">// å£°æ˜ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶</span><br>    <span class="hljs-comment">// åœ¨ç»„ä»¶è£…è½½å®Œæˆä»¥å</span><br>    <span class="hljs-built_in">this</span>.eventEmitter = emitter.addListener(<span class="hljs-string">&quot;clickMe&quot;</span>, <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> &#123;<br>      setMsg(msg);<br>    &#125;);<br>    <span class="hljs-comment">// ç»„ä»¶é”€æ¯å‰ç§»é™¤äº‹ä»¶ç›‘å¬</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>      emitter.removeListener(<span class="hljs-built_in">this</span>.eventEmitter);<br>    &#125;;<br>  &#125;, []);<br><br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">      &#123;msg&#125;</span><br><span class="xml">      ç»„ä»¶1</span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>Comp2.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;<br><span class="hljs-keyword">import</span> emitter <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./event&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Comp2</span>(<span class="hljs-params"></span>) </span>&#123;<br>  <span class="hljs-keyword">const</span> cb = <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-comment">// è§¦å‘è‡ªå®šä¹‰äº‹ä»¶</span><br>      emitter.emit(<span class="hljs-string">&quot;clickMe&quot;</span>, <span class="hljs-string">&quot;Hello&quot;</span>);<br>    &#125;;<br>  &#125;;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="xml">      ç»„ä»¶2<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;cb()&#125;</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸‹é¢æˆ‘ä»¬å†™ä¸€ä¸ªç®€å•çš„äº‹ä»¶demoæ¥æ·±å…¥äº†è§£ä¸€ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> eventPool = &#123;<br>  <span class="hljs-attr">map</span>: &#123;&#125;,<br>  <span class="hljs-comment">// äº‹ä»¶è®¢é˜…</span><br>  <span class="hljs-attr">on</span>: <span class="hljs-function">(<span class="hljs-params">name, cb</span>) =&gt;</span> &#123;<br>    eventPool.map[name] = cb;<br>  &#125;,<br>  <span class="hljs-comment">// äº‹ä»¶å‘å°„</span><br>  <span class="hljs-attr">emit</span>: <span class="hljs-function">(<span class="hljs-params">name, ...args</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> cb = eventPool.map[name];<br>    cb &amp;&amp; cb(...args);<br>  &#125;<br>&#125;;<br><span class="hljs-comment">// xxxä¸ºäº‹ä»¶åï¼Œæœ‰ä¸¤ä¸ªå‚æ•°</span><br>eventPool.on(<span class="hljs-string">&quot;xxx&quot;</span>, <span class="hljs-function">(<span class="hljs-params">p1, p2</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(p1, p2));<br><span class="hljs-comment">// å‘å°„å®Œç›´æ¥æ‰“å°äº†è¿™ä¸¤ä¸ªå‚æ•°</span><br>eventPool.emit(<span class="hljs-string">&quot;xxx&quot;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<br></code></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è‡ªå®šä¹‰äº‹ä»¶åœ¨ç»„ä»¶ä¹‹é—´æ²¡æœ‰ç›´æ¥è”ç³»çš„æƒ…å†µä¸‹ä½¿ç”¨è¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œæ€»ä¹‹å°±æ˜¯é¦™~<br><a href="https://codesandbox.io/s/comp-interaction-demo-8ov47">è¿™é‡Œ</a>æ˜¯æœ¬ç¯‡æ–‡ç« æ¶‰åŠçš„ä»£ç </p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯æŠ€æœ¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>React</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo ç®€ä»‹ï¼Œå®‰è£…ï¼Œéƒ¨ç½²</title>
    <link href="/2021/07/30/hexo%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B/"/>
    <url>/2021/07/30/hexo%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>hexoæ˜¯ä½¿ç”¨node.jså¼€å‘çš„ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ã€é«˜æ•ˆã€å¼€æºçš„é™æ€åšå®¢ç”Ÿæˆå™¨ï¼Œä½¿ç”¨äº†<a href="https://www.zybuluo.com/mdeditor">MarkDown</a>è§£ææ–‡ç« ã€‚æˆ‘ä»¬å¯ä»¥ç”¨hexoåœ¨æœ¬åœ°èµ·å¥½æœåŠ¡ï¼Œæ‰˜ç®¡åˆ°githubå°±èƒ½é€šè¿‡githubåŸŸåè®¿é—®(å…è´¹ï¼Œçœäº‹)ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„åŸŸåè§£æ(èŠ±é’±ï¼Œé«˜å¤§ä¸Š)ã€‚</p><p>æœ¬æ–‡å¯èƒ½å¯¹åˆå­¦è®¡ç®—æœºçš„ç«¥é‹ä»¬ä¸å¤ªå‹å¥½ï¼Œè¿™é‡Œçœå»äº†node.jså’Œgitçš„å®‰è£…åŠé…ç½®ï¼ŒåŒ…æ‹¬è®¾ç½®Gitç”¨æˆ·ä¿¡æ¯ï¼Œç”ŸæˆSSH keyå…¬é’¥ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ï¼Œå¯ä»¥è‡ªè¡Œç™¾åº¦~</p><h3 id="gitä»“åº“é…ç½®"><a href="#gitä»“åº“é…ç½®" class="headerlink" title="gitä»“åº“é…ç½®"></a>gitä»“åº“é…ç½®</h3><p>æˆ‘é‡‡ç”¨çš„æ˜¯hexo + githubPagesæ­å»ºï¼Œé¦–å…ˆéœ€è¦<strong>åœ¨GitHubä¸Šåˆ›å»ºGithub PagesæœåŠ¡</strong>ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹å›¾ï¼š<br><img src="/img/hexo-deploy.png" alt="hexo-deploy"><br>ç‚¹å‡»ä¹‹åä»“åº“åä¸€å®šè¦å¡« ç”¨æˆ·å.github.io çš„æ ¼å¼(å½¢å¦‚zhangzheyi1.github.io)ï¼Œä¸è¦å¡« ç”¨æˆ·å çš„æ ¼å¼(å½¢å¦‚zhangzheyi1)ï¼Œè¿™é‡Œè¸©äº†å¥½å‡ æ¬¡å‘äº†ï¼Œæµªè´¹äº†ä¸å°‘äº‹ä»¶ï¼Œå› ä¸ºç°åœ¨æˆ‘å·²ç»æœ‰è¿™ä¸ªä»“åº“äº†ï¼Œè¿™ä¸ªæŠ¥é”™å¯ä»¥å¿½ç•¥æ‰ï¼Œä¸‹é¢çš„readmeè®°å¾—ç‚¹ä¸Šâ¤ï¼Œæœ€åä¸€æ­¥ç‚¹åˆ›å»º<br><img src="/img/hexo-deploy2.png" alt="hexo-deploy2"></p><h3 id="hexoå®‰è£…"><a href="#hexoå®‰è£…" class="headerlink" title="hexoå®‰è£…"></a>hexoå®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ npm install -g hexo-cli <span class="hljs-comment">#å…¨å±€å®‰è£…hexoè„šæ‰‹æ¶</span><br></code></pre></td></tr></table></figure><h3 id="åˆå§‹åŒ–åˆ›å»ºåšå®¢"><a href="#åˆå§‹åŒ–åˆ›å»ºåšå®¢" class="headerlink" title="åˆå§‹åŒ–åˆ›å»ºåšå®¢"></a>åˆå§‹åŒ–åˆ›å»ºåšå®¢</h3><h3 id="1-åˆ›å»ºç«™ç‚¹æ ¹ç›®å½•"><a href="#1-åˆ›å»ºç«™ç‚¹æ ¹ç›®å½•" class="headerlink" title="1.åˆ›å»ºç«™ç‚¹æ ¹ç›®å½•"></a>1.åˆ›å»ºç«™ç‚¹æ ¹ç›®å½•</h3><p>é¦–å…ˆéœ€è¦åˆåˆ›å»ºä¸€ä¸ªåšå®¢æ–‡ä»¶å¤¹ï¼Œæ³¨æ„è¿™ä¸ª<strong>æ–‡ä»¶å¤¹çš„åå­—</strong>æœ€å¥½è¦å’Œä½ åˆšæ‰åˆ›å»ºçš„GitHubPagesçš„åœ°å€ä¸€è‡´ä¹Ÿå°±æ˜¯<strong>your_github_name.github.io</strong>(å½¢å¦‚zhangzheyi1.github.io)ã€‚è¿™ä¸ªæ–‡ä»¶å¤¹ä»¥åä¹Ÿç»Ÿç§°ä¸ºç«™ç‚¹æ ¹ç›®å½•ã€‚</p><h3 id="2-åˆå§‹åŒ–ç«™ç‚¹æ ¹ç›®å½•"><a href="#2-åˆå§‹åŒ–ç«™ç‚¹æ ¹ç›®å½•" class="headerlink" title="2.åˆå§‹åŒ–ç«™ç‚¹æ ¹ç›®å½•"></a>2.åˆå§‹åŒ–ç«™ç‚¹æ ¹ç›®å½•</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> mkdir &lt;folder&gt;  <span class="hljs-comment">#åˆ›å»ºç«™ç‚¹æ ¹ç›®å½•ï¼Œå½¢å¦‚(mkdir zhangzheyi1.github.io)</span><br><span class="hljs-variable">$</span> hexo init &lt;folder&gt;  <span class="hljs-comment">#ä½¿ç”¨Hexoåˆå§‹åŒ–ç«™ç‚¹æ ¹ç›®å½•(hexo init zhangzheyi1.github.io)</span><br><span class="hljs-variable">$</span> <span class="hljs-built_in">cd</span> &lt;folder&gt;  <span class="hljs-comment">#è¿›å…¥åˆ°ç«™ç‚¹æ ¹ç›®å½•(cd zhangzheyi1.github.io)</span><br><span class="hljs-variable">$</span> npm install  <span class="hljs-comment">#å®‰è£…npmæ‰€ä¾èµ–çš„æ–‡ä»¶</span><br></code></pre></td></tr></table></figure><p>ç­‰ä»–å®‰è£…å¥½ï¼Œåœ¨è¾“å…¥ä¸¤æ¡å°±èƒ½è®¿é—®æœ¬åœ°çš„åšå®¢äº†</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs verilog">$ hexo <span class="hljs-keyword">generate</span> # ç”Ÿæˆåšå®¢<br>$ hexo server # æœ¬åœ°é¢„è§ˆ<br></code></pre></td></tr></table></figure><p>é»˜è®¤ç«¯å£æ˜¯4000ï¼Œç›´æ¥æµè§ˆå™¨é”®å…¥ <a href="http://localhost:4000/">http://localhost:4000</a> å°±å¯ä»¥è®¿é—®äº†ï¼Œç°åœ¨æ˜¯é»˜è®¤çš„ä¸»é¢˜</p><p><img src="/img/hexo-deploy3.png" alt="hexo-deploy3"></p><h3 id="3-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#3-ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="3.ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>3.ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><p>ç°åœ¨æˆ‘ä»¬åªèƒ½åœ¨æœ¬åœ°é¢„è§ˆï¼Œæƒ³åœ¨gitPageä¸Šé¢„è§ˆè¿˜éœ€è¦è¿›è¡Œä¸€äº›é…ç½®ï¼Œæ‰¾åˆ°æ ¹ç›®å½•ä¸‹çš„_confi.ymlæ–‡ä»¶ï¼Œæ‹‰åˆ°æœ€ä¸‹é¢æˆ‘ä»¬çœ‹åˆ°çš„æ˜¯ä»¥ä¸‹code</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">deploy:<br>  <span class="hljs-built_in">type</span>: <span class="hljs-string">&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><p>deployå°±æ˜¯éƒ¨ç½²çš„æ„æ€ï¼Œè¿™é‡Œéƒ¨ç½²çš„è¯éœ€è¦å¡«ä¸‹ä¿¡æ¯ï¼Œä¿®æ”¹ä¸ºä»¥ä¸‹ä»£ç å°±å¯ä»¥</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">deploy:</span><br><span class="hljs-symbol">  type:</span> git<br><span class="hljs-symbol">  repo:</span> git@github.com:zhangzheyi1/zhangzheyi1.github.io.git<br><span class="hljs-symbol">  branch:</span> master<br></code></pre></td></tr></table></figure><p>repoå°±æ˜¯ä»“åº“åœ°å€ï¼Œè¿™å„¿ç”¨çš„æ˜¯SSHï¼Œæ‰¾åˆ°åˆšæ‰åˆ›å»ºçš„ä»“åº“ï¼ŒæŠŠè¿™ä¸ªåœ°å€å¤åˆ¶ä¸‹æ¥ç²˜åˆ°repoé‡Œå°±å¯ä»¥äº†</p><p><img src="/img/hexo-deploy4.png" alt="hexo-deploy4"></p><p>å®‰è£…ä»¥ä¸‹æ’ä»¶ï¼š</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">$ npm <span class="hljs-keyword">install</span> hexo-deployer-git â€”save<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å‘å¸ƒæœ¬åœ°åšå®¢åˆ°è¿œç¨‹ä»“åº“ï¼š</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-variable">$ </span>hexo deploy<br></code></pre></td></tr></table></figure><p>å¯èƒ½åˆ°è¿™æ­¥ç™»é™†<strong>your_github_name.github.io</strong>ï¼Œå½¢å¦‚zhangzheyi1.github.ioï¼Œæœ‰äº›åŒå­¦è¿˜æ˜¯æ²¡åŠæ³•çœ‹åˆ°è‡ªå·±çš„åšå®¢ï¼Œå°±æ˜¯å› ä¸ºgithubçš„é…ç½®æœ‰ç‚¹æ¶å¿ƒäººï¼Œå½“æ—¶æˆ‘ä¹Ÿåœ¨è¿™å„¿ä¸çŸ¥é“æ€ä¹ˆæï¼Œæ˜¯å› ä¸ºé»˜è®¤çš„åˆ†æ”¯æ˜¯mainï¼Œè€Œä¸æ˜¯masterï¼Œéœ€è¦ç‚¹å‡»ä»“åº“çš„settings =&gt; pages ç„¶åä¿®æ”¹ä¸€ä¸‹é»˜è®¤çš„åˆ†æ”¯å°±å¯ä»¥<br><img src="/img/hexo-deploy5.png" alt="hexo-deploy5"></p><p>åˆ°è¿™æ­¥åŸºæœ¬ä¸Šå°±okäº†ï¼Œç½‘ä¸Šå‘çš„å¥½å¤šåšå®¢éƒ½æ˜¯å¾ˆä¹…ä»¥å‰å†™çš„ï¼Œgithubçš„ç‰ˆæœ¬å’Œhexoçš„é…ç½®æ–‡ä»¶éƒ½ä¸ä¸€æ ·ï¼ŒæŒ‰ç…§æœ¬ç¯‡æ–‡ç« åº”è¯¥å¯ä»¥å®Œæˆï¼Œç°åœ¨çš„åšå®¢åªæ˜¯ä¸€ä¸ªé»˜è®¤ä¸»é¢˜ï¼Œxdmæƒ³æ¢ä¸»é¢˜çš„è¯å¯ä»¥åœ¨ç½‘ä¸Šæœä¸€ä¸‹ä¸»é¢˜ï¼Œæœ¬åšå®¢ç”¨çš„æ˜¯Fluidä¸»é¢˜ï¼Œç¬¬ä¸€æ¬¡å‘æ–‡ï¼Œç¡®å®æŒºè€—æ—¶é—´çš„ï¼Œå¸Œæœ›è‡ªå·±ä»¥åèƒ½åšæŒä¸‹å»~</p>]]></content>
    
    
    <categories>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
      <tag>åšå®¢</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
